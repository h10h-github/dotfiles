<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActionController::Responder - actionpack-4.1.8 Documentation</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-ActionController::Responder-label-Builtin+HTTP+verb+semantics">Builtin HTTP verb semantics</a>
    <li><a href="#class-ActionController::Responder-label-Nested+resources">Nested resources</a>
    <li><a href="#class-ActionController::Responder-label-Custom+options">Custom options</a>
  </ul>
</div>


  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-call">::call</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-api_behavior">#api_behavior</a>
    
    <li ><a href="#method-i-api_location">#api_location</a>
    
    <li ><a href="#method-i-default_action">#default_action</a>
    
    <li ><a href="#method-i-default_render">#default_render</a>
    
    <li ><a href="#method-i-display">#display</a>
    
    <li ><a href="#method-i-display_errors">#display_errors</a>
    
    <li ><a href="#method-i-has_errors-3F">#has_errors?</a>
    
    <li ><a href="#method-i-has_renderer-3F">#has_renderer?</a>
    
    <li ><a href="#method-i-json_resource_errors">#json_resource_errors</a>
    
    <li ><a href="#method-i-navigation_behavior">#navigation_behavior</a>
    
    <li ><a href="#method-i-navigation_location">#navigation_location</a>
    
    <li ><a href="#method-i-resource_errors">#resource_errors</a>
    
    <li ><a href="#method-i-resource_location">#resource_location</a>
    
    <li ><a href="#method-i-resourceful-3F">#resourceful?</a>
    
    <li ><a href="#method-i-respond">#respond</a>
    
    <li ><a href="#method-i-response_overridden-3F">#response_overridden?</a>
    
    <li ><a href="#method-i-to_format">#to_format</a>
    
    <li ><a href="#method-i-to_html">#to_html</a>
    
    <li ><a href="#method-i-to_js">#to_js</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActionController::Responder">
  <h1 id="class-ActionController::Responder" class="class">
    class ActionController::Responder
  </h1>

  <section class="description">
    
<p>Responsible for exposing a resource to different mime requests, usually
depending on the HTTP verb. The responder is triggered when
<code>respond_with</code> is called. The simplest case to study is a GET
request:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">PeopleController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
  <span class="ruby-identifier">respond_to</span> :<span class="ruby-identifier">html</span>, :<span class="ruby-identifier">xml</span>, :<span class="ruby-identifier">json</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
    <span class="ruby-ivar">@people</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">all</span>
    <span class="ruby-identifier">respond_with</span>(<span class="ruby-ivar">@people</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>When a request comes in, for example for an XML response, three steps
happen:</p>

<pre>1) the responder searches for a template at people/index.xml;

2) if the template is not available, it will invoke &lt;code&gt;#to_xml&lt;/code&gt; on the given resource;

3) if the responder does not &lt;code&gt;respond_to :to_xml&lt;/code&gt;, call &lt;code&gt;#to_format&lt;/code&gt; on it.</pre>

<h3 id="class-ActionController::Responder-label-Builtin+HTTP+verb+semantics">Builtin HTTP verb semantics<span><a href="#class-ActionController::Responder-label-Builtin+HTTP+verb+semantics">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The default Rails responder holds semantics for each HTTP verb. Depending
on the content type, verb and the resource status, it will behave
differently.</p>

<p>Using Rails default responder, a POST request for creating an object could
be written as:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">user</span>])
  <span class="ruby-identifier">flash</span>[:<span class="ruby-identifier">notice</span>] = <span class="ruby-string">&#39;User was successfully created.&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">respond_with</span>(<span class="ruby-ivar">@user</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>Which is exactly the same as:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">user</span>])

  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">save</span>
      <span class="ruby-identifier">flash</span>[:<span class="ruby-identifier">notice</span>] = <span class="ruby-string">&#39;User was successfully created.&#39;</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@user</span>) }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">xml</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">created</span>, <span class="ruby-identifier">location</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;new&quot;</span> }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">xml</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">unprocessable_entity</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The same happens for PATCH/PUT and DELETE requests.</p>

<h3 id="class-ActionController::Responder-label-Nested+resources">Nested resources<span><a href="#class-ActionController::Responder-label-Nested+resources">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You can supply nested resources as you do in <code>form_for</code> and
<code>polymorphic_url</code>. Consider the project has many tasks example.
The create action for TasksController would be like:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">project_id</span>])
  <span class="ruby-ivar">@task</span> = <span class="ruby-ivar">@project</span>.<span class="ruby-identifier">tasks</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">task</span>])
  <span class="ruby-identifier">flash</span>[:<span class="ruby-identifier">notice</span>] = <span class="ruby-string">&#39;Task was successfully created.&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@task</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">respond_with</span>(<span class="ruby-ivar">@project</span>, <span class="ruby-ivar">@task</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>Giving several resources ensures that the responder will redirect to
<code>project_task_url</code> instead of <code>task_url</code>.</p>

<p>Namespaced and singleton resources require a symbol to be given, as in
polymorphic urls. If a project has one manager which has many tasks, it
should be invoked as:</p>

<pre>respond_with(@project, :manager, @task)</pre>

<p>Note that if you give an array, it will be treated as a collection, so the
following is not equivalent:</p>

<pre>respond_with [@project, :manager, @task]</pre>

<h3 id="class-ActionController::Responder-label-Custom+options">Custom options<span><a href="#class-ActionController::Responder-label-Custom+options">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><code>respond_with</code> also allows you to pass options that are
forwarded to the underlying render call. Those options are only applied for
success scenarios. For instance, you can do the following in the create
method above:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">project_id</span>])
  <span class="ruby-ivar">@task</span> = <span class="ruby-ivar">@project</span>.<span class="ruby-identifier">tasks</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">task</span>])
  <span class="ruby-identifier">flash</span>[:<span class="ruby-identifier">notice</span>] = <span class="ruby-string">&#39;Task was successfully created.&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@task</span>.<span class="ruby-identifier">save</span>
  <span class="ruby-identifier">respond_with</span>(<span class="ruby-ivar">@project</span>, <span class="ruby-ivar">@task</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> <span class="ruby-value">201</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>This will return status 201 if the task was saved successfully. If not, it
will simply ignore the given options and return status 422 and the resource
errors. You can also override the location to redirect to:</p>

<pre>respond_with(@project, location: root_path)</pre>

<p>To customize the failure scenario, you can pass a block to
<code>respond_with</code>:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">project_id</span>])
  <span class="ruby-ivar">@task</span> = <span class="ruby-ivar">@project</span>.<span class="ruby-identifier">tasks</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">task</span>])
  <span class="ruby-identifier">respond_with</span>(<span class="ruby-ivar">@project</span>, <span class="ruby-ivar">@task</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> <span class="ruby-value">201</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@task</span>.<span class="ruby-identifier">save</span>
      <span class="ruby-identifier">flash</span>[:<span class="ruby-identifier">notice</span>] = <span class="ruby-string">&#39;Task was successfully created.&#39;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-string">&quot;some_special_template&quot;</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Using <code>respond_with</code> with a block follows the same syntax as
<code>respond_to</code>.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="DEFAULT_ACTIONS_FOR_VERBS">DEFAULT_ACTIONS_FOR_VERBS
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-controller" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">controller</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-format" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">format</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-options" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">options</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-request" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">request</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-resource" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">resource</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-resources" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">resources</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">call</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initializes a new responder and invokes the proper format. If the format is
not defined, call to_format.</p>
          
          

          
          <div class="method-source-code" id="call-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">call</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>).<span class="ruby-identifier">respond</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(controller, resources, options={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">controller</span>, <span class="ruby-identifier">resources</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-ivar">@controller</span> = <span class="ruby-identifier">controller</span>
  <span class="ruby-ivar">@request</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">request</span>
  <span class="ruby-ivar">@format</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">formats</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-ivar">@resource</span> = <span class="ruby-identifier">resources</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-ivar">@resources</span> = <span class="ruby-identifier">resources</span>
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
  <span class="ruby-ivar">@action</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:action</span>)
  <span class="ruby-ivar">@default_response</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:default_response</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-respond" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">respond</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Main entry point for responder responsible to dispatch to the proper
format.</p>
          
          

          
          <div class="method-source-code" id="respond-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">respond</span>
  <span class="ruby-identifier">method</span> = <span class="ruby-node">&quot;to_#{format}&quot;</span>
  <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">method</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">to_format</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_format" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_format</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>All other formats follow the procedure below. First we try to render a
template, if the template is not available, we verify if the resource
responds to :to_format and display it.</p>
          
          

          
          <div class="method-source-code" id="to_format-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_format</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">get?</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">has_errors?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">response_overridden?</span>
    <span class="ruby-identifier">default_render</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">display_errors</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingTemplate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">api_behavior</span>(<span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_html" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_html</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>HTML format does not render the resource, it always attempt to render a
template.</p>
          
          

          
          <div class="method-source-code" id="to_html-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_html</span>
  <span class="ruby-identifier">default_render</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingTemplate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">navigation_behavior</span>(<span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_js" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_js</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Responder.html#method-i-to_js">#to_js</a> simply tries to render a
template. If no template is found, raises the error.</p>
          
          

          
          <div class="method-source-code" id="to_js-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 171</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_js</span>
  <span class="ruby-identifier">default_render</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-api_behavior" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">api_behavior</span><span
            class="method-args">(error)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This is the common behavior for formats associated with APIs, such as :xml
and :json.</p>
          
          

          
          <div class="method-source-code" id="api_behavior-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 203</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">api_behavior</span>(<span class="ruby-identifier">error</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">error</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">resourceful?</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">MissingRenderer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">format</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">has_renderer?</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">get?</span>
    <span class="ruby-identifier">display</span> <span class="ruby-identifier">resource</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">post?</span>
    <span class="ruby-identifier">display</span> <span class="ruby-identifier">resource</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:created</span>, <span class="ruby-value">:location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">api_location</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">head</span> <span class="ruby-value">:no_content</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-api_location" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">api_location</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Responder.html#method-i-resource_location">resource_location</a>
        </div>
        
      </div>

    
      <div id="method-i-default_action" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">default_action</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>By default, render the <code>:edit</code> action for HTML requests with
errors, unless the verb was POST.</p>
          
          

          
          <div class="method-source-code" id="default_action-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default_action</span>
  <span class="ruby-ivar">@action</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">DEFAULT_ACTIONS_FOR_VERBS</span>[<span class="ruby-identifier">request</span>.<span class="ruby-identifier">request_method_symbol</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-default_render" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">default_render</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If a response block was given, use it, otherwise call render on controller.</p>
          
          

          
          <div class="method-source-code" id="default_render-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">default_render</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@default_response</span>
    <span class="ruby-ivar">@default_response</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">default_render</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-display" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">display</span><span
            class="method-args">(resource, given_options={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Display is just a shortcut to render a resource with the current format.</p>

<pre>display @user, status: :ok</pre>

<p>For XML requests it&#39;s equivalent to:</p>

<pre>render xml: @user, status: :ok</pre>

<p>Options sent by the user are also used:</p>

<pre>respond_with(@user, status: :created)
display(@user, status: :ok)</pre>

<p>Results in:</p>

<pre>render xml: @user, status: :created</pre>
          
          

          
          <div class="method-source-code" id="display-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">display</span>(<span class="ruby-identifier">resource</span>, <span class="ruby-identifier">given_options</span>={})
  <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">render</span> <span class="ruby-identifier">given_options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">options</span>).<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">resource</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-display_errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">display_errors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="display_errors-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">display_errors</span>
  <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">render</span> <span class="ruby-identifier">format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">resource_errors</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:unprocessable_entity</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_errors-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_errors?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Check whether the resource has errors.</p>
          
          

          
          <div class="method-source-code" id="has_errors-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 269</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_errors?</span>
  <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:errors</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">resource</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_renderer-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_renderer?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Check whether the necessary Renderer is available</p>
          
          

          
          <div class="method-source-code" id="has_renderer-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 274</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_renderer?</span>
  <span class="ruby-constant">Renderers</span><span class="ruby-operator">::</span><span class="ruby-constant">RENDERERS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">format</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-json_resource_errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">json_resource_errors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="json_resource_errors-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">json_resource_errors</span>
  {<span class="ruby-value">:errors</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">errors</span>}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-navigation_behavior" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">navigation_behavior</span><span
            class="method-args">(error)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This is the common behavior for formats associated with browsing, like
:html, :iphone and so forth.</p>
          
          

          
          <div class="method-source-code" id="navigation_behavior-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 192</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">navigation_behavior</span>(<span class="ruby-identifier">error</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">get?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">error</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">has_errors?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">default_action</span>
    <span class="ruby-identifier">render</span> <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default_action</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">navigation_location</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-navigation_location" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">navigation_location</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Responder.html#method-i-resource_location">resource_location</a>
        </div>
        
      </div>

    
      <div id="method-i-resource_errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resource_errors</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resource_errors-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resource_errors</span>
  <span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{format}_resource_errors&quot;</span>, <span class="ruby-keyword">true</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{format}_resource_errors&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">errors</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resource_location" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resource_location</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the resource location by retrieving it from the options or
returning the resources array.</p>
          
          

          
          <div class="method-source-code" id="resource_location-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resource_location</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:location</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">resources</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Responder.html#method-i-navigation_location">navigation_location</a>, <a href="Responder.html#method-i-api_location">api_location</a>
        </div>
        

        
      </div>

    
      <div id="method-i-resourceful-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resourceful?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Checks whether the resource responds to the current format or not.</p>
          
          

          
          <div class="method-source-code" id="resourceful-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resourceful?</span>
  <span class="ruby-identifier">resource</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;to_#{format}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-response_overridden-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">response_overridden?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="response_overridden-3F-source">
            <pre><span class="ruby-comment"># File lib/action_controller/metal/responder.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">response_overridden?</span>
  <span class="ruby-ivar">@default_response</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

