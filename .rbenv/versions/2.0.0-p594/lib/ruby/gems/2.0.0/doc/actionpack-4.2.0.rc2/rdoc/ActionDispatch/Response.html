<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActionDispatch::Response - actionpack-4.2.0.rc2 Documentation</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">Rack::Response::Helpers</span>
  
  
  
    <li><a class="include" href="Http/FilterRedirect.html">ActionDispatch::Http::FilterRedirect</a>
  
  
  
    <li><a class="include" href="Http/Cache/Response.html">ActionDispatch::Http::Cache::Response</a>
  
  
  
    <li><span class="include">MonitorMixin</span>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-abort">#abort</a>
    
    <li ><a href="#method-i-append_charset-3F">#append_charset?</a>
    
    <li ><a href="#method-i-assign_default_content_type_and_charset-21">#assign_default_content_type_and_charset!</a>
    
    <li ><a href="#method-i-await_commit">#await_commit</a>
    
    <li ><a href="#method-i-await_sent">#await_sent</a>
    
    <li ><a href="#method-i-before_committed">#before_committed</a>
    
    <li ><a href="#method-i-before_sending">#before_sending</a>
    
    <li ><a href="#method-i-body">#body</a>
    
    <li ><a href="#method-i-body-3D">#body=</a>
    
    <li ><a href="#method-i-body_parts">#body_parts</a>
    
    <li ><a href="#method-i-build_buffer">#build_buffer</a>
    
    <li ><a href="#method-i-close">#close</a>
    
    <li ><a href="#method-i-code">#code</a>
    
    <li ><a href="#method-i-commit-21">#commit!</a>
    
    <li ><a href="#method-i-committed-3F">#committed?</a>
    
    <li ><a href="#method-i-content_type-3D">#content_type=</a>
    
    <li ><a href="#method-i-cookies">#cookies</a>
    
    <li ><a href="#method-i-delete_cookie">#delete_cookie</a>
    
    <li ><a href="#method-i-location">#location</a>
    
    <li ><a href="#method-i-location-3D">#location=</a>
    
    <li ><a href="#method-i-merge_default_headers">#merge_default_headers</a>
    
    <li ><a href="#method-i-message">#message</a>
    
    <li ><a href="#method-i-munge_body_object">#munge_body_object</a>
    
    <li ><a href="#method-i-prepare-21">#prepare!</a>
    
    <li ><a href="#method-i-rack_response">#rack_response</a>
    
    <li ><a href="#method-i-redirect_url">#redirect_url</a>
    
    <li ><a href="#method-i-response_code">#response_code</a>
    
    <li ><a href="#method-i-sending-21">#sending!</a>
    
    <li ><a href="#method-i-sending-3F">#sending?</a>
    
    <li ><a href="#method-i-sent-21">#sent!</a>
    
    <li ><a href="#method-i-sent-3F">#sent?</a>
    
    <li ><a href="#method-i-set_cookie">#set_cookie</a>
    
    <li ><a href="#method-i-status-3D">#status=</a>
    
    <li ><a href="#method-i-status_message">#status_message</a>
    
    <li ><a href="#method-i-to_a">#to_a</a>
    
    <li ><a href="#method-i-to_ary">#to_ary</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActionDispatch::Response">
  <h1 id="class-ActionDispatch::Response" class="class">
    class ActionDispatch::Response
  </h1>

  <section class="description">
    
<p>Represents an HTTP response generated by a controller action. Use it to
retrieve the current state of the response, or customize the response. It
can either represent a real HTTP response (i.e. one that is meant to be
sent back to the web browser) or a <a
href="TestResponse.html">TestResponse</a> (i.e. one that is generated from
integration tests).</p>

<p>Response is mostly a Ruby on Rails framework implementation detail, and
should never be used directly in controllers. Controllers should use the
methods defined in <a
href="../ActionController/Base.html">ActionController::Base</a> instead.
For example, if you want to set the HTTP response&#39;s content MIME type,
then use ActionControllerBase#headers instead of Response#headers.</p>

<p>Nevertheless, integration tests may want to inspect controller responses in
more detail, and that&#39;s when Response can be useful for application
developers. <a href="Integration.html">Integration</a> test methods such as
<a
href="Integration/RequestHelpers.html#method-i-get">ActionDispatch::Integration::RequestHelpers#get</a>
and <a
href="Integration/RequestHelpers.html#method-i-post">ActionDispatch::Integration::RequestHelpers#post</a>
return objects of type <a href="TestResponse.html">TestResponse</a> (which
are of course also of type Response).</p>

<p>For example, the following demo integration test prints the body of the
controller response to the console:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">DemoControllerTest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">IntegrationTest</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_print_root_path_to_console</span>
    <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>)
    <span class="ruby-identifier">puts</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="CONTENT_TYPE">CONTENT_TYPE
        
        <dd>
        
      
        <dt id="EMPTY">EMPTY
        
        <dd>
        
      
        <dt id="LOCATION">LOCATION
        
        <dd>
        
      
        <dt id="NO_CONTENT_CODES">NO_CONTENT_CODES
        
        <dd>
        
      
        <dt id="SET_COOKIE">SET_COOKIE
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-charset" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">charset</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The charset of the response. HTML wants to know the encoding of the content
you&#39;re giving them, so we need to send that along.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-content_type" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">content_type</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Sets the HTTP response&#39;s content MIME type. For example, in the
controller you could write this:</p>

<pre>response.content_type = &quot;text/plain&quot;</pre>

<p>If a character set has been defined for this response (see charset=) then
the character set information will also be included in the content type
information.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-header" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">header</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Get and set headers for this response.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-headers-3D" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">headers=</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Get and set headers for this response.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-request" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">request</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>The request that the response is responding to.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-sending_file" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">sending_file</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-status" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">status</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The HTTP status code.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-stream" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">stream</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The underlying body, as a streamable object.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(status = 200, header = {}, body = []) { |self| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">status</span> = <span class="ruby-value">200</span>, <span class="ruby-identifier">header</span> = {}, <span class="ruby-identifier">body</span> = [])
  <span class="ruby-keyword">super</span>()

  <span class="ruby-identifier">header</span> = <span class="ruby-identifier">merge_default_headers</span>(<span class="ruby-identifier">header</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_headers</span>)

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">body</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">header</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">status</span> = <span class="ruby-identifier">body</span>, <span class="ruby-identifier">header</span>, <span class="ruby-identifier">status</span>

  <span class="ruby-ivar">@sending_file</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@blank</span>        = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@cv</span>           = <span class="ruby-identifier">new_cond</span>
  <span class="ruby-ivar">@committed</span>    = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@sending</span>      = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@sent</span>         = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@content_type</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@charset</span>      = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">content_type</span> = <span class="ruby-keyword">self</span>[<span class="ruby-constant">CONTENT_TYPE</span>]
    <span class="ruby-identifier">type</span>, <span class="ruby-identifier">charset</span> = <span class="ruby-identifier">content_type</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/;\s*charset=/</span>)
    <span class="ruby-ivar">@content_type</span> = <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">Type</span>.<span class="ruby-identifier">lookup</span>(<span class="ruby-identifier">type</span>)
    <span class="ruby-ivar">@charset</span> = <span class="ruby-identifier">charset</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_charset</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">prepare_cache_control!</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-abort" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">abort</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="abort-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 267</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">abort</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:abort</span>)
    <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">abort</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:close</span>)
    <span class="ruby-comment"># `stream.close` should really be reserved for a close from the</span>
    <span class="ruby-comment"># other direction, but we must fall back to it for</span>
    <span class="ruby-comment"># compatibility.</span>
    <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-await_commit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">await_commit</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="await_commit-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">await_commit</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@cv</span>.<span class="ruby-identifier">wait_until</span> { <span class="ruby-ivar">@committed</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-await_sent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">await_sent</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="await_sent-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">await_sent</span>
  <span class="ruby-identifier">synchronize</span> { <span class="ruby-ivar">@cv</span>.<span class="ruby-identifier">wait_until</span> { <span class="ruby-ivar">@sent</span> } }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the content of the response as a string. This contains the contents
of any calls to <code>render</code>.</p>
          
          

          
          <div class="method-source-code" id="body-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">body</span>
  <span class="ruby-identifier">strings</span> = []
  <span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span> <span class="ruby-identifier">strings</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">part</span>.<span class="ruby-identifier">to_s</span> }
  <span class="ruby-identifier">strings</span>.<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body=</span><span
            class="method-args">(body)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows you to manually set or override the response body.</p>
          
          

          
          <div class="method-source-code" id="body-3D-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">body=</span>(<span class="ruby-identifier">body</span>)
  <span class="ruby-ivar">@blank</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EMPTY</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_path</span>)
    <span class="ruby-ivar">@stream</span> = <span class="ruby-identifier">body</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@stream</span> = <span class="ruby-identifier">build_buffer</span> <span class="ruby-keyword">self</span>, <span class="ruby-identifier">munge_body_object</span>(<span class="ruby-identifier">body</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-body_parts" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">body_parts</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="body_parts-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">body_parts</span>
  <span class="ruby-identifier">parts</span> = []
  <span class="ruby-ivar">@stream</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">parts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span> }
  <span class="ruby-identifier">parts</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-close" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">close</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="close-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">close</span>
  <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:close</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a string to ensure compatibility with
<code>Net::HTTPResponse</code>.</p>
          
          

          
          <div class="method-source-code" id="code-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">code</span>
  <span class="ruby-ivar">@status</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-commit-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">commit!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="commit-21-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">commit!</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">before_committed</span>
    <span class="ruby-ivar">@committed</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@cv</span>.<span class="ruby-identifier">broadcast</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-committed-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">committed?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="committed-3F-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">committed?</span>; <span class="ruby-identifier">synchronize</span> { <span class="ruby-ivar">@committed</span> }; <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_type-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_type=</span><span
            class="method-args">(content_type)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the HTTP content type.</p>
          
          

          
          <div class="method-source-code" id="content_type-3D-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">content_type=</span>(<span class="ruby-identifier">content_type</span>)
  <span class="ruby-ivar">@content_type</span> = <span class="ruby-identifier">content_type</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cookies" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cookies</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the response cookies, converted to a Hash of (name =&gt; value)
pairs</p>

<pre>assert_equal &#39;AuthorOfNewPage&#39;, r.cookies[&#39;author&#39;]</pre>
          
          

          
          <div class="method-source-code" id="cookies-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cookies</span>
  <span class="ruby-identifier">cookies</span> = {}
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">header</span> = <span class="ruby-keyword">self</span>[<span class="ruby-constant">SET_COOKIE</span>]
    <span class="ruby-identifier">header</span> = <span class="ruby-identifier">header</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">header</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_str</span>)
    <span class="ruby-identifier">header</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cookie</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">pair</span> = <span class="ruby-identifier">cookie</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;;&#39;</span>).<span class="ruby-identifier">first</span>
        <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;=&quot;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">unescape</span>(<span class="ruby-identifier">v</span>) }
        <span class="ruby-identifier">cookies</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">cookies</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_cookie" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_cookie</span><span
            class="method-args">(key, value={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="delete_cookie-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_cookie</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>={})
  <span class="ruby-operator">::</span><span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">delete_cookie_header!</span>(<span class="ruby-identifier">header</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-location" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">location</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The location header we&#39;ll be responding with.</p>
          
          

          
          <div class="method-source-code" id="location-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">location</span>
  <span class="ruby-identifier">headers</span>[<span class="ruby-constant">LOCATION</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Response.html#method-i-redirect_url">redirect_url</a>
        </div>
        

        
      </div>

    
      <div id="method-i-location-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">location=</span><span
            class="method-args">(url)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the location header we&#39;ll be responding with.</p>
          
          

          
          <div class="method-source-code" id="location-3D-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 259</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">location=</span>(<span class="ruby-identifier">url</span>)
  <span class="ruby-identifier">headers</span>[<span class="ruby-constant">LOCATION</span>] = <span class="ruby-identifier">url</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-message" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">message</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the corresponding message for the current HTTP status code:</p>

<pre class="ruby"><span class="ruby-identifier">response</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">200</span>
<span class="ruby-identifier">response</span>.<span class="ruby-identifier">message</span> <span class="ruby-comment"># =&gt; &quot;OK&quot;</span>

<span class="ruby-identifier">response</span>.<span class="ruby-identifier">status</span> = <span class="ruby-value">404</span>
<span class="ruby-identifier">response</span>.<span class="ruby-identifier">message</span> <span class="ruby-comment"># =&gt; &quot;Not Found&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="message-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">message</span>
  <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTP_STATUS_CODES</span>[<span class="ruby-ivar">@status</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Response.html#method-i-status_message">status_message</a>
        </div>
        

        
      </div>

    
      <div id="method-i-prepare-21" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">prepare!</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Response.html#method-i-to_a">to_a</a>
        </div>
        
      </div>

    
      <div id="method-i-redirect_url" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">redirect_url</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Response.html#method-i-location">location</a>
        </div>
        
      </div>

    
      <div id="method-i-response_code" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">response_code</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The response code of the request.</p>
          
          

          
          <div class="method-source-code" id="response_code-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 193</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">response_code</span>
  <span class="ruby-ivar">@status</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sending-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sending!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sending-21-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sending!</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">before_sending</span>
    <span class="ruby-ivar">@sending</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@cv</span>.<span class="ruby-identifier">broadcast</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sending-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sending?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sending-3F-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 178</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sending?</span>;   <span class="ruby-identifier">synchronize</span> { <span class="ruby-ivar">@sending</span> };   <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sent-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sent!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sent-21-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 171</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sent!</span>
  <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@sent</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@cv</span>.<span class="ruby-identifier">broadcast</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sent-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sent?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="sent-3F-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sent?</span>;      <span class="ruby-identifier">synchronize</span> { <span class="ruby-ivar">@sent</span> };      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_cookie" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_cookie</span><span
            class="method-args">(key, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="set_cookie-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 244</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_cookie</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-operator">::</span><span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">set_cookie_header!</span>(<span class="ruby-identifier">header</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-status-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">status=</span><span
            class="method-args">(status)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sets the HTTP status code.</p>
          
          

          
          <div class="method-source-code" id="status-3D-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 183</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">status=</span>(<span class="ruby-identifier">status</span>)
  <span class="ruby-ivar">@status</span> = <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">status_code</span>(<span class="ruby-identifier">status</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-status_message" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">status_message</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Response.html#method-i-message">message</a>
        </div>
        
      </div>

    
      <div id="method-i-to_a" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_a</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Turns the <a href="Response.html">Response</a> into a Rack-compatible array
of the status, headers, and body. Allows explict splatting:</p>

<pre>status, headers, body = *response</pre>
          
          

          
          <div class="method-source-code" id="to_a-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">rack_response</span> <span class="ruby-ivar">@status</span>, <span class="ruby-ivar">@header</span>.<span class="ruby-identifier">to_hash</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Response.html#method-i-prepare-21">prepare!</a>
        </div>
        

        
      </div>

    
      <div id="method-i-to_ary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_ary</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Be super clear that a response object is not an Array. Defining this would
make implicit splatting work, but it also makes adding responses as arrays
work, and “flattening” responses, cascading to the rack body! Not sensible
behavior.</p>
          
          

          
          <div class="method-source-code" id="to_ary-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 291</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">to_ary</span>
      <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;        `ActionDispatch::Response#to_ary` no longer performs implicit conversion
        to an array. Please use `response.to_a` instead, or a splat like `status,
        headers, body = *response`.
&quot;</span>.<span class="ruby-identifier">squish</span>)

      <span class="ruby-identifier">to_a</span>
    <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-append_charset-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append_charset?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="append_charset-3F-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 352</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append_charset?</span>
  <span class="ruby-operator">!</span><span class="ruby-ivar">@sending_file</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@charset</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-assign_default_content_type_and_charset-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">assign_default_content_type_and_charset!</span><span
            class="method-args">(headers)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="assign_default_content_type_and_charset-21-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 340</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">assign_default_content_type_and_charset!</span>(<span class="ruby-identifier">headers</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">headers</span>[<span class="ruby-constant">CONTENT_TYPE</span>].<span class="ruby-identifier">present?</span>

  <span class="ruby-ivar">@content_type</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>
  <span class="ruby-ivar">@charset</span>      <span class="ruby-operator">||=</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_charset</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@charset</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">type</span> = <span class="ruby-ivar">@content_type</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">type</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;; charset=#{@charset}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">append_charset?</span>

  <span class="ruby-identifier">headers</span>[<span class="ruby-constant">CONTENT_TYPE</span>] = <span class="ruby-identifier">type</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-before_committed" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">before_committed</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="before_committed-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">before_committed</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-before_sending" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">before_sending</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="before_sending-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 323</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">before_sending</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-build_buffer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">build_buffer</span><span
            class="method-args">(response, body)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="build_buffer-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build_buffer</span>(<span class="ruby-identifier">response</span>, <span class="ruby-identifier">body</span>)
  <span class="ruby-constant">Buffer</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">response</span>, <span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-merge_default_headers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">merge_default_headers</span><span
            class="method-args">(original, default)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="merge_default_headers-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 326</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge_default_headers</span>(<span class="ruby-identifier">original</span>, <span class="ruby-identifier">default</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">original</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:merge</span>)

  <span class="ruby-identifier">default</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">original</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-munge_body_object" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">munge_body_object</span><span
            class="method-args">(body)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="munge_body_object-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 336</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">munge_body_object</span>(<span class="ruby-identifier">body</span>)
  <span class="ruby-identifier">body</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:each</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">body</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">body</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rack_response" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rack_response</span><span
            class="method-args">(status, header)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="rack_response-source">
            <pre><span class="ruby-comment"># File lib/action_dispatch/http/response.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rack_response</span>(<span class="ruby-identifier">status</span>, <span class="ruby-identifier">header</span>)
  <span class="ruby-identifier">assign_default_content_type_and_charset!</span>(<span class="ruby-identifier">header</span>)
  <span class="ruby-identifier">handle_conditional_get!</span>

  <span class="ruby-identifier">header</span>[<span class="ruby-constant">SET_COOKIE</span>] = <span class="ruby-identifier">header</span>[<span class="ruby-constant">SET_COOKIE</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">header</span>[<span class="ruby-constant">SET_COOKIE</span>].<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:join</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-constant">NO_CONTENT_CODES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@status</span>)
    <span class="ruby-identifier">header</span>.<span class="ruby-identifier">delete</span> <span class="ruby-constant">CONTENT_TYPE</span>
    [<span class="ruby-identifier">status</span>, <span class="ruby-identifier">header</span>, []]
  <span class="ruby-keyword">else</span>
    [<span class="ruby-identifier">status</span>, <span class="ruby-identifier">header</span>, <span class="ruby-constant">RackBody</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

