<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Builder::XmlBase - Builder -- Easy XML Building</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../BlankSlate.html">BlankSlate</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3C-3C">#&lt;&lt;</a>
    
    <li ><a href="#method-i-_escape">#_escape</a>
    
    <li ><a href="#method-i-_escape_attribute">#_escape_attribute</a>
    
    <li ><a href="#method-i-_indent">#_indent</a>
    
    <li ><a href="#method-i-_nested_structures">#_nested_structures</a>
    
    <li ><a href="#method-i-_newline">#_newline</a>
    
    <li ><a href="#method-i-cache_method_call">#cache_method_call</a>
    
    <li ><a href="#method-i-explicit_nil_handling-3F">#explicit_nil_handling?</a>
    
    <li ><a href="#method-i-method_missing">#method_missing</a>
    
    <li ><a href="#method-i-nil-3F">#nil?</a>
    
    <li ><a href="#method-i-tag-21">#tag!</a>
    
    <li ><a href="#method-i-text-21">#text!</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Builder::XmlBase">
  <h1 id="class-Builder::XmlBase" class="class">
    class Builder::XmlBase
  </h1>

  <section class="description">
    
<p><a href="XmlBase.html">XmlBase</a> is a base class for building XML
builders.  See <a href="XmlMarkup.html">Builder::XmlMarkup</a> and <a
href="XmlEvents.html">Builder::XmlEvents</a> for examples.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-c-cache_method_calls" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">cache_method_calls</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(indent=0, initial=0, encoding='utf-8')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create an XML markup builder.</p>
<dl class="rdoc-list note-list"><dt>out      
<dd>
<p><a href="../Object.html">Object</a> receiving the markup.  <code>out</code>
must respond to <code>&lt;&lt;</code>.</p>
</dd><dt>indent   
<dd>
<p>Number of spaces used for indentation (0 implies no indentation and no line
breaks).</p>
</dd><dt>initial  
<dd>
<p>Level of initial indentation.</p>
</dd><dt>encoding 
<dd>
<p>When <code>encoding</code> and $KCODE are set to &#39;utf-8&#39; characters
aren&#39;t converted to character entities in the output stream.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 28</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">indent</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">initial</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">encoding</span>=<span class="ruby-string">&#39;utf-8&#39;</span>)
  <span class="ruby-ivar">@indent</span> = <span class="ruby-identifier">indent</span>
  <span class="ruby-ivar">@level</span>  = <span class="ruby-identifier">initial</span>
  <span class="ruby-ivar">@encoding</span> = <span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">downcase</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C-3C" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Append text to the output target without escaping any markup. May be used
within the markup brackets as:</p>

<pre class="ruby"><span class="ruby-identifier">builder</span>.<span class="ruby-identifier">p</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;&lt;br/&gt;HI&quot;</span> }   <span class="ruby-comment">#=&gt;  &lt;p&gt;&lt;br/&gt;HI&lt;/p&gt;</span>
</pre>

<p>This is useful when using non-builder enabled software that generates
strings.  Just insert the string directly into the builder without changing
the inserted markup.</p>

<p>It is also useful for stacking builder objects.  Builders only use
<code>&lt;&lt;</code> to append to the target, so by supporting this
method/operation builders can use other builders as their targets.</p>
          
          

          
          <div class="method-source-code" id="3C-3C-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">_text</span>(<span class="ruby-identifier">text</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-explicit_nil_handling-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">explicit_nil_handling?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="explicit_nil_handling-3F-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">explicit_nil_handling?</span>
  <span class="ruby-ivar">@explicit_nil_handling</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-method_missing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">method_missing</span><span
            class="method-args">(sym, *args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create XML markup based on the name of the method.  This method is never
invoked directly, but is called for each markup method in the markup block
that isn&#39;t cached.</p>
          
          

          
          <div class="method-source-code" id="method_missing-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">cache_method_call</span>(<span class="ruby-identifier">sym</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">::</span><span class="ruby-constant">Builder</span><span class="ruby-operator">::</span><span class="ruby-constant">XmlBase</span>.<span class="ruby-identifier">cache_method_calls</span>
  <span class="ruby-identifier">tag!</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-nil-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">nil?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>For some reason, nil? is sent to the <a href="XmlMarkup.html">XmlMarkup</a>
object.  If nil? is not defined and <a
href="XmlBase.html#method-i-method_missing">#method_missing</a> is invoked,
some strange kind of recursion happens.  Since nil? won&#39;t ever be an
XML tag, it is pretty safe to define it here. (Note: this is an example of
cargo cult programming, cf. <a
href="http://fishbowl.pastiche.org/2004/10/13/cargo_cult_programming">fishbowl.pastiche.org/2004/10/13/cargo_cult_programming</a>).</p>
          
          

          
          <div class="method-source-code" id="nil-3F-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-tag-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tag!</span><span
            class="method-args">(sym, *args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a tag named <code>sym</code>.  Other than the first argument which
is the tag name, the arguments are the same as the tags implemented via
<code>method_missing</code>.</p>
          
          

          
          <div class="method-source-code" id="tag-21-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tag!</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">text</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">attrs</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">sym</span> = <span class="ruby-node">&quot;#{sym}:#{args.shift}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Symbol</span>)
  <span class="ruby-identifier">sym</span> = <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_sym</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-operator">::</span><span class="ruby-constant">Symbol</span>
  <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">arg</span>
    <span class="ruby-keyword">when</span> <span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>
      <span class="ruby-identifier">attrs</span> <span class="ruby-operator">||=</span> {}
      <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">arg</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">attrs</span> <span class="ruby-operator">||=</span> {}
      <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">merge!</span>({<span class="ruby-value">:nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>}) <span class="ruby-keyword">if</span> <span class="ruby-identifier">explicit_nil_handling?</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">text</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&#39;&#39;</span>
      <span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-operator">::</span><span class="ruby-constant">Kernel</span><span class="ruby-operator">::</span><span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>,
        <span class="ruby-string">&quot;XmlMarkup cannot mix a text argument with a block&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">_indent</span>
    <span class="ruby-identifier">_start_tag</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-identifier">attrs</span>)
    <span class="ruby-identifier">_newline</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">_nested_structures</span>(<span class="ruby-identifier">block</span>)
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-identifier">_indent</span>
      <span class="ruby-identifier">_end_tag</span>(<span class="ruby-identifier">sym</span>)
      <span class="ruby-identifier">_newline</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">_indent</span>
    <span class="ruby-identifier">_start_tag</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-identifier">attrs</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-identifier">_newline</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">_indent</span>
    <span class="ruby-identifier">_start_tag</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-identifier">attrs</span>)
    <span class="ruby-identifier">text!</span> <span class="ruby-identifier">text</span>
    <span class="ruby-identifier">_end_tag</span>(<span class="ruby-identifier">sym</span>)
    <span class="ruby-identifier">_newline</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@target</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-text-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">text!</span><span
            class="method-args">(text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Append text to the output target.  Escape any markup.  May be used within
the markup brackets as:</p>

<pre class="ruby"><span class="ruby-identifier">builder</span>.<span class="ruby-identifier">p</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">br</span>; <span class="ruby-identifier">b</span>.<span class="ruby-identifier">text!</span> <span class="ruby-string">&quot;HI&quot;</span> }   <span class="ruby-comment">#=&gt;  &lt;p&gt;&lt;br/&gt;HI&lt;/p&gt;</span>
</pre>
          
          

          
          <div class="method-source-code" id="text-21-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">text!</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">_text</span>(<span class="ruby-identifier">_escape</span>(<span class="ruby-identifier">text</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-_escape" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_escape</span><span
            class="method-args">(text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_escape-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 135</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_escape</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-constant">XChar</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">encoding</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-identifier">find</span>(<span class="ruby-ivar">@encoding</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Exception</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">dummy?</span>
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">encoding</span>)
  <span class="ruby-keyword">rescue</span>
    <span class="ruby-comment"># if the encoding can&#39;t be supported, use numeric character references</span>
    <span class="ruby-identifier">result</span>.
      <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[^\u0000-\u007F]/</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;&amp;##{c.ord};&quot;</span>}.
      <span class="ruby-identifier">force_encoding</span>(<span class="ruby-string">&#39;ascii&#39;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_escape_attribute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_escape_attribute</span><span
            class="method-args">(text)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_escape_attribute-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 158</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_escape_attribute</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">_escape</span>(<span class="ruby-identifier">text</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\n&quot;</span>, <span class="ruby-node">&quot;&amp;#10;&quot;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\r&quot;</span>, <span class="ruby-node">&quot;&amp;#13;&quot;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">%r{&quot;}</span>, <span class="ruby-string">&#39;&amp;quot;&#39;</span>) <span class="ruby-comment"># &quot; WART</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_indent" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_indent</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_indent-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 168</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_indent</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@indent</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@level</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">text!</span>(<span class="ruby-string">&quot; &quot;</span> <span class="ruby-operator">*</span> (<span class="ruby-ivar">@level</span> <span class="ruby-operator">*</span> <span class="ruby-ivar">@indent</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_nested_structures" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_nested_structures</span><span
            class="method-args">(block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_nested_structures-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_nested_structures</span>(<span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@level</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">ensure</span>
  <span class="ruby-ivar">@level</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_newline" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_newline</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_newline-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">_newline</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@indent</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">text!</span> <span class="ruby-string">&quot;\n&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-cache_method_call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cache_method_call</span><span
            class="method-args">(sym)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If <a
href="XmlBase.html#attribute-c-cache_method_calls">::cache_method_calls</a>
= true, we dynamicly create the method missed as an instance method on the
XMLBase object. Because XML documents are usually very repetative in
nature, the next node will be handled by the new method instead of
method_missing. As <a
href="XmlBase.html#method-i-method_missing">#method_missing</a> is very
slow, this speeds up document generation significantly.</p>
          
          

          
          <div class="method-source-code" id="cache_method_call-source">
            <pre><span class="ruby-comment"># File lib/builder/xmlbase.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cache_method_call</span>(<span class="ruby-identifier">sym</span>)
  <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>; <span class="ruby-keyword">self</span>; <span class="ruby-keyword">end</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">sym</span>)
      <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">sym</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">tag!</span>(<span class="ruby-identifier">sym</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

