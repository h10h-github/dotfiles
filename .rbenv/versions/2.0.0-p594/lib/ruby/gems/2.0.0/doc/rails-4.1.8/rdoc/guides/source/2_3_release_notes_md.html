<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>2_3_release_notes - rails-4.1.8 Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Ruby+on+Rails+2.3+Release+Notes">Ruby on Rails 2.3 Release Notes</a>
    <li><a href="#label-Application+Architecture">Application Architecture</a>
    <li><a href="#label-Rack+Integration">Rack Integration</a>
    <li><a href="#label-Renewed+Support+for+Rails+Engines">Renewed Support for Rails Engines</a>
    <li><a href="#label-Documentation">Documentation</a>
    <li><a href="#label-Ruby+1.9.1+Support">Ruby 1.9.1 Support</a>
    <li><a href="#label-Active+Record">Active Record</a>
    <li><a href="#label-Nested+Attributes">Nested Attributes</a>
    <li><a href="#label-Nested+Transactions">Nested Transactions</a>
    <li><a href="#label-Dynamic+Scopes">Dynamic Scopes</a>
    <li><a href="#label-Default+Scopes">Default Scopes</a>
    <li><a href="#label-Batch+Processing">Batch Processing</a>
    <li><a href="#label-Multiple+Conditions+for+Callbacks">Multiple Conditions for Callbacks</a>
    <li><a href="#label-Find+with+having">Find with having</a>
    <li><a href="#label-Reconnecting+MySQL+Connections">Reconnecting MySQL Connections</a>
    <li><a href="#label-Other+Active+Record+Changes">Other Active Record Changes</a>
    <li><a href="#label-Action+Controller">Action Controller</a>
    <li><a href="#label-Unified+Rendering">Unified Rendering</a>
    <li><a href="#label-Application+Controller+Renamed">Application Controller Renamed</a>
    <li><a href="#label-HTTP+Digest+Authentication+Support">HTTP Digest Authentication Support</a>
    <li><a href="#label-More+Efficient+Routing">More Efficient Routing</a>
    <li><a href="#label-Rack-based+Lazy-loaded+Sessions">Rack-based Lazy-loaded Sessions</a>
    <li><a href="#label-MIME+Type+Handling+Changes">MIME Type Handling Changes</a>
    <li><a href="#label-Optimization+of+respond_to">Optimization of <code>respond_to</code></a>
    <li><a href="#label-Improved+Caching+Performance">Improved Caching Performance</a>
    <li><a href="#label-Localized+Views">Localized Views</a>
    <li><a href="#label-Partial+Scoping+for+Translations">Partial Scoping for Translations</a>
    <li><a href="#label-Other+Action+Controller+Changes">Other Action Controller Changes</a>
    <li><a href="#label-Action+View">Action View</a>
    <li><a href="#label-Nested+Object+Forms">Nested Object Forms</a>
    <li><a href="#label-Smart+Rendering+of+Partials">Smart Rendering of Partials</a>
    <li><a href="#label-Prompts+for+Date+Select+Helpers">Prompts for Date Select Helpers</a>
    <li><a href="#label-AssetTag+Timestamp+Caching">AssetTag Timestamp Caching</a>
    <li><a href="#label-Asset+Hosts+as+Objects">Asset Hosts as Objects</a>
    <li><a href="#label-grouped_options_for_select+Helper+Method">grouped_options_for_select Helper Method</a>
    <li><a href="#label-Disabled+Option+Tags+for+Form+Select+Helpers">Disabled Option Tags for Form Select Helpers</a>
    <li><a href="#label-A+Note+About+Template+Loading">A Note About Template Loading</a>
    <li><a href="#label-Other+Action+View+Changes">Other Action View Changes</a>
    <li><a href="#label-Active+Support">Active Support</a>
    <li><a href="#label-Object%23try">Object#try</a>
    <li><a href="#label-Object%23tap+Backport">Object#tap Backport</a>
    <li><a href="#label-Swappable+Parsers+for+XMLmini">Swappable Parsers for XMLmini</a>
    <li><a href="#label-Fractional+seconds+for+TimeWithZone">Fractional seconds for TimeWithZone</a>
    <li><a href="#label-JSON+Key+Quoting">JSON Key Quoting</a>
    <li><a href="#label-Other+Active+Support+Changes">Other Active Support Changes</a>
    <li><a href="#label-Railties">Railties</a>
    <li><a href="#label-Rails+Metal">Rails Metal</a>
    <li><a href="#label-Application+Templates">Application Templates</a>
    <li><a href="#label-Quieter+Backtraces">Quieter Backtraces</a>
    <li><a href="#label-Faster+Boot+Time+in+Development+Mode+with+Lazy+Loading%2FAutoload">Faster Boot Time in Development Mode with Lazy Loading/Autoload</a>
    <li><a href="#label-rake+gem+Task+Rewrite">rake gem Task Rewrite</a>
    <li><a href="#label-Other+Railties+Changes">Other Railties Changes</a>
    <li><a href="#label-Deprecated">Deprecated</a>
    <li><a href="#label-Credits">Credits</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile.html">Gemfile</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../guides/code/getting_started/README_rdoc.html">README</a>
  
    <li><a href="../../guides/code/getting_started/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/comments_js_coffee.html">comments.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/posts_js_coffee.html">posts.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/welcome_js_coffee.html">welcome.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/comments_css_scss.html">comments.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/posts_css_scss.html">posts.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/welcome_css_scss.html">welcome.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/config_ru.html">config.ru</a>
  
    <li><a href="../../guides/code/getting_started/public/404_html.html">404.html</a>
  
    <li><a href="../../guides/code/getting_started/public/422_html.html">422.html</a>
  
    <li><a href="../../guides/code/getting_started/public/500_html.html">500.html</a>
  
    <li><a href="../../guides/code/getting_started/public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../guides/code/getting_started/public/robots_txt.html">robots</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/migrations_md.html">migrations</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/2_3_release_notes.md">

<h1 id="label-Ruby+on+Rails+2.3+Release+Notes">Ruby on Rails 2.3 Release Notes<span><a href="#label-Ruby+on+Rails+2.3+Release+Notes">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>Rails 2.3 delivers a variety of new and improved features, including
pervasive Rack integration, refreshed support for Rails Engines, nested
transactions for Active Record, dynamic and default scopes, unified
rendering, more efficient routing, application templates, and quiet
backtraces. This list covers the major upgrades, but doesn&#39;t include
every little bug fix and change. If you want to see everything, check out
the <a href="http://github.com/rails/rails/commits/master">list of
commits</a> in the main Rails repository on GitHub or review the
<code>CHANGELOG</code> files for the individual Rails components.</p>
<hr>

<h2 id="label-Application+Architecture">Application Architecture<span><a href="#label-Application+Architecture">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>There are two major changes in the architecture of Rails applications:
complete integration of the <a href="http://rack.rubyforge.org/">Rack</a>
modular web server interface, and renewed support for Rails Engines.</p>

<h3 id="label-Rack+Integration">Rack Integration<span><a href="#label-Rack+Integration">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails has now broken with its CGI past, and uses Rack everywhere. This
required and resulted in a tremendous number of internal changes (but if
you use CGI, don&#39;t worry; Rails now supports CGI through a proxy
interface.) Still, this is a major change to Rails internals. After
upgrading to 2.3, you should test on your local environment and your
production environment. Some things to test:</p>
<ul><li>
<p>Sessions</p>
</li><li>
<p>Cookies</p>
</li><li>
<p>File uploads</p>
</li><li>
<p>JSON/XML APIs</p>
</li></ul>

<p>Here&#39;s a summary of the rack-related changes:</p>
<ul><li>
<p><code>script/server</code> has been switched to use Rack, which means it
supports any Rack compatible server. <code>script/server</code> will also
pick up a rackup configuration file if one exists. By default, it will look
for a <code>config.ru</code> file, but you can override this with the
<code>-c</code> switch.</p>
</li><li>
<p>The FCGI handler goes through Rack.</p>
</li><li>
<p><code>ActionController::Dispatcher</code> maintains its own default
middleware stack. Middlewares can be injected in, reordered, and removed.
The stack is compiled into a chain on boot. You can configure the
middleware stack in <code>environment.rb</code>.</p>
</li><li>
<p>The <code>rake middleware</code> task has been added to inspect the
middleware stack. This is useful for debugging the order of the middleware
stack.</p>
</li><li>
<p>The integration test runner has been modified to execute the entire
middleware and application stack. This makes integration tests perfect for
testing Rack middleware.</p>
</li><li>
<p><code>ActionController::CGIHandler</code> is a backwards compatible CGI
wrapper around Rack. The <code>CGIHandler</code> is meant to take an old
CGI object and convert its environment information into a Rack compatible
form.</p>
</li><li>
<p><code>CgiRequest</code> and <code>CgiResponse</code> have been removed.</p>
</li><li>
<p>Session stores are now lazy loaded. If you never access the session object
during a request, it will never attempt to load the session data (parse the
cookie, load the data from memcache, or lookup an Active Record object).</p>
</li><li>
<p>You no longer need to use <code>CGI::Cookie.new</code> in your tests for
setting a cookie value. Assigning a <code>String</code> value to <a
href=""foo"">request.cookies</a> now sets the cookie as expected.</p>
</li><li>
<p><code>CGI::Session::CookieStore</code> has been replaced by
<code>ActionController::Session::CookieStore</code>.</p>
</li><li>
<p><code>CGI::Session::MemCacheStore</code> has been replaced by
<code>ActionController::Session::MemCacheStore</code>.</p>
</li><li>
<p><code>CGI::Session::ActiveRecordStore</code> has been replaced by
<code>ActiveRecord::SessionStore</code>.</p>
</li><li>
<p>You can still change your session store with
<code>ActionController::Base.session_store = :active_record_store</code>.</p>
</li><li>
<p>Default sessions options are still set with
<code>ActionController::Base.session = { :key =&gt; &quot;...&quot;
}</code>. However, the <code>:session_domain</code> option has been renamed
to <code>:domain</code>.</p>
</li><li>
<p>The mutex that normally wraps your entire request has been moved into
middleware, <code>ActionController::Lock</code>.</p>
</li><li>
<p><code>ActionController::AbstractRequest</code> and
<code>ActionController::Request</code> have been unified. The new
<code>ActionController::Request</code> inherits from
<code>Rack::Request</code>. This affects access to
<code>response.headers['type']</code> in test requests. Use
<code>response.content_type</code> instead.</p>
</li><li>
<p><code>ActiveRecord::QueryCache</code> middleware is automatically inserted
onto the middleware stack if <code>ActiveRecord</code> has been loaded.
This middleware sets up and flushes the per-request Active Record query
cache.</p>
</li><li>
<p>The Rails router and controller classes follow the Rack spec. You can call
a controller directly with <code>SomeController.call(env)</code>. The
router stores the routing parameters in <code>rack.routing_args</code>.</p>
</li><li>
<p><code>ActionController::Request</code> inherits from
<code>Rack::Request</code>.</p>
</li><li>
<p>Instead of <code>config.action_controller.session = { :session_key =&gt;
&#39;foo&#39;, ...</code> use <code>config.action_controller.session = {
:key =&gt; &#39;foo&#39;, ...</code>.</p>
</li><li>
<p>Using the <code>ParamsParser</code> middleware preprocesses any XML, JSON,
or YAML requests so they can be read normally with any
<code>Rack::Request</code> object after it.</p>
</li></ul>

<h3 id="label-Renewed+Support+for+Rails+Engines">Renewed Support for Rails Engines<span><a href="#label-Renewed+Support+for+Rails+Engines">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>After some versions without an upgrade, Rails 2.3 offers some new features
for Rails Engines (Rails applications that can be embedded within other
applications). First, routing files in engines are automatically loaded and
reloaded now, just like your <code>routes.rb</code> file (this also applies
to routing files in other plugins). Second, if your plugin has an app
folder, then <a href="models|controllers|helpers">app/</a> will
automatically be added to the Rails load path. Engines also support adding
view paths now, and Action Mailer as well as Action View will use views
from engines and other plugins.</p>

<h2 id="label-Documentation">Documentation<span><a href="#label-Documentation">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>The <a href="http://guides.rubyonrails.org/">Ruby on Rails guides</a>
project has published several additional guides for Rails 2.3. In addition,
a <a href="http://edgeguides.rubyonrails.org/">separate site</a> maintains
updated copies of the Guides for Edge Rails. Other documentation efforts
include a relaunch of the <a href="http://newwiki.rubyonrails.org/">Rails
wiki</a> and early planning for a Rails Book.</p>
<ul><li>
<p>More Information: <a
href="http://weblog.rubyonrails.org/2009/1/15/rails-documentation-projects.">Rails
Documentation Projects</a></p>
</li></ul>

<h2 id="label-Ruby+1.9.1+Support">Ruby 1.9.1 Support<span><a href="#label-Ruby+1.9.1+Support">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Rails 2.3 should pass all of its own tests whether you are running on Ruby
1.8 or the now-released Ruby 1.9.1. You should be aware, though, that
moving to 1.9.1 entails checking all of the data adapters, plugins, and
other code that you depend on for Ruby 1.9.1 compatibility, as well as
Rails core.</p>

<h2 id="label-Active+Record">Active Record<span><a href="#label-Active+Record">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Active Record gets quite a number of new features and bug fixes in Rails
2.3. The highlights include nested attributes, nested transactions, dynamic
and default scopes, and batch processing.</p>

<h3 id="label-Nested+Attributes">Nested Attributes<span><a href="#label-Nested+Attributes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Active Record can now update the attributes on nested models directly,
provided you tell it to do so:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Book</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_one</span> :<span class="ruby-identifier">author</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pages</span>

  <span class="ruby-identifier">accepts_nested_attributes_for</span> :<span class="ruby-identifier">author</span>, :<span class="ruby-identifier">pages</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Turning on nested attributes enables a number of things: automatic (and
atomic) saving of a record together with its associated children,
child-aware validations, and support for nested forms (discussed later).</p>

<p>You can also specify requirements for any new records that are added via
nested attributes using the <code>:reject_if</code> option:</p>

<pre class="ruby"><span class="ruby-identifier">accepts_nested_attributes_for</span> :<span class="ruby-identifier">author</span>,
  :<span class="ruby-identifier">reject_if</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attributes</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attributes</span>[<span class="ruby-string">&#39;name&#39;</span>].<span class="ruby-identifier">blank?</span> }
</pre>
<ul><li>
<p>Lead Contributor: <a href="http://superalloy.nl/">Eloy Duran</a></p>
</li><li>
<p>More Information: <a
href="http://weblog.rubyonrails.org/2009/1/26/nested-model-forms">Nested
Model Forms</a></p>
</li></ul>

<h3 id="label-Nested+Transactions">Nested Transactions<span><a href="#label-Nested+Transactions">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Active Record now supports nested transactions, a much-requested feature.
Now you can write code like this:</p>

<pre class="ruby"><span class="ruby-constant">User</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword">do</span>
  <span class="ruby-constant">User</span>.<span class="ruby-identifier">create</span>(:<span class="ruby-identifier">username</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Admin&#39;</span>)
  <span class="ruby-constant">User</span>.<span class="ruby-identifier">transaction</span>(:<span class="ruby-identifier">requires_new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">User</span>.<span class="ruby-identifier">create</span>(:<span class="ruby-identifier">username</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Regular&#39;</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Rollback</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">User</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">all</span>)  <span class="ruby-comment"># =&gt; Returns only Admin</span>
</pre>

<p>Nested transactions let you roll back an inner transaction without
affecting the state of the outer transaction. If you want a transaction to
be nested, you must explicitly add the <code>:requires_new</code> option;
otherwise, a nested transaction simply becomes part of the parent
transaction (as it does currently on Rails 2.2). Under the covers, nested
transactions are <a
href="http://rails.lighthouseapp.com/projects/8994/tickets/383,">using
savepoints</a> so they&#39;re supported even on databases that don&#39;t
have true nested transactions. There is also a bit of magic going on to
make these transactions play well with transactional fixtures during
testing.</p>
<ul><li>
<p>Lead Contributors: <a
href="http://www.workingwithrails.com/person/4985-jonathan-viney">Jonathan
Viney</a> and <a href="http://izumi.plan99.net/blog/">Hongli Lai</a></p>
</li></ul>

<h3 id="label-Dynamic+Scopes">Dynamic Scopes<span><a href="#label-Dynamic+Scopes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You know about dynamic finders in Rails (which allow you to concoct methods
like <code>find_by_color_and_flavor</code> on the fly) and named scopes
(which allow you to encapsulate reusable query conditions into friendly
names like <code>currently_active</code>). Well, now you can have dynamic
scope methods. The idea is to put together syntax that allows filtering on
the fly <em>and</em> method chaining. For example:</p>

<pre class="ruby"><span class="ruby-constant">Order</span>.<span class="ruby-identifier">scoped_by_customer_id</span>(<span class="ruby-value">12</span>)
<span class="ruby-constant">Order</span>.<span class="ruby-identifier">scoped_by_customer_id</span>(<span class="ruby-value">12</span>).<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">all</span>,
  :<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;status = &#39;open&#39;&quot;</span>)
<span class="ruby-constant">Order</span>.<span class="ruby-identifier">scoped_by_customer_id</span>(<span class="ruby-value">12</span>).<span class="ruby-identifier">scoped_by_status</span>(<span class="ruby-string">&quot;open&quot;</span>)
</pre>

<p>There&#39;s nothing to define to use dynamic scopes: they just work.</p>
<ul><li>
<p>Lead Contributor: <a href="http://evilmartians.com/">Yaroslav Markin</a></p>
</li><li>
<p>More Information: <a
href="http://ryandaigle.com/articles/2008/12/29/what-s-new-in-edge-rails-dynamic-scope-methods.">What’s
New in Edge Rails: Dynamic Scope Methods</a></p>
</li></ul>

<h3 id="label-Default+Scopes">Default Scopes<span><a href="#label-Default+Scopes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails 2.3 will introduce the notion of <em>default scopes</em> similar to
named scopes, but applying to all named scopes or find methods within the
model. For example, you can write <code>default_scope :order =&gt;
&#39;name ASC&#39;</code> and any time you retrieve records from that model
they&#39;ll come out sorted by name (unless you override the option, of
course).</p>
<ul><li>
<p>Lead Contributor: Paweł Kondzior</p>
</li><li>
<p>More Information: <a
href="http://ryandaigle.com/articles/2008/11/18/what-s-new-in-edge-rails-default-scoping">What’s
New in Edge Rails: Default Scoping</a></p>
</li></ul>

<h3 id="label-Batch+Processing">Batch Processing<span><a href="#label-Batch+Processing">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You can now process large numbers of records from an Active Record model
with less pressure on memory by using <code>find_in_batches</code>:</p>

<pre class="ruby"><span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_in_batches</span>(:<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">active</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>}) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">customer_group</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">customer_group</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">customer</span><span class="ruby-operator">|</span> <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">update_account_balance!</span> }
<span class="ruby-keyword">end</span>
</pre>

<p>You can pass most of the <code>find</code> options into
<code>find_in_batches</code>. However, you cannot specify the order that
records will be returned in (they will always be returned in ascending
order of primary key, which must be an integer), or use the
<code>:limit</code> option. Instead, use the <code>:batch_size</code>
option, which defaults to 1000, to set the number of records that will be
returned in each batch.</p>

<p>The new <code>find_each</code> method provides a wrapper around
<code>find_in_batches</code> that returns individual records, with the find
itself being done in batches (of 1000 by default):</p>

<pre class="ruby"><span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">customer</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">update_account_balance!</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Note that you should only use this method for batch processing: for small
numbers of records (less than 1000), you should just use the regular find
methods with your own loop.</p>
<ul><li>
<p>More Information (at that point the convenience method was called just
<code>each</code>):</p>
<ul><li>
<p><a href="http://afreshcup.com/2009/02/23/rails-23-batch-finding/">Rails
2.3: Batch Finding</a></p>
</li><li>
<p><a
href="http://ryandaigle.com/articles/2009/2/23/what-s-new-in-edge-rails-batched-find">What’s
New in Edge Rails: Batched Find</a></p>
</li></ul>
</li></ul>

<h3 id="label-Multiple+Conditions+for+Callbacks">Multiple Conditions for Callbacks<span><a href="#label-Multiple+Conditions+for+Callbacks">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>When using Active Record callbacks, you can now combine <code>:if</code>
and <code>:unless</code> options on the same callback, and supply multiple
conditions as an array:</p>

<pre class="ruby"><span class="ruby-identifier">before_save</span> :<span class="ruby-identifier">update_credit_rating</span>, :<span class="ruby-keyword">if</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">active</span>,
  :<span class="ruby-keyword">unless</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">admin</span>, :<span class="ruby-identifier">cash_only</span>]
</pre>
<ul><li>
<p>Lead Contributor: L. Caviola</p>
</li></ul>

<h3 id="label-Find+with+having">Find with having<span><a href="#label-Find+with+having">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails now has a <code>:having</code> option on find (as well as on
<code>has_many</code> and <code>has_and_belongs_to_many</code>
associations) for filtering records in grouped finds. As those with heavy
SQL backgrounds know, this allows filtering based on grouped results:</p>

<pre class="ruby"><span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(:<span class="ruby-identifier">all</span>, :<span class="ruby-identifier">group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;salary&quot;</span>,
  :<span class="ruby-identifier">having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;sum(salary) &gt; 10000&quot;</span>, :<span class="ruby-identifier">select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;salary&quot;</span>)
</pre>
<ul><li>
<p>Lead Contributor: <a href="http://github.com/miloops">Emilio Tagua</a></p>
</li></ul>

<h3 id="label-Reconnecting+MySQL+Connections">Reconnecting MySQL Connections<span><a href="#label-Reconnecting+MySQL+Connections">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>MySQL supports a reconnect flag in its connections - if set to true, then
the client will try reconnecting to the server before giving up in case of
a lost connection. You can now set <code>reconnect = true</code> for your
MySQL connections in <code>database.yml</code> to get this behavior from a
Rails application. The default is <code>false</code>, so the behavior of
existing applications doesn&#39;t change.</p>
<ul><li>
<p>Lead Contributor: <a href="http://twitter.com/dubek">Dov Murik</a></p>
</li><li>
<p>More information:</p>
<ul><li>
<p><a
href="http://dev.mysql.com/doc/refman/5.0/en/auto-reconnect.html">Controlling
Automatic Reconnection Behavior</a></p>
</li><li>
<p><a
href="http://groups.google.com/group/rubyonrails-core/browse_thread/thread/49d2a7e9c96cb9f4">MySQL
auto-reconnect revisited</a></p>
</li></ul>
</li></ul>

<h3 id="label-Other+Active+Record+Changes">Other Active Record Changes<span><a href="#label-Other+Active+Record+Changes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
<ul><li>
<p>An extra <code>AS</code> was removed from the generated SQL for
<code>has_and_belongs_to_many</code> preloading, making it work better for
some databases.</p>
</li><li>
<p><code>ActiveRecord::Base#new_record?</code> now returns <code>false</code>
rather than <code>nil</code> when confronted with an existing record.</p>
</li><li>
<p>A bug in quoting table names in some <code>has_many :through</code>
associations was fixed.</p>
</li><li>
<p>You can now specify a particular timestamp for <code>updated_at</code>
timestamps: <code>cust = Customer.create(:name =&gt; &quot;ABC
Industries&quot;, :updated_at =&gt; 1.day.ago)</code></p>
</li><li>
<p>Better error messages on failed <code>find_by_attribute!</code> calls.</p>
</li><li>
<p>Active Record&#39;s <code>to_xml</code> support gets just a little bit more
flexible with the addition of a <code>:camelize</code> option.</p>
</li><li>
<p>A bug in canceling callbacks from <code>before_update</code> or
<code>before_create</code> was fixed.</p>
</li><li>
<p>Rake tasks for testing databases via JDBC have been added.</p>
</li><li>
<p><code>validates_length_of</code> will use a custom error message with the
<code>:in</code> or <code>:within</code> options (if one is supplied).</p>
</li><li>
<p>Counts on scoped selects now work properly, so you can do things like
<code>Account.scoped(:select =&gt; &quot;DISTINCT
credit_limit&quot;).count</code>.</p>
</li><li>
<p><code>ActiveRecord::Base#invalid?</code> now works as the opposite of
<code>ActiveRecord::Base#valid?</code>.</p>
</li></ul>

<h2 id="label-Action+Controller">Action Controller<span><a href="#label-Action+Controller">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Action Controller rolls out some significant changes to rendering, as well
as improvements in routing and other areas, in this release.</p>

<h3 id="label-Unified+Rendering">Unified Rendering<span><a href="#label-Unified+Rendering">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><code>ActionController::Base#render</code> is a lot smarter about deciding
what to render. Now you can just tell it what to render and expect to get
the right results. In older versions of Rails, you often need to supply
explicit information to render:</p>

<pre class="ruby"><span class="ruby-identifier">render</span> :<span class="ruby-identifier">file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/tmp/random_file.erb&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;other_controller/action&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;show&#39;</span>
</pre>

<p>Now in Rails 2.3, you can just supply what you want to render:</p>

<pre class="ruby"><span class="ruby-identifier">render</span> <span class="ruby-string">&#39;/tmp/random_file.erb&#39;</span>
<span class="ruby-identifier">render</span> <span class="ruby-string">&#39;other_controller/action&#39;</span>
<span class="ruby-identifier">render</span> <span class="ruby-string">&#39;show&#39;</span>
<span class="ruby-identifier">render</span> :<span class="ruby-identifier">show</span>
</pre>

<p>Rails chooses between file, template, and action depending on whether there
is a leading slash, an embedded slash, or no slash at all in what&#39;s to
be rendered. Note that you can also use a symbol instead of a string when
rendering an action. Other rendering styles (<code>:inline</code>,
<code>:text</code>, <code>:update</code>, <code>:nothing</code>,
<code>:json</code>, <code>:xml</code>, <code>:js</code>) still require an
explicit option.</p>

<h3 id="label-Application+Controller+Renamed">Application Controller Renamed<span><a href="#label-Application+Controller+Renamed">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>If you&#39;re one of the people who has always been bothered by the
special-case naming of <code>application.rb</code>, rejoice! It&#39;s been
reworked to be application_controller.rb in Rails 2.3. In addition,
there&#39;s a new rake task, <code>rake
rails:update:application_controller</code> to do this automatically for you
- and it will be run as part of the normal <code>rake rails:update</code>
process.</p>
<ul><li>
<p>More Information:</p>
<ul><li>
<p><a
href="http://afreshcup.com/2008/11/17/rails-2x-the-death-of-applicationrb/">The
Death of Application.rb</a></p>
</li><li>
<p><a
href="http://ryandaigle.com/articles/2008/11/19/what-s-new-in-edge-rails-application-rb-duality-is-no-more">What’s
New in Edge Rails: Application.rb Duality is no More</a></p>
</li></ul>
</li></ul>

<h3 id="label-HTTP+Digest+Authentication+Support">HTTP Digest Authentication Support<span><a href="#label-HTTP+Digest+Authentication+Support">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails now has built-in support for HTTP digest authentication. To use it,
you call <code>authenticate_or_request_with_http_digest</code> with a block
that returns the user&#39;s password (which is then hashed and compared
against the transmitted credentials):</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">PostsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
  <span class="ruby-constant">Users</span> = {<span class="ruby-string">&quot;dhh&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;secret&quot;</span>}
  <span class="ruby-identifier">before_filter</span> :<span class="ruby-identifier">authenticate</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">secret</span>
    <span class="ruby-identifier">render</span> :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Password Required!&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">private</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">authenticate</span>
    <span class="ruby-identifier">realm</span> = <span class="ruby-string">&quot;Application&quot;</span>
    <span class="ruby-identifier">authenticate_or_request_with_http_digest</span>(<span class="ruby-identifier">realm</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">Users</span>[<span class="ruby-identifier">name</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
<ul><li>
<p>Lead Contributor: <a href="http://www.kellogg-assoc.com/">Gregg Kellogg</a></p>
</li><li>
<p>More Information: <a
href="http://ryandaigle.com/articles/2009/1/30/what-s-new-in-edge-rails-http-digest-authentication">What’s
New in Edge Rails: HTTP Digest Authentication</a></p>
</li></ul>

<h3 id="label-More+Efficient+Routing">More Efficient Routing<span><a href="#label-More+Efficient+Routing">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>There are a couple of significant routing changes in Rails 2.3. The
<code>formatted_</code> route helpers are gone, in favor just passing in
<code>:format</code> as an option. This cuts down the route generation
process by 50% for any resource - and can save a substantial amount of
memory (up to 100MB on large applications). If your code uses the
<code>formatted_</code> helpers, it will still work for the time being -
but that behavior is deprecated and your application will be more efficient
if you rewrite those routes using the new standard. Another big change is
that Rails now supports multiple routing files, not just
<code>routes.rb</code>. You can use
<code>RouteSet#add_configuration_file</code> to bring in more routes at any
time - without clearing the currently-loaded routes. While this change is
most useful for Engines, you can use it in any application that needs to
load routes in batches.</p>
<ul><li>
<p>Lead Contributors: <a href="http://blog.hungrymachine.com/">Aaron
Batalion</a></p>
</li></ul>

<h3 id="label-Rack-based+Lazy-loaded+Sessions">Rack-based Lazy-loaded Sessions<span><a href="#label-Rack-based+Lazy-loaded+Sessions">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>A big change pushed the underpinnings of Action Controller session storage
down to the Rack level. This involved a good deal of work in the code,
though it should be completely transparent to your Rails applications (as a
bonus, some icky patches around the old CGI session handler got removed).
It&#39;s still significant, though, for one simple reason: non-Rails Rack
applications have access to the same session storage handlers (and
therefore the same session) as your Rails applications. In addition,
sessions are now lazy-loaded (in line with the loading improvements to the
rest of the framework). This means that you no longer need to explicitly
disable sessions if you don&#39;t want them; just don&#39;t refer to them
and they won&#39;t load.</p>

<h3 id="label-MIME+Type+Handling+Changes">MIME Type Handling Changes<span><a href="#label-MIME+Type+Handling+Changes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>There are a couple of changes to the code for handling MIME types in Rails.
First, <code>MIME::Type</code> now implements the <code>=~</code> operator,
making things much cleaner when you need to check for the presence of a
type that has synonyms:</p>

<pre class="ruby"><span class="ruby-keyword">if</span> <span class="ruby-identifier">content_type</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">JS</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">content_type</span>
  <span class="ruby-comment"># do something cool</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">JS</span> <span class="ruby-operator">=~</span> <span class="ruby-string">&quot;text/javascript&quot;</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">JS</span> <span class="ruby-operator">=~</span> <span class="ruby-string">&quot;application/javascript&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
</pre>

<p>The other change is that the framework now uses the <code>Mime::JS</code>
when checking for JavaScript in various spots, making it handle those
alternatives cleanly.</p>
<ul><li>
<p>Lead Contributor: <a
href="http://www.workingwithrails.com/person/5510-seth-fitzsimmons">Seth
Fitzsimmons</a></p>
</li></ul>

<h3 id="label-Optimization+of+respond_to">Optimization of <code>respond_to</code><span><a href="#label-Optimization+of+respond_to">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>In some of the first fruits of the Rails-Merb team merger, Rails 2.3
includes some optimizations for the <code>respond_to</code> method, which
is of course heavily used in many Rails applications to allow your
controller to format results differently based on the MIME type of the
incoming request. After eliminating a call to <code>method_missing</code>
and some profiling and tweaking, we&#39;re seeing an 8% improvement in the
number of requests per second served with a simple <code>respond_to</code>
that switches between three formats. The best part? No change at all
required to the code of your application to take advantage of this speedup.</p>

<h3 id="label-Improved+Caching+Performance">Improved Caching Performance<span><a href="#label-Improved+Caching+Performance">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails now keeps a per-request local cache of read from the remote cache
stores, cutting down on unnecessary reads and leading to better site
performance. While this work was originally limited to
<code>MemCacheStore</code>, it is available to any remote store than
implements the required methods.</p>
<ul><li>
<p>Lead Contributor: <a href="http://www.motionstandingstill.com/">Nahum
Wild</a></p>
</li></ul>

<h3 id="label-Localized+Views">Localized Views<span><a href="#label-Localized+Views">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails can now provide localized views, depending on the locale that you
have set. For example, suppose you have a <code>Posts</code> controller
with a <code>show</code> action. By default, this will render
<code>app/views/posts/show.html.erb</code>. But if you set
<code>I18n.locale = :da</code>, it will render
<code>app/views/posts/show.da.html.erb</code>. If the localized template
isn&#39;t present, the undecorated version will be used. Rails also
includes <code>I18n#available_locales</code> and
<code>I18n::SimpleBackend#available_locales</code>, which return an array
of the translations that are available in the current Rails project.</p>

<p>In addition, you can use the same scheme to localize the rescue files in
the <code>public</code> directory: <code>public/500.da.html</code> or
<code>public/404.en.html</code> work, for example.</p>

<h3 id="label-Partial+Scoping+for+Translations">Partial Scoping for Translations<span><a href="#label-Partial+Scoping+for+Translations">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>A change to the translation API makes things easier and less repetitive to
write key translations within partials. If you call
<code>translate(&quot;.foo&quot;)</code> from the
<code>people/index.html.erb</code> template, you&#39;ll actually be calling
<code>I18n.translate(&quot;people.index.foo&quot;)</code> If you don&#39;t
prepend the key with a period, then the API doesn&#39;t scope, just as
before.</p>

<h3 id="label-Other+Action+Controller+Changes">Other Action Controller Changes<span><a href="#label-Other+Action+Controller+Changes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
<ul><li>
<p>ETag handling has been cleaned up a bit: Rails will now skip sending an
ETag header when there&#39;s no body to the response or when sending files
with <code>send_file</code>.</p>
</li><li>
<p>The fact that Rails checks for IP spoofing can be a nuisance for sites that
do heavy traffic with cell phones, because their proxies don&#39;t
generally set things up right. If that&#39;s you, you can now set
<code>ActionController::Base.ip_spoofing_check = false</code> to disable
the check entirely.</p>
</li><li>
<p><code>ActionController::Dispatcher</code> now implements its own middleware
stack, which you can see by running <code>rake middleware</code>.</p>
</li><li>
<p>Cookie sessions now have persistent session identifiers, with API
compatibility with the server-side stores.</p>
</li><li>
<p>You can now use symbols for the <code>:type</code> option of
<code>send_file</code> and <code>send_data</code>, like this:
<code>send_file(&quot;fabulous.png&quot;, :type =&gt; :png)</code>.</p>
</li><li>
<p>The <code>:only</code> and <code>:except</code> options for
<code>map.resources</code> are no longer inherited by nested resources.</p>
</li><li>
<p>The bundled memcached client has been updated to version 1.6.4.99.</p>
</li><li>
<p>The <code>expires_in</code>, <code>stale?</code>, and
<code>fresh_when</code> methods now accept a <code>:public</code> option to
make them work well with proxy caching.</p>
</li><li>
<p>The <code>:requirements</code> option now works properly with additional
RESTful member routes.</p>
</li><li>
<p>Shallow routes now properly respect namespaces.</p>
</li><li>
<p><code>polymorphic_url</code> does a better job of handling objects with
irregular plural names.</p>
</li></ul>

<h2 id="label-Action+View">Action View<span><a href="#label-Action+View">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Action View in Rails 2.3 picks up nested model forms, improvements to
<code>render</code>, more flexible prompts for the date select helpers, and
a speedup in asset caching, among other things.</p>

<h3 id="label-Nested+Object+Forms">Nested <a href="../../Object.html">Object</a> Forms<span><a href="#label-Nested+Object+Forms">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Provided the parent model accepts nested attributes for the child objects
(as discussed in the Active Record section), you can create nested forms
using <code>form_for</code> and <code>field_for</code>. These forms can be
nested arbitrarily deep, allowing you to edit complex object hierarchies on
a single view without excessive code. For example, given this model:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Customer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">orders</span>

  <span class="ruby-identifier">accepts_nested_attributes_for</span> :<span class="ruby-identifier">orders</span>, :<span class="ruby-identifier">allow_destroy</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
</pre>

<p>You can write this view in Rails 2.3:</p>

<pre>&lt;% form_for @customer do |customer_form| %&gt;
  &lt;div&gt;
    &lt;%= customer_form.label :name, &#39;Customer Name:&#39; %&gt;
    &lt;%= customer_form.text_field :name %&gt;
  &lt;/div&gt;

  &lt;!-- Here we call fields_for on the customer_form builder instance.
   The block is called for each member of the orders collection. --&gt;
  &lt;% customer_form.fields_for :orders do |order_form| %&gt;
    &lt;p&gt;
      &lt;div&gt;
        &lt;%= order_form.label :number, &#39;Order Number:&#39; %&gt;
        &lt;%= order_form.text_field :number %&gt;
      &lt;/div&gt;

  &lt;!-- The allow_destroy option in the model enables deletion of
   child records. --&gt;
      &lt;% unless order_form.object.new_record? %&gt;
        &lt;div&gt;
          &lt;%= order_form.label :_delete, &#39;Remove:&#39; %&gt;
          &lt;%= order_form.check_box :_delete %&gt;
        &lt;/div&gt;
      &lt;% end %&gt;
    &lt;/p&gt;
  &lt;% end %&gt;

  &lt;%= customer_form.submit %&gt;
&lt;% end %&gt;</pre>
<ul><li>
<p>Lead Contributor: <a href="http://superalloy.nl/">Eloy Duran</a></p>
</li><li>
<p>More Information:</p>
<ul><li>
<p><a href="http://weblog.rubyonrails.org/2009/1/26/nested-model-forms">Nested
Model Forms</a></p>
</li><li>
<p><a
href="http://github.com/alloy/complex-form-examples">complex-form-examples</a></p>
</li><li>
<p><a
href="http://ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes">What’s
New in Edge Rails: Nested Object Forms</a></p>
</li></ul>
</li></ul>

<h3 id="label-Smart+Rendering+of+Partials">Smart Rendering of Partials<span><a href="#label-Smart+Rendering+of+Partials">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The render method has been getting smarter over the years, and it&#39;s
even smarter now. If you have an object or a collection and an appropriate
partial, and the naming matches up, you can now just render the object and
things will work. For example, in Rails 2.3, these render calls will work
in your view (assuming sensible naming):</p>

<pre class="ruby"><span class="ruby-comment"># Equivalent of render :partial =&gt; &#39;articles/_article&#39;,</span>
<span class="ruby-comment"># :object =&gt; @article</span>
<span class="ruby-identifier">render</span> <span class="ruby-ivar">@article</span>

<span class="ruby-comment"># Equivalent of render :partial =&gt; &#39;articles/_article&#39;,</span>
<span class="ruby-comment"># :collection =&gt; @articles</span>
<span class="ruby-identifier">render</span> <span class="ruby-ivar">@articles</span>
</pre>
<ul><li>
<p>More Information: <a
href="http://ryandaigle.com/articles/2008/11/20/what-s-new-in-edge-rails-render-stops-being-high-maintenance">What’s
New in Edge Rails: render Stops Being High-Maintenance</a></p>
</li></ul>

<h3 id="label-Prompts+for+Date+Select+Helpers">Prompts for Date Select Helpers<span><a href="#label-Prompts+for+Date+Select+Helpers">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>In Rails 2.3, you can supply custom prompts for the various date select
helpers (<code>date_select</code>, <code>time_select</code>, and
<code>datetime_select</code>), the same way you can with collection select
helpers. You can supply a prompt string or a hash of individual prompt
strings for the various components. You can also just set
<code>:prompt</code> to <code>true</code> to use the custom generic prompt:</p>

<pre class="ruby"><span class="ruby-identifier">select_datetime</span>(<span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">now</span>, :<span class="ruby-identifier">prompt</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)

<span class="ruby-identifier">select_datetime</span>(<span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">now</span>, :<span class="ruby-identifier">prompt</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Choose date and time&quot;</span>)

<span class="ruby-identifier">select_datetime</span>(<span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">now</span>, :<span class="ruby-identifier">prompt</span> =<span class="ruby-operator">&gt;</span>
  {:<span class="ruby-identifier">day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Choose day&#39;</span>, :<span class="ruby-identifier">month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Choose month&#39;</span>,
   :<span class="ruby-identifier">year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Choose year&#39;</span>, :<span class="ruby-identifier">hour</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Choose hour&#39;</span>,
   :<span class="ruby-identifier">minute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Choose minute&#39;</span>})
</pre>
<ul><li>
<p>Lead Contributor: <a href="http://samoliver.com/">Sam Oliver</a></p>
</li></ul>

<h3 id="label-AssetTag+Timestamp+Caching">AssetTag Timestamp Caching<span><a href="#label-AssetTag+Timestamp+Caching">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You&#39;re likely familiar with Rails&#39; practice of adding timestamps to
static asset paths as a “cache buster.” This helps ensure that stale copies
of things like images and stylesheets don&#39;t get served out of the
user&#39;s browser cache when you change them on the server. You can now
modify this behavior with the <code>cache_asset_timestamps</code>
configuration option for Action View. If you enable the cache, then Rails
will calculate the timestamp once when it first serves an asset, and save
that value. This means fewer (expensive) file system calls to serve static
assets - but it also means that you can&#39;t modify any of the assets
while the server is running and expect the changes to get picked up by
clients.</p>

<h3 id="label-Asset+Hosts+as+Objects">Asset Hosts as Objects<span><a href="#label-Asset+Hosts+as+Objects">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Asset hosts get more flexible in edge Rails with the ability to declare an
asset host as a specific object that responds to a call. This allows you to
implement any complex logic you need in your asset hosting.</p>
<ul><li>
<p>More Information: <a
href="http://github.com/dhh/asset-hosting-with-minimum-ssl/tree/master">asset-hosting-with-minimum-ssl</a></p>
</li></ul>

<h3 id="label-grouped_options_for_select+Helper+Method">grouped_options_for_select Helper Method<span><a href="#label-grouped_options_for_select+Helper+Method">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Action View already had a bunch of helpers to aid in generating select
controls, but now there&#39;s one more:
<code>grouped_options_for_select</code>. This one accepts an array or hash
of strings, and converts them into a string of <code>option</code> tags
wrapped with <code>optgroup</code> tags. For example:</p>

<pre class="ruby"><span class="ruby-identifier">grouped_options_for_select</span>([[<span class="ruby-string">&quot;Hats&quot;</span>, [<span class="ruby-string">&quot;Baseball Cap&quot;</span>,<span class="ruby-string">&quot;Cowboy Hat&quot;</span>]]],
  <span class="ruby-string">&quot;Cowboy Hat&quot;</span>, <span class="ruby-string">&quot;Choose a product...&quot;</span>)
</pre>

<p>returns</p>

<pre class="ruby"><span class="ruby-operator">&lt;</span><span class="ruby-identifier">option</span> <span class="ruby-identifier">value</span>=<span class="ruby-string">&quot;&quot;</span><span class="ruby-operator">&gt;</span><span class="ruby-constant">Choose</span> <span class="ruby-identifier">a</span> <span class="ruby-identifier">product</span><span class="ruby-operator">...</span><span class="ruby-operator">&lt;</span><span class="ruby-regexp">/option&gt;
&lt;optgroup label=&quot;Hats&quot;&gt;
  &lt;option value=&quot;Baseball Cap&quot;&gt;Baseball Cap&lt;/o</span><span class="ruby-identifier">ption</span><span class="ruby-operator">&gt;</span>
  <span class="ruby-operator">&lt;</span><span class="ruby-identifier">option</span> <span class="ruby-identifier">selected</span>=<span class="ruby-string">&quot;selected&quot;</span> <span class="ruby-identifier">value</span>=<span class="ruby-string">&quot;Cowboy Hat&quot;</span><span class="ruby-operator">&gt;</span><span class="ruby-constant">Cowboy</span> <span class="ruby-constant">Hat</span><span class="ruby-operator">&lt;</span><span class="ruby-regexp">/option&gt;
&lt;/o</span><span class="ruby-identifier">ptgroup</span><span class="ruby-operator">&gt;</span>
</pre>

<h3 id="label-Disabled+Option+Tags+for+Form+Select+Helpers">Disabled Option Tags for Form Select Helpers<span><a href="#label-Disabled+Option+Tags+for+Form+Select+Helpers">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The form select helpers (such as <code>select</code> and
<code>options_for_select</code>) now support a <code>:disabled</code>
option, which can take a single value or an array of values to be disabled
in the resulting tags:</p>

<pre class="ruby"><span class="ruby-identifier">select</span>(:<span class="ruby-identifier">post</span>, :<span class="ruby-identifier">category</span>, <span class="ruby-constant">Post</span><span class="ruby-operator">::</span><span class="ruby-constant">CATEGORIES</span>, :<span class="ruby-identifier">disabled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;private&#39;</span>)
</pre>

<p>returns</p>

<pre>&lt;select name=&quot;post[category]&quot;&gt;
&lt;option&gt;story&lt;/option&gt;
&lt;option&gt;joke&lt;/option&gt;
&lt;option&gt;poem&lt;/option&gt;
&lt;option disabled=&quot;disabled&quot;&gt;private&lt;/option&gt;
&lt;/select&gt;</pre>

<p>You can also use an anonymous function to determine at runtime which
options from collections will be selected and/or disabled:</p>

<pre class="ruby"><span class="ruby-identifier">options_from_collection_for_select</span>(<span class="ruby-ivar">@product</span>.<span class="ruby-identifier">sizes</span>, :<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">disabled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lambda</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">size</span><span class="ruby-operator">|</span> <span class="ruby-identifier">size</span>.<span class="ruby-identifier">out_of_stock?</span>})
</pre>
<ul><li>
<p>Lead Contributor: <a href="http://tekin.co.uk/">Tekin Suleyman</a></p>
</li><li>
<p>More Information: <a
href="http://tekin.co.uk/2009/03/new-in-rails-23-disabled-option-tags-and-lambdas-for-selecting-and-disabling-options-from-collections/">New
in rails 2.3 - disabled option tags and lambdas for selecting and disabling
options from collections</a></p>
</li></ul>

<h3 id="label-A+Note+About+Template+Loading">A Note About Template Loading<span><a href="#label-A+Note+About+Template+Loading">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails 2.3 includes the ability to enable or disable cached templates for
any particular environment. Cached templates give you a speed boost because
they don&#39;t check for a new template file when they&#39;re rendered -
but they also mean that you can&#39;t replace a template “on the fly”
without restarting the server.</p>

<p>In most cases, you&#39;ll want template caching to be turned on in
production, which you can do by making a setting in your
<code>production.rb</code> file:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">action_view</span>.<span class="ruby-identifier">cache_template_loading</span> = <span class="ruby-keyword">true</span>
</pre>

<p>This line will be generated for you by default in a new Rails 2.3
application. If you&#39;ve upgraded from an older version of Rails, Rails
will default to caching templates in production and test but not in
development.</p>

<h3 id="label-Other+Action+View+Changes">Other Action View Changes<span><a href="#label-Other+Action+View+Changes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
<ul><li>
<p>Token generation for CSRF protection has been simplified; now Rails uses a
simple random string generated by <code>ActiveSupport::SecureRandom</code>
rather than mucking around with session IDs.</p>
</li><li>
<p><code>auto_link</code> now properly applies options (such as
<code>:target</code> and <code>:class</code>) to generated e-mail links.</p>
</li><li>
<p>The <code>autolink</code> helper has been refactored to make it a bit less
messy and more intuitive.</p>
</li><li>
<p><code>current_page?</code> now works properly even when there are multiple
query parameters in the URL.</p>
</li></ul>

<h2 id="label-Active+Support">Active Support<span><a href="#label-Active+Support">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Active Support has a few interesting changes, including the introduction of
<code>Object#try</code>.</p>

<h3 id="label-Object%23try">Object#try<span><a href="#label-Object%23try">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>A lot of folks have adopted the notion of using try() to attempt operations
on objects. It&#39;s especially helpful in views where you can avoid
nil-checking by writing code like <code>&lt;%= @person.try(:name)
%&gt;</code>. Well, now it&#39;s baked right into Rails. As implemented in
Rails, it raises <code>NoMethodError</code> on private methods and always
returns <code>nil</code> if the object is nil.</p>
<ul><li>
<p>More Information: <a href="http://ozmm.org/posts/try.html.">try()</a></p>
</li></ul>

<h3 id="label-Object%23tap+Backport">Object#tap Backport<span><a href="#label-Object%23tap+Backport">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><code>Object#tap</code> is an addition to <a
href="http://www.ruby-doc.org/core-1.9/classes/Object.html#M000309">Ruby
1.9</a> and 1.8.7 that is similar to the <code>returning</code> method that
Rails has had for a while: it yields to a block, and then returns the
object that was yielded. Rails now includes code to make this available
under older versions of Ruby as well.</p>

<h3 id="label-Swappable+Parsers+for+XMLmini">Swappable Parsers for XMLmini<span><a href="#label-Swappable+Parsers+for+XMLmini">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The support for XML parsing in Active Support has been made more flexible
by allowing you to swap in different parsers. By default, it uses the
standard REXML implementation, but you can easily specify the faster LibXML
or Nokogiri implementations for your own applications, provided you have
the appropriate gems installed:</p>

<pre class="ruby"><span class="ruby-constant">XmlMini</span>.<span class="ruby-identifier">backend</span> = <span class="ruby-string">&#39;LibXML&#39;</span>
</pre>
<ul><li>
<p>Lead Contributor: <a href="http://www.movesonrails.com/">Bart ten
Brinke</a></p>
</li><li>
<p>Lead Contributor: <a href="http://tenderlovemaking.com/">Aaron
Patterson</a></p>
</li></ul>

<h3 id="label-Fractional+seconds+for+TimeWithZone">Fractional seconds for TimeWithZone<span><a href="#label-Fractional+seconds+for+TimeWithZone">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The <code>Time</code> and <code>TimeWithZone</code> classes include an
<code>xmlschema</code> method to return the time in an XML-friendly string.
As of Rails 2.3, <code>TimeWithZone</code> supports the same argument for
specifying the number of digits in the fractional second part of the
returned string that <code>Time</code> does:</p>

<pre class="ruby"><span class="ruby-operator">&gt;&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">xmlschema</span>(<span class="ruby-value">6</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;2009-01-16T13:00:06.13653Z&quot;</span>
</pre>
<ul><li>
<p>Lead Contributor: <a
href="http://www.workingwithrails.com/person/13536-nicholas-dainty">Nicholas
Dainty</a></p>
</li></ul>

<h3 id="label-JSON+Key+Quoting">JSON Key Quoting<span><a href="#label-JSON+Key+Quoting">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>If you look up the spec on the “json.org” site, you&#39;ll discover that
all keys in a JSON structure must be strings, and they must be quoted with
double quotes. Starting with Rails 2.3, we do the right thing here, even
with numeric keys.</p>

<h3 id="label-Other+Active+Support+Changes">Other Active Support Changes<span><a href="#label-Other+Active+Support+Changes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
<ul><li>
<p>You can use <code>Enumerable#none?</code> to check that none of the
elements match the supplied block.</p>
</li><li>
<p>If you&#39;re using Active Support <a
href="http://afreshcup.com/2008/10/19/coming-in-rails-22-delegate-prefixes/,">delegates</a>
the new <code>:allow_nil</code> option lets you return <code>nil</code>
instead of raising an exception when the target object is nil.</p>
</li><li>
<p><code>ActiveSupport::OrderedHash</code>: now implements
<code>each_key</code> and <code>each_value</code>.</p>
</li><li>
<p><code>ActiveSupport::MessageEncryptor</code> provides a simple way to
encrypt information for storage in an untrusted location (like cookies).</p>
</li><li>
<p>Active Support&#39;s <code>from_xml</code> no longer depends on XmlSimple.
Instead, Rails now includes its own XmlMini implementation, with just the
functionality that it requires. This lets Rails dispense with the bundled
copy of XmlSimple that it&#39;s been carting around.</p>
</li><li>
<p>If you memoize a private method, the result will now be private.</p>
</li><li>
<p><code>String#parameterize</code> accepts an optional separator:
<code>&quot;Quick Brown Fox&quot;.parameterize(&#39;_&#39;) =&gt;
&quot;quick_brown_fox&quot;</code>.</p>
</li><li>
<p><code>number_to_phone</code> accepts 7-digit phone numbers now.</p>
</li><li>
<p><code>ActiveSupport::Json.decode</code> now handles <code>\u0000</code>
style escape sequences.</p>
</li></ul>

<h2 id="label-Railties">Railties<span><a href="#label-Railties">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>In addition to the Rack changes covered above, Railties (the core code of
Rails itself) sports a number of significant changes, including Rails
Metal, application templates, and quiet backtraces.</p>

<h3 id="label-Rails+Metal">Rails Metal<span><a href="#label-Rails+Metal">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails Metal is a new mechanism that provides superfast endpoints inside of
your Rails applications. Metal classes bypass routing and Action Controller
to give you raw speed (at the cost of all the things in Action Controller,
of course). This builds on all of the recent foundation work to make Rails
a Rack application with an exposed middleware stack. Metal endpoints can be
loaded from your application or from plugins.</p>
<ul><li>
<p>More Information:</p>
<ul><li>
<p><a
href="http://weblog.rubyonrails.org/2008/12/17/introducing-rails-metal">Introducing
Rails Metal</a></p>
</li><li>
<p><a
href="http://soylentfoo.jnewland.com/articles/2008/12/16/rails-metal-a-micro-framework-with-the-power-of-rails-m">Rails
Metal: a micro-framework with the power of Rails</a></p>
</li><li>
<p><a
href="http://www.railsinside.com/deployment/180-metal-super-fast-endpoints-within-your-rails-apps.html">Metal:
Super-fast Endpoints within your Rails Apps</a></p>
</li><li>
<p><a
href="http://ryandaigle.com/articles/2008/12/18/what-s-new-in-edge-rails-rails-metal">What’s
New in Edge Rails: Rails Metal</a></p>
</li></ul>
</li></ul>

<h3 id="label-Application+Templates">Application Templates<span><a href="#label-Application+Templates">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails 2.3 incorporates Jeremy McAnally&#39;s <a
href="http://github.com/jeremymcanally/rg/tree/master">rg</a> application
generator. What this means is that we now have template-based application
generation built right into Rails; if you have a set of plugins you include
in every application (among many other use cases), you can just set up a
template once and use it over and over again when you run the
<code>rails</code> command. There&#39;s also a rake task to apply a
template to an existing application:</p>

<pre>rake rails:template LOCATION=~/template.rb</pre>

<p>This will layer the changes from the template on top of whatever code the
project already contains.</p>
<ul><li>
<p>Lead Contributor: <a href="http://www.jeremymcanally.com/">Jeremy
McAnally</a></p>
</li><li>
<p>More Info:<a href="http://m.onkey.org/2008/12/4/rails-templates">Rails
templates</a></p>
</li></ul>

<h3 id="label-Quieter+Backtraces">Quieter Backtraces<span><a href="#label-Quieter+Backtraces">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Building on Thoughtbot&#39;s <a
href="https://github.com/thoughtbot/quietbacktrace">Quiet Backtrace</a>
plugin, which allows you to selectively remove lines from
<code>Test::Unit</code> backtraces, Rails 2.3 implements
<code>ActiveSupport::BacktraceCleaner</code> and
<code>Rails::BacktraceCleaner</code> in core. This supports both filters
(to perform regex-based substitutions on backtrace lines) and silencers (to
remove backtrace lines entirely). Rails automatically adds silencers to get
rid of the most common noise in a new application, and builds a
<code>config/backtrace_silencers.rb</code> file to hold your own additions.
This feature also enables prettier printing from any gem in the backtrace.</p>

<h3 id="label-Faster+Boot+Time+in+Development+Mode+with+Lazy+Loading%2FAutoload">Faster Boot Time in Development Mode with Lazy Loading/Autoload<span><a href="#label-Faster+Boot+Time+in+Development+Mode+with+Lazy+Loading%2FAutoload">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Quite a bit of work was done to make sure that bits of Rails (and its
dependencies) are only brought into memory when they&#39;re actually
needed. The core frameworks - Active Support, Active Record, Action
Controller, Action Mailer and Action View - are now using
<code>autoload</code> to lazy-load their individual classes. This work
should help keep the memory footprint down and improve overall Rails
performance.</p>

<p>You can also specify (by using the new <code>preload_frameworks</code>
option) whether the core libraries should be autoloaded at startup. This
defaults to <code>false</code> so that Rails autoloads itself
piece-by-piece, but there are some circumstances where you still need to
bring in everything at once - Passenger and JRuby both want to see all of
Rails loaded together.</p>

<h3 id="label-rake+gem+Task+Rewrite">rake gem Task Rewrite<span><a href="#label-rake+gem+Task+Rewrite">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The internals of the various <code>rake gem</code> tasks have been
substantially revised, to make the system work better for a variety of
cases. The gem system now knows the difference between development and
runtime dependencies, has a more robust unpacking system, gives better
information when querying for the status of gems, and is less prone to
“chicken and egg” dependency issues when you&#39;re bringing things up from
scratch. There are also fixes for using gem commands under JRuby and for
dependencies that try to bring in external copies of gems that are already
vendored.</p>
<ul><li>
<p>Lead Contributor: <a
href="http://www.workingwithrails.com/person/12240-david-dollar">David
Dollar</a></p>
</li></ul>

<h3 id="label-Other+Railties+Changes">Other Railties Changes<span><a href="#label-Other+Railties+Changes">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
<ul><li>
<p>The instructions for updating a CI server to build Rails have been updated
and expanded.</p>
</li><li>
<p>Internal Rails testing has been switched from
<code>Test::Unit::TestCase</code> to <code>ActiveSupport::TestCase</code>,
and the Rails core requires Mocha to test.</p>
</li><li>
<p>The default <code>environment.rb</code> file has been decluttered.</p>
</li><li>
<p>The dbconsole script now lets you use an all-numeric password without
crashing.</p>
</li><li>
<p><code>Rails.root</code> now returns a <code>Pathname</code> object, which
means you can use it directly with the <code>join</code> method to <a
href="http://afreshcup.com/2008/12/05/a-little-rails_root-tidiness/">clean
up existing code</a> that uses <code>File.join</code>.</p>
</li><li>
<p>Various files in /public that deal with CGI and FCGI dispatching are no
longer generated in every Rails application by default (you can still get
them if you need them by adding <code>--with-dispatchers</code> when you
run the <code>rails</code> command, or add them later with <code>rake
rails:update:generate_dispatchers</code>).</p>
</li><li>
<p>Rails Guides have been converted from AsciiDoc to Textile markup.</p>
</li><li>
<p>Scaffolded views and controllers have been cleaned up a bit.</p>
</li><li>
<p><code>script/server</code> now accepts a <code>--path</code> argument to
mount a Rails application from a specific path.</p>
</li><li>
<p>If any configured gems are missing, the gem rake tasks will skip loading
much of the environment. This should solve many of the “chicken-and-egg”
problems where rake gems:install couldn&#39;t run because gems were
missing.</p>
</li><li>
<p>Gems are now unpacked exactly once. This fixes issues with gems (hoe, for
instance) which are packed with read-only permissions on the files.</p>
</li></ul>

<h2 id="label-Deprecated">Deprecated<span><a href="#label-Deprecated">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>A few pieces of older code are deprecated in this release:</p>
<ul><li>
<p>If you&#39;re one of the (fairly rare) Rails developers who deploys in a
fashion that depends on the inspector, reaper, and spawner scripts,
you&#39;ll need to know that those scripts are no longer included in core
Rails. If you need them, you&#39;ll be able to pick up copies via the <a
href="http://github.com/rails/irs_process_scripts/tree">irs_process_scripts</a>
plugin.</p>
</li><li>
<p><code>render_component</code> goes from “deprecated” to “nonexistent” in
Rails 2.3. If you still need it, you can install the <a
href="http://github.com/rails/render_component/tree/master">render_component
plugin</a>.</p>
</li><li>
<p>Support for Rails components has been removed.</p>
</li><li>
<p>If you were one of the people who got used to running
<code>script/performance/request</code> to look at performance based on
integration tests, you need to learn a new trick: that script has been
removed from core Rails now. There&#39;s a new request_profiler plugin that
you can install to get the exact same functionality back.</p>
</li><li>
<p><code>ActionController::Base#session_enabled?</code> is deprecated because
sessions are lazy-loaded now.</p>
</li><li>
<p>The <code>:digest</code> and <code>:secret</code> options to
<code>protect_from_forgery</code> are deprecated and have no effect.</p>
</li><li>
<p>Some integration test helpers have been removed.
<code>response.headers["Status"]</code> and <code>headers["Status"]</code>
will no longer return anything. Rack does not allow “Status” in its return
headers. However you can still use the <code>status</code> and
<code>status_message</code> helpers.
<code>response.headers["cookie"]</code> and <code>headers["cookie"]</code>
will no longer return any CGI cookies. You can inspect
<code>headers["Set-Cookie"]</code> to see the raw cookie header or use the
<code>cookies</code> helper to get a hash of the cookies sent to the
client.</p>
</li><li>
<p><code>formatted_polymorphic_url</code> is deprecated. Use
<code>polymorphic_url</code> with <code>:format</code> instead.</p>
</li><li>
<p>The <code>:http_only</code> option in
<code>ActionController::Response#set_cookie</code> has been renamed to
<code>:httponly</code>.</p>
</li><li>
<p>The <code>:connector</code> and <code>:skip_last_comma</code> options of
<code>to_sentence</code> have been replaced by
<code>:words_connnector</code>, <code>:two_words_connector</code>, and
<code>:last_word_connector</code> options.</p>
</li><li>
<p>Posting a multipart form with an empty <code>file_field</code> control used
to submit an empty string to the controller. Now it submits a nil, due to
differences between Rack&#39;s multipart parser and the old Rails one.</p>
</li></ul>

<h2 id="label-Credits">Credits<span><a href="#label-Credits">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Release notes compiled by <a href="http://afreshcup.com.">Mike
Gunderloy</a> This version of the Rails 2.3 release notes was compiled
based on RC2 of Rails 2.3.</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

