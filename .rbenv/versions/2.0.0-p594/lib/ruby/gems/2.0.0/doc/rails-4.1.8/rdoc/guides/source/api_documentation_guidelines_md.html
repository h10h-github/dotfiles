<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>api_documentation_guidelines - rails-4.1.8 Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-API+Documentation+Guidelines">API Documentation Guidelines</a>
    <li><a href="#label-RDoc">RDoc</a>
    <li><a href="#label-Wording">Wording</a>
    <li><a href="#label-English">English</a>
    <li><a href="#label-Example+Code">Example Code</a>
    <li><a href="#label-Booleans">Booleans</a>
    <li><a href="#label-Filenames">Filenames</a>
    <li><a href="#label-Fonts">Fonts</a>
    <li><a href="#label-Fixed-width+Font">Fixed-width Font</a>
    <li><a href="#label-Regular+Font">Regular Font</a>
    <li><a href="#label-Description+Lists">Description Lists</a>
    <li><a href="#label-Dynamically+Generated+Methods">Dynamically Generated Methods</a>
    <li><a href="#label-Method+Visibility">Method Visibility</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile.html">Gemfile</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../guides/code/getting_started/README_rdoc.html">README</a>
  
    <li><a href="../../guides/code/getting_started/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/comments_js_coffee.html">comments.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/posts_js_coffee.html">posts.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/welcome_js_coffee.html">welcome.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/comments_css_scss.html">comments.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/posts_css_scss.html">posts.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/welcome_css_scss.html">welcome.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/config_ru.html">config.ru</a>
  
    <li><a href="../../guides/code/getting_started/public/404_html.html">404.html</a>
  
    <li><a href="../../guides/code/getting_started/public/422_html.html">422.html</a>
  
    <li><a href="../../guides/code/getting_started/public/500_html.html">500.html</a>
  
    <li><a href="../../guides/code/getting_started/public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../guides/code/getting_started/public/robots_txt.html">robots</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/migrations_md.html">migrations</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/api_documentation_guidelines.md">

<h1 id="label-API+Documentation+Guidelines">API Documentation Guidelines<span><a href="#label-API+Documentation+Guidelines">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>This guide documents the Ruby on Rails API documentation guidelines.</p>

<p>After reading this guide, you will know:</p>
<ul><li>
<p>How to write effective prose for documentation purposes.</p>
</li><li>
<p>Style guidelines for documenting different kinds of Ruby code.</p>
</li></ul>
<hr>

<h2 id="label-RDoc">RDoc<span><a href="#label-RDoc">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>The Rails API documentation is generated with RDoc. Please consult the
documentation for help with the <a
href="http://rdoc.rubyforge.org/RDoc/Markup.html">markup</a>, and also take
into account these <a
href="http://rdoc.rubyforge.org/RDoc/Parser/Ruby.html">additional
directives</a>.</p>

<h2 id="label-Wording">Wording<span><a href="#label-Wording">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Write simple, declarative sentences. Brevity is a plus: get to the point.</p>

<p>Write in present tense: “Returns a hash that…”, rather than “Returned a
hash that…” or “Will return a hash that…”.</p>

<p>Start comments in upper case. Follow regular punctuation rules:</p>

<pre class="ruby"><span class="ruby-comment"># Declares an attribute reader backed by an internally-named</span>
<span class="ruby-comment"># instance variable.</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">attr_internal_reader</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Communicate to the reader the current way of doing things, both explicitly
and implicitly. Use the idioms recommended in edge. Reorder sections to
emphasize favored approaches if needed, etc. The documentation should be a
model for best practices and canonical, modern Rails usage.</p>

<p>Documentation has to be concise but comprehensive. Explore and document
edge cases. What happens if a module is anonymous? What if a collection is
empty? What if an argument is nil?</p>

<p>The proper names of Rails components have a space in between the words,
like “Active Support”. <code>ActiveRecord</code> is a Ruby module, whereas
Active Record is an ORM. All Rails documentation should consistently refer
to Rails components by their proper name, and if in your next blog post or
presentation you remember this tidbit and take it into account that&#39;d
be phenomenal.</p>

<p>Spell names correctly: Arel, Test::Unit, RSpec, HTML, MySQL, JavaScript,
ERB. When in doubt, please have a look at some authoritative source like
their official documentation.</p>

<p>Use the article “an” for “SQL”, as in “an SQL statement”. Also “an SQLite
database”.</p>

<p>Prefer wordings that avoid “you”s and “your”s. For example, instead of</p>

<pre>If you need to use `return` statements in your callbacks, it is recommended that you explicitly define them as methods.</pre>

<p>use this style:</p>

<pre>If `return` is needed it is recommended to explicitly define a method.</pre>

<p>That said, when using pronouns in reference to a hypothetical person, such
as “a user with a session cookie”, gender neutral pronouns
(they/their/them) should be used. Instead of:</p>
<ul><li>
<p>he or she… use they.</p>
</li><li>
<p>him or her… use them.</p>
</li><li>
<p>his or her… use their.</p>
</li><li>
<p>his or hers… use theirs.</p>
</li><li>
<p>himself or herself… use themselves.</p>
</li></ul>

<h2 id="label-English">English<span><a href="#label-English">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Please use American English (<em>color</em>, <em>center</em>,
<em>modularize</em>, etc). See <a
href="http://en.wikipedia.org/wiki/American_and_British_English_spelling_differences">a
list of American and British English spelling differences here</a>.</p>

<h2 id="label-Example+Code">Example Code<span><a href="#label-Example+Code">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Choose meaningful examples that depict and cover the basics as well as
interesting points or gotchas.</p>

<p>Use two spaces to indent chunks of code–that is, for markup purposes, two
spaces with respect to the left margin. The examples themselves should use
<a
href="contributing_to_ruby_on_rails.html#follow-the-coding-conventions">Rails
coding conventions</a>.</p>

<p>Short docs do not need an explicit “Examples” label to introduce snippets;
they just follow paragraphs:</p>

<pre class="ruby"><span class="ruby-comment"># Converts a collection of elements into a formatted string by</span>
<span class="ruby-comment"># calling +to_s+ on all elements and joining them.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment">#   Blog.all.to_formatted_s # =&gt; &quot;First PostSecond PostThird Post&quot;</span>
</pre>

<p>On the other hand, big chunks of structured documentation may have a
separate “Examples” section:</p>

<pre class="ruby"><span class="ruby-comment"># ==== Examples</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment">#   Person.exists?(5)</span>
<span class="ruby-comment">#   Person.exists?(&#39;5&#39;)</span>
<span class="ruby-comment">#   Person.exists?(name: &quot;David&quot;)</span>
<span class="ruby-comment">#   Person.exists?([&#39;name LIKE ?&#39;, &quot;%#{query}%&quot;])</span>
</pre>

<p>The results of expressions follow them and are introduced by “# =&gt; ”,
vertically aligned:</p>

<pre class="ruby"><span class="ruby-comment"># For checking if a fixnum is even or odd.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment">#   1.even? # =&gt; false</span>
<span class="ruby-comment">#   1.odd?  # =&gt; true</span>
<span class="ruby-comment">#   2.even? # =&gt; true</span>
<span class="ruby-comment">#   2.odd?  # =&gt; false</span>
</pre>

<p>If a line is too long, the comment may be placed on the next line:</p>

<pre class="ruby"><span class="ruby-comment">#   label(:post, :title)</span>
<span class="ruby-comment">#   # =&gt; &lt;label for=&quot;post_title&quot;&gt;Title&lt;/label&gt;</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment">#   label(:post, :title, &quot;A short title&quot;)</span>
<span class="ruby-comment">#   # =&gt; &lt;label for=&quot;post_title&quot;&gt;A short title&lt;/label&gt;</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment">#   label(:post, :title, &quot;A short title&quot;, class: &quot;title_label&quot;)</span>
<span class="ruby-comment">#   # =&gt; &lt;label for=&quot;post_title&quot; class=&quot;title_label&quot;&gt;A short title&lt;/label&gt;</span>
</pre>

<p>Avoid using any printing methods like <code>puts</code> or <code>p</code>
for that purpose.</p>

<p>On the other hand, regular comments do not use an arrow:</p>

<pre class="ruby"><span class="ruby-comment">#   polymorphic_url(record)  # same as comment_url(record)</span>
</pre>

<h2 id="label-Booleans">Booleans<span><a href="#label-Booleans">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>In predicates and flags prefer documenting boolean semantics over exact
values.</p>

<p>When “true” or “false” are used as defined in Ruby use regular font. The
singletons <code>true</code> and <code>false</code> need fixed-width font.
Please avoid terms like “truthy”, Ruby defines what is true and false in
the language, and thus those words have a technical meaning and need no
substitutes.</p>

<p>As a rule of thumb, do not document singletons unless absolutely necessary.
That prevents artificial constructs like <code>!!</code> or ternaries,
allows refactors, and the code does not need to rely on the exact values
returned by methods being called in the implementation.</p>

<p>For example:</p>

<pre>`config.action_mailer.perform_deliveries` specifies whether mail will actually be delivered and is true by default</pre>

<p>the user does not need to know which is the actual default value of the
flag, and so we only document its boolean semantics.</p>

<p>An example with a predicate:</p>

<pre class="ruby"><span class="ruby-comment"># Returns true if the collection is empty.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment"># If the collection has been loaded</span>
<span class="ruby-comment"># it is equivalent to &lt;tt&gt;collection.size.zero?&lt;/tt&gt;. If the</span>
<span class="ruby-comment"># collection has not been loaded, it is equivalent to</span>
<span class="ruby-comment"># &lt;tt&gt;collection.exists?&lt;/tt&gt;. If the collection has not already been</span>
<span class="ruby-comment"># loaded and you are going to fetch the records anyway it is better to</span>
<span class="ruby-comment"># check &lt;tt&gt;collection.length.zero?&lt;/tt&gt;.</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">loaded?</span>
    <span class="ruby-identifier">size</span>.<span class="ruby-identifier">zero?</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@target</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scope</span>.<span class="ruby-identifier">exists?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The API is careful not to commit to any particular value, the method has
predicate semantics, that&#39;s enough.</p>

<h2 id="label-Filenames">Filenames<span><a href="#label-Filenames">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>As a rule of thumb, use filenames relative to the application root:</p>

<pre>config/routes.rb            # YES
routes.rb                   # NO
RAILS_ROOT/config/routes.rb # NO</pre>

<h2 id="label-Fonts">Fonts<span><a href="#label-Fonts">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<h3 id="label-Fixed-width+Font">Fixed-width Font<span><a href="#label-Fixed-width+Font">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Use fixed-width fonts for:</p>
<ul><li>
<p>Constants, in particular class and module names.</p>
</li><li>
<p>Method names.</p>
</li><li>
<p>Literals like <code>nil</code>, <code>false</code>, <code>true</code>,
<code>self</code>.</p>
</li><li>
<p>Symbols.</p>
</li><li>
<p>Method parameters.</p>
</li><li>
<p>File names.</p>
</li></ul>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Array</span>
  <span class="ruby-comment"># Calls +to_param+ on all its elements and joins the result with</span>
  <span class="ruby-comment"># slashes. This is used by +url_for+ in Action Pack.</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">to_param</span>
    <span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_param</span> }.<span class="ruby-identifier">join</span> <span class="ruby-string">&#39;/&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>WARNING: Using <code>...</code> for fixed-width font only works with simple
content like ordinary method names, symbols, paths (with forward slashes),
etc. Please use <code>...</code> for everything else, notably class or
module names with a namespace as in <code>ActiveRecord::Base</code>.</p>

<h3 id="label-Regular+Font">Regular Font<span><a href="#label-Regular+Font">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>When “true” and “false” are English words rather than Ruby keywords use a
regular font:</p>

<pre class="ruby"><span class="ruby-comment"># Runs all the validations within the specified context.</span>
<span class="ruby-comment"># Returns true if no errors are found, false otherwise.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment"># If the argument is false (default is +nil+), the context is</span>
<span class="ruby-comment"># set to &lt;tt&gt;:create&lt;/tt&gt; if &lt;tt&gt;new_record?&lt;/tt&gt; is true,</span>
<span class="ruby-comment"># and to &lt;tt&gt;:update&lt;/tt&gt; if it is not.</span>
<span class="ruby-comment">#</span>
<span class="ruby-comment"># Validations with no &lt;tt&gt;:on&lt;/tt&gt; option will run no</span>
<span class="ruby-comment"># matter the context. Validations with # some &lt;tt&gt;:on&lt;/tt&gt;</span>
<span class="ruby-comment"># option will only run in the specified context.</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">valid?</span>(<span class="ruby-identifier">context</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Description+Lists">Description Lists<span><a href="#label-Description+Lists">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>In lists of options, parameters, etc. use a hyphen between the item and its
description (reads better than a colon because normally options are
symbols):</p>

<pre class="ruby"><span class="ruby-comment"># * &lt;tt&gt;:allow_nil&lt;/tt&gt; - Skip validation if attribute is +nil+.</span>
</pre>

<p>The description starts in upper case and ends with a full stop-it&#39;s
standard English.</p>

<h2 id="label-Dynamically+Generated+Methods">Dynamically Generated Methods<span><a href="#label-Dynamically+Generated+Methods">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Methods created with <code>(module|class)_eval(STRING)</code> have a
comment by their side with an instance of the generated code. That comment
is 2 spaces away from the template:</p>

<pre class="ruby"><span class="ruby-keyword">for</span> <span class="ruby-identifier">severity</span> <span class="ruby-keyword">in</span> <span class="ruby-constant">Severity</span>.<span class="ruby-identifier">constants</span>
  <span class="ruby-identifier">class_eval</span> <span class="ruby-string">&quot;    def #{severity.downcase}(message = nil, progname = nil, &amp;block)  # def debug(message = nil, progname = nil, &amp;block)
      add(#{severity}, message, progname, &amp;block)                    #   add(DEBUG, message, progname, &amp;block)
    end                                                              # end
                                                                     #
    def #{severity.downcase}?                                        # def debug?
      #{severity} &gt;= @level                                          #   DEBUG &gt;= @level
    end                                                              # end
&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If the resulting lines are too wide, say 200 columns or more, put the
comment above the call:</p>

<pre class="ruby"><span class="ruby-comment"># def self.find_by_login_and_activated(*args)</span>
<span class="ruby-comment">#   options = args.extract_options!</span>
<span class="ruby-comment">#   ...</span>
<span class="ruby-comment"># end</span>
<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-node">%Q{
  def self.#{method_id}(*args)
    options = args.extract_options!
    ...
  end
}</span>
</pre>

<h2 id="label-Method+Visibility">Method Visibility<span><a href="#label-Method+Visibility">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>When writing documentation for Rails, it&#39;s important to understand the
difference between public API (or User-facing) vs. internal API.</p>

<p>Rails, like most libraries, uses the private keyword from Ruby for defining
internal API. However, public API follows a slightly different convention.
Instead of assuming all public methods are designed for user consumption,
Rails uses the <code>:nodoc:</code> directive to annotate these kinds of
methods as internal API.</p>

<p>This means that there are methods in Rails with <code>public</code>
visibility that aren&#39;t meant for user consumption.</p>

<p>An example of this is
<code>ActiveRecord::Core::ClassMethods#arel_table</code>:</p>

<pre class="ruby"><span class="ruby-keyword">module</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Core</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassMethods</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">arel_table</span> <span class="ruby-comment">#:nodoc:</span>
    <span class="ruby-comment"># do some magic..</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you thought, “this method looks like a public class method for
<code>ActiveRecord::Core</code>”, you were right. But actually the Rails
team doesn&#39;t want users to rely on this method. So they mark it as
<code>:nodoc:</code> and it&#39;s removed from public documentation. The
reasoning behind this is to allow the team to change these methods
according to their internal needs across releases as they see fit. The name
of this method could change, or the return value, or this entire class may
disappear; there&#39;s no guarantee and so you shouldn&#39;t depend on this
API in your plugin or application. Otherwise, you risk your app or gem
breaking when you upgrade to a newer release of Rails.</p>

<p>As a contributor, it&#39;s important to think about whether this API is
meant for end-user consumption. The Rails team is committed to not making
any breaking changes to public API across releases without going through a
full deprecation cycle, which takes an eternity. It&#39;s recommended that
you <code>:nodoc:</code> any of your internal methods/classes unless
they&#39;re already private (meaning visibility), in which case it&#39;s
internal by default. Once the API stabilizes the visibility can change from
private later, but changing public API is much harder due to backwards
compatibility.</p>

<p>A class or module is marked with <code>:nodoc:</code> to indicate that all
methods are internal API and should never be used directly.</p>

<p>If you come across an existing <code>:nodoc:</code> you should tread
lightly. Consider asking someone from the core team or author of the code
before removing it. This should almost always happen through a Pull Request
process instead of the docrails project.</p>

<p>A <code>:nodoc:</code> should never be added simply because a method or
class is missing documentation. There may be an instance where an internal
public method wasn&#39;t given a <code>:nodoc:</code> by mistake, for
example when switching a method from private to public visibility. When
this happens it should be discussed over a PR on a case-by-case basis and
never committed directly to docrails.</p>

<p>To summarize, the Rails team uses <code>:nodoc:</code> to mark publicly
visible methods and classes for internal use; changes to the visibility of
API should be considered carefully and discussed over a Pull Request first.</p>

<p>For whatever reason, you have a question on how the Rails team handles
certain API don&#39;t hesitate to open a ticket or send a patch to the <a
href="https://github.com/rails/rails/issues">issue tracker</a>.</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

