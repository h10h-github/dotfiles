<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>generators - rails-4.1.8 Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Creating+and+Customizing+Rails+Generators+%26+Templates">Creating and Customizing Rails Generators &amp; Templates</a>
    <li><a href="#label-First+Contact">First Contact</a>
    <li><a href="#label-Creating+Your+First+Generator">Creating Your First Generator</a>
    <li><a href="#label-Creating+Generators+with+Generators">Creating Generators with Generators</a>
    <li><a href="#label-Generators+Lookup">Generators Lookup</a>
    <li><a href="#label-Customizing+Your+Workflow">Customizing Your Workflow</a>
    <li><a href="#label-Customizing+Your+Workflow+by+Changing+Generators+Templates">Customizing Your Workflow by Changing Generators Templates</a>
    <li><a href="#label-Adding+Generators+Fallbacks">Adding Generators Fallbacks</a>
    <li><a href="#label-Application+Templates">Application Templates</a>
    <li><a href="#label-Generator+methods">Generator methods</a>
    <li><a href="#label-gem"><code>gem</code></a>
    <li><a href="#label-gem_group"><code>gem_group</code></a>
    <li><a href="#label-add_source"><code>add_source</code></a>
    <li><a href="#label-inject_into_file"><code>inject_into_file</code></a>
    <li><a href="#label-gsub_file"><code>gsub_file</code></a>
    <li><a href="#label-application"><code>application</code></a>
    <li><a href="#label-git"><code>git</code></a>
    <li><a href="#label-vendor"><code>vendor</code></a>
    <li><a href="#label-lib"><code>lib</code></a>
    <li><a href="#label-rakefile"><code>rakefile</code></a>
    <li><a href="#label-initializer"><code>initializer</code></a>
    <li><a href="#label-generate"><code>generate</code></a>
    <li><a href="#label-rake"><code>rake</code></a>
    <li><a href="#label-capify%21"><code>capify!</code></a>
    <li><a href="#label-route"><code>route</code></a>
    <li><a href="#label-readme"><code>readme</code></a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile.html">Gemfile</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../guides/code/getting_started/README_rdoc.html">README</a>
  
    <li><a href="../../guides/code/getting_started/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/comments_js_coffee.html">comments.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/posts_js_coffee.html">posts.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/welcome_js_coffee.html">welcome.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/comments_css_scss.html">comments.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/posts_css_scss.html">posts.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/welcome_css_scss.html">welcome.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/config_ru.html">config.ru</a>
  
    <li><a href="../../guides/code/getting_started/public/404_html.html">404.html</a>
  
    <li><a href="../../guides/code/getting_started/public/422_html.html">422.html</a>
  
    <li><a href="../../guides/code/getting_started/public/500_html.html">500.html</a>
  
    <li><a href="../../guides/code/getting_started/public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../guides/code/getting_started/public/robots_txt.html">robots</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/migrations_md.html">migrations</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/generators.md">

<h1 id="label-Creating+and+Customizing+Rails+Generators+%26+Templates">Creating and Customizing Rails Generators &amp; Templates<span><a href="#label-Creating+and+Customizing+Rails+Generators+%26+Templates">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>Rails generators are an essential tool if you plan to improve your
workflow. With this guide you will learn how to create generators and
customize existing ones.</p>

<p>After reading this guide, you will know:</p>
<ul><li>
<p>How to see which generators are available in your application.</p>
</li><li>
<p>How to create a generator using templates.</p>
</li><li>
<p>How Rails searches for generators before invoking them.</p>
</li><li>
<p>How to customize your scaffold by creating new generators.</p>
</li><li>
<p>How to customize your scaffold by changing generator templates.</p>
</li><li>
<p>How to use fallbacks to avoid overwriting a huge set of generators.</p>
</li><li>
<p>How to create an application template.</p>
</li></ul>
<hr>

<h2 id="label-First+Contact">First Contact<span><a href="#label-First+Contact">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>When you create an application using the <code>rails</code> command, you
are in fact using a Rails generator. After that, you can get a list of all
available generators by just invoking <code>rails generate</code>:</p>

<pre>$ rails new myapp
$ cd myapp
$ bin/rails generate</pre>

<p>You will get a list of all generators that comes with Rails. If you need a
detailed description of the helper generator, for example, you can simply
do:</p>

<pre>$ bin/rails generate helper --help</pre>

<h2 id="label-Creating+Your+First+Generator">Creating Your First Generator<span><a href="#label-Creating+Your+First+Generator">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Since Rails 3.0, generators are built on top of <a
href="https://github.com/erikhuda/thor">Thor</a>. Thor provides powerful
options parsing and a great API for manipulating files. For instance,
let&#39;s build a generator that creates an initializer file named
<code>initializer.rb</code> inside <code>config/initializers</code>.</p>

<p>The first step is to create a file at
<code>lib/generators/initializer_generator.rb</code> with the following
content:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">InitializerGenerator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Generators</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create_initializer_file</span>
    <span class="ruby-identifier">create_file</span> <span class="ruby-string">&quot;config/initializers/initializer.rb&quot;</span>, <span class="ruby-node">&quot;# Add initialization content here&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>NOTE: <code>create_file</code> is a method provided by
<code>Thor::Actions</code>. Documentation for <code>create_file</code> and
other Thor methods can be found in <a
href="http://rdoc.info/github/erikhuda/thor/master/Thor/Actions.html">Thor’s
documentation</a></p>

<p>Our new generator is quite simple: it inherits from
<code>Rails::Generators::Base</code> and has one method definition. When a
generator is invoked, each public method in the generator is executed
sequentially in the order that it is defined. Finally, we invoke the
<code>create_file</code> method that will create a file at the given
destination with the given content. If you are familiar with the Rails
Application Templates API, you&#39;ll feel right at home with the new
generators API.</p>

<p>To invoke our new generator, we just need to do:</p>

<pre>$ bin/rails generate initializer</pre>

<p>Before we go on, let&#39;s see our brand new generator description:</p>

<pre>$ bin/rails generate initializer --help</pre>

<p>Rails is usually able to generate good descriptions if a generator is
namespaced, as <code>ActiveRecord::Generators::ModelGenerator</code>, but
not in this particular case. We can solve this problem in two ways. The
first one is calling <code>desc</code> inside our generator:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">InitializerGenerator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Generators</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">desc</span> <span class="ruby-string">&quot;This generator creates an initializer file at config/initializers&quot;</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create_initializer_file</span>
    <span class="ruby-identifier">create_file</span> <span class="ruby-string">&quot;config/initializers/initializer.rb&quot;</span>, <span class="ruby-node">&quot;# Add initialization content here&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now we can see the new description by invoking <code>--help</code> on the
new generator. The second way to add a description is by creating a file
named <code>USAGE</code> in the same directory as our generator. We are
going to do that in the next step.</p>

<h2 id="label-Creating+Generators+with+Generators">Creating Generators with Generators<span><a href="#label-Creating+Generators+with+Generators">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Generators themselves have a generator:</p>

<pre>$ bin/rails generate generator initializer
      create  lib/generators/initializer
      create  lib/generators/initializer/initializer_generator.rb
      create  lib/generators/initializer/USAGE
      create  lib/generators/initializer/templates</pre>

<p>This is the generator just created:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">InitializerGenerator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Generators</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedBase</span>
  <span class="ruby-identifier">source_root</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;../templates&quot;</span>, <span class="ruby-keyword">__FILE__</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>First, notice that we are inheriting from
<code>Rails::Generators::NamedBase</code> instead of
<code>Rails::Generators::Base</code>. This means that our generator expects
at least one argument, which will be the name of the initializer, and will
be available in our code in the variable <code>name</code>.</p>

<p>We can see that by invoking the description of this new generator
(don&#39;t forget to delete the old generator file):</p>

<pre>$ bin/rails generate initializer --help
Usage:
  rails generate initializer NAME [options]</pre>

<p>We can also see that our new generator has a class method called
<code>source_root</code>. This method points to where our generator
templates will be placed, if any, and by default it points to the created
directory <code>lib/generators/initializer/templates</code>.</p>

<p>In order to understand what a generator template means, let&#39;s create
the file <code>lib/generators/initializer/templates/initializer.rb</code>
with the following content:</p>

<pre class="ruby"><span class="ruby-comment"># Add initialization content here</span>
</pre>

<p>And now let&#39;s change the generator to copy this template when invoked:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">InitializerGenerator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Generators</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedBase</span>
  <span class="ruby-identifier">source_root</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&quot;../templates&quot;</span>, <span class="ruby-keyword">__FILE__</span>)

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">copy_initializer_file</span>
    <span class="ruby-identifier">copy_file</span> <span class="ruby-string">&quot;initializer.rb&quot;</span>, <span class="ruby-node">&quot;config/initializers/#{file_name}.rb&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>And let&#39;s execute our generator:</p>

<pre>$ bin/rails generate initializer core_extensions</pre>

<p>We can see that now an initializer named core_extensions was created at
<code>config/initializers/core_extensions.rb</code> with the contents of
our template. That means that <code>copy_file</code> copied a file in our
source root to the destination path we gave. The method
<code>file_name</code> is automatically created when we inherit from
<code>Rails::Generators::NamedBase</code>.</p>

<p>The methods that are available for generators are covered in the <a
href="#generator-methods">final section</a> of this guide.</p>

<h2 id="label-Generators+Lookup">Generators Lookup<span><a href="#label-Generators+Lookup">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>When you run <code>rails generate initializer core_extensions</code> Rails
requires these files in turn until one is found:</p>

<pre>rails/generators/initializer/initializer_generator.rb
generators/initializer/initializer_generator.rb
rails/generators/initializer_generator.rb
generators/initializer_generator.rb</pre>

<p>If none is found you get an error message.</p>

<p>INFO: The examples above put files under the application&#39;s
<code>lib</code> because said directory belongs to <code>$LOAD_PATH</code>.</p>

<h2 id="label-Customizing+Your+Workflow">Customizing Your Workflow<span><a href="#label-Customizing+Your+Workflow">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Rails own generators are flexible enough to let you customize scaffolding.
They can be configured in <code>config/application.rb</code>, these are
some defaults:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">generators</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">orm</span>             :<span class="ruby-identifier">active_record</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">template_engine</span> :<span class="ruby-identifier">erb</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">test_framework</span>  :<span class="ruby-identifier">test_unit</span>, <span class="ruby-identifier">fixture</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Before we customize our workflow, let&#39;s first see what our scaffold
looks like:</p>

<pre>$ bin/rails generate scaffold User name:string
      invoke  active_record
      create    db/migrate/20130924151154_create_users.rb
      create    app/models/user.rb
      invoke    test_unit
      create      test/models/user_test.rb
      create      test/fixtures/users.yml
      invoke  resource_route
       route    resources :users
      invoke  scaffold_controller
      create    app/controllers/users_controller.rb
      invoke    erb
      create      app/views/users
      create      app/views/users/index.html.erb
      create      app/views/users/edit.html.erb
      create      app/views/users/show.html.erb
      create      app/views/users/new.html.erb
      create      app/views/users/_form.html.erb
      invoke    test_unit
      create      test/controllers/users_controller_test.rb
      invoke    helper
      create      app/helpers/users_helper.rb
      invoke      test_unit
      create        test/helpers/users_helper_test.rb
      invoke    jbuilder
      create      app/views/users/index.json.jbuilder
      create      app/views/users/show.json.jbuilder
      invoke  assets
      invoke    coffee
      create      app/assets/javascripts/users.js.coffee
      invoke    scss
      create      app/assets/stylesheets/users.css.scss
      invoke  scss
      create    app/assets/stylesheets/scaffolds.css.scss</pre>

<p>Looking at this output, it&#39;s easy to understand how generators work in
Rails 3.0 and above. The scaffold generator doesn&#39;t actually generate
anything, it just invokes others to do the work. This allows us to
add/replace/remove any of those invocations. For instance, the scaffold
generator invokes the scaffold_controller generator, which invokes erb,
test_unit and helper generators. Since each generator has a single
responsibility, they are easy to reuse, avoiding code duplication.</p>

<p>Our first customization on the workflow will be to stop generating
stylesheets, javascripts and test fixtures for scaffolds. We can achieve
that by changing our configuration to the following:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">generators</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">orm</span>             :<span class="ruby-identifier">active_record</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">template_engine</span> :<span class="ruby-identifier">erb</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">test_framework</span>  :<span class="ruby-identifier">test_unit</span>, <span class="ruby-identifier">fixture</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">stylesheets</span>     <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">javascripts</span>     <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If we generate another resource with the scaffold generator, we can see
that stylesheets, javascripts and fixtures are not created anymore. If you
want to customize it further, for example to use DataMapper and RSpec
instead of Active Record and TestUnit, it&#39;s just a matter of adding
their gems to your application and configuring your generators.</p>

<p>To demonstrate this, we are going to create a new helper generator that
simply adds some instance variable readers. First, we create a generator
within the rails namespace, as this is where rails searches for generators
used as hooks:</p>

<pre>$ bin/rails generate generator rails/my_helper
      create  lib/generators/rails/my_helper
      create  lib/generators/rails/my_helper/my_helper_generator.rb
      create  lib/generators/rails/my_helper/USAGE
      create  lib/generators/rails/my_helper/templates</pre>

<p>After that, we can delete both the <code>templates</code> directory and the
<code>source_root</code> class method call from our new generator, because
we are not going to need them. Add the method below, so our generator looks
like the following:</p>

<pre class="ruby"><span class="ruby-comment"># lib/generators/rails/my_helper/my_helper_generator.rb</span>
<span class="ruby-keyword">class</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">MyHelperGenerator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Generators</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedBase</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create_helper_file</span>
    <span class="ruby-identifier">create_file</span> <span class="ruby-node">&quot;app/helpers/#{file_name}_helper.rb&quot;</span>, <span class="ruby-value">&lt;&lt;-FILE
module #{class_name}Helper
  attr_reader :#{plural_name}, :#{plural_name.singularize}
end
    FILE</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>We can try out our new generator by creating a helper for users:</p>

<pre>$ bin/rails generate my_helper products
      create  app/helpers/products_helper.rb</pre>

<p>And it will generate the following helper file in <code>app/helpers</code>:</p>

<pre class="ruby"><span class="ruby-keyword">module</span> <span class="ruby-constant">ProductsHelper</span>
  <span class="ruby-identifier">attr_reader</span> :<span class="ruby-identifier">products</span>, :<span class="ruby-identifier">product</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Which is what we expected. We can now tell scaffold to use our new helper
generator by editing <code>config/application.rb</code> once again:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">generators</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">orm</span>             :<span class="ruby-identifier">active_record</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">template_engine</span> :<span class="ruby-identifier">erb</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">test_framework</span>  :<span class="ruby-identifier">test_unit</span>, <span class="ruby-identifier">fixture</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">stylesheets</span>     <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">javascripts</span>     <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">helper</span>          :<span class="ruby-identifier">my_helper</span>
<span class="ruby-keyword">end</span>
</pre>

<p>and see it in action when invoking the generator:</p>

<pre>$ bin/rails generate scaffold Post body:text
      [...]
      invoke    my_helper
      create      app/helpers/posts_helper.rb</pre>

<p>We can notice on the output that our new helper was invoked instead of the
Rails default. However one thing is missing, which is tests for our new
generator and to do that, we are going to reuse old helpers test
generators.</p>

<p>Since Rails 3.0, this is easy to do due to the hooks concept. Our new
helper does not need to be focused in one specific test framework, it can
simply provide a hook and a test framework just needs to implement this
hook in order to be compatible.</p>

<p>To do that, we can change the generator this way:</p>

<pre class="ruby"><span class="ruby-comment"># lib/generators/rails/my_helper/my_helper_generator.rb</span>
<span class="ruby-keyword">class</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">MyHelperGenerator</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Generators</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedBase</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create_helper_file</span>
    <span class="ruby-identifier">create_file</span> <span class="ruby-node">&quot;app/helpers/#{file_name}_helper.rb&quot;</span>, <span class="ruby-value">&lt;&lt;-FILE
module #{class_name}Helper
  attr_reader :#{plural_name}, :#{plural_name.singularize}
end
    FILE</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">hook_for</span> :<span class="ruby-identifier">test_framework</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now, when the helper generator is invoked and TestUnit is configured as the
test framework, it will try to invoke both
<code>Rails::TestUnitGenerator</code> and
<code>TestUnit::MyHelperGenerator</code>. Since none of those are defined,
we can tell our generator to invoke
<code>TestUnit::Generators::HelperGenerator</code> instead, which is
defined since it&#39;s a Rails generator. To do that, we just need to add:</p>

<pre class="ruby"><span class="ruby-comment"># Search for :helper instead of :my_helper</span>
<span class="ruby-identifier">hook_for</span> :<span class="ruby-identifier">test_framework</span>, <span class="ruby-identifier">as</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">helper</span>
</pre>

<p>And now you can re-run scaffold for another resource and see it generating
tests as well!</p>

<h2 id="label-Customizing+Your+Workflow+by+Changing+Generators+Templates">Customizing Your Workflow by Changing Generators Templates<span><a href="#label-Customizing+Your+Workflow+by+Changing+Generators+Templates">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>In the step above we simply wanted to add a line to the generated helper,
without adding any extra functionality. There is a simpler way to do that,
and it&#39;s by replacing the templates of already existing generators, in
that case <code>Rails::Generators::HelperGenerator</code>.</p>

<p>In Rails 3.0 and above, generators don&#39;t just look in the source root
for templates, they also search for templates in other paths. And one of
them is <code>lib/templates</code>. Since we want to customize
<code>Rails::Generators::HelperGenerator</code>, we can do that by simply
making a template copy inside <code>lib/templates/rails/helper</code> with
the name <code>helper.rb</code>. So let&#39;s create that file with the
following content:</p>

<pre>module &lt;%= class_name %&gt;Helper
  attr_reader :&lt;%= plural_name %&gt;, :&lt;%= plural_name.singularize %&gt;
end</pre>

<p>and revert the last change in <code>config/application.rb</code>:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">generators</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">orm</span>             :<span class="ruby-identifier">active_record</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">template_engine</span> :<span class="ruby-identifier">erb</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">test_framework</span>  :<span class="ruby-identifier">test_unit</span>, <span class="ruby-identifier">fixture</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">stylesheets</span>     <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">javascripts</span>     <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you generate another resource, you can see that we get exactly the same
result! This is useful if you want to customize your scaffold templates
and/or layout by just creating <code>edit.html.erb</code>,
<code>index.html.erb</code> and so on inside
<code>lib/templates/erb/scaffold</code>.</p>

<h2 id="label-Adding+Generators+Fallbacks">Adding Generators Fallbacks<span><a href="#label-Adding+Generators+Fallbacks">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>One last feature about generators which is quite useful for plugin
generators is fallbacks. For example, imagine that you want to add a
feature on top of TestUnit like <a
href="https://github.com/thoughtbot/shoulda">shoulda</a> does. Since
TestUnit already implements all generators required by Rails and shoulda
just wants to overwrite part of it, there is no need for shoulda to
reimplement some generators again, it can simply tell Rails to use a
<code>TestUnit</code> generator if none was found under the
<code>Shoulda</code> namespace.</p>

<p>We can easily simulate this behavior by changing our
<code>config/application.rb</code> once again:</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">generators</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">orm</span>             :<span class="ruby-identifier">active_record</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">template_engine</span> :<span class="ruby-identifier">erb</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">test_framework</span>  :<span class="ruby-identifier">shoulda</span>, <span class="ruby-identifier">fixture</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">stylesheets</span>     <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">javascripts</span>     <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># Add a fallback!</span>
  <span class="ruby-identifier">g</span>.<span class="ruby-identifier">fallbacks</span>[:<span class="ruby-identifier">shoulda</span>] = :<span class="ruby-identifier">test_unit</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now, if you create a <a href="../../Comment.html">Comment</a> scaffold, you
will see that the shoulda generators are being invoked, and at the end,
they are just falling back to TestUnit generators:</p>

<pre>$ bin/rails generate scaffold Comment body:text
      invoke  active_record
      create    db/migrate/20130924143118_create_comments.rb
      create    app/models/comment.rb
      invoke    shoulda
      create      test/models/comment_test.rb
      create      test/fixtures/comments.yml
      invoke  resource_route
       route    resources :comments
      invoke  scaffold_controller
      create    app/controllers/comments_controller.rb
      invoke    erb
      create      app/views/comments
      create      app/views/comments/index.html.erb
      create      app/views/comments/edit.html.erb
      create      app/views/comments/show.html.erb
      create      app/views/comments/new.html.erb
      create      app/views/comments/_form.html.erb
      invoke    shoulda
      create      test/controllers/comments_controller_test.rb
      invoke    my_helper
      create      app/helpers/comments_helper.rb
      invoke      shoulda
      create        test/helpers/comments_helper_test.rb
      invoke    jbuilder
      create      app/views/comments/index.json.jbuilder
      create      app/views/comments/show.json.jbuilder
      invoke  assets
      invoke    coffee
      create      app/assets/javascripts/comments.js.coffee
      invoke    scss</pre>

<p>Fallbacks allow your generators to have a single responsibility, increasing
code reuse and reducing the amount of duplication.</p>

<h2 id="label-Application+Templates">Application Templates<span><a href="#label-Application+Templates">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Now that you&#39;ve seen how generators can be used <em>inside</em> an
application, did you know they can also be used to <em>generate</em>
applications too? This kind of generator is referred as a “template”. This
is a brief overview of the Templates API. For detailed documentation see
the <a href="rails_application_templates.html">Rails Application Templates
guide</a>.</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;rspec-rails&quot;</span>, <span class="ruby-identifier">group</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;test&quot;</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;cucumber-rails&quot;</span>, <span class="ruby-identifier">group</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;test&quot;</span>

<span class="ruby-keyword">if</span> <span class="ruby-identifier">yes?</span>(<span class="ruby-string">&quot;Would you like to install Devise?&quot;</span>)
  <span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;devise&quot;</span>
  <span class="ruby-identifier">generate</span> <span class="ruby-string">&quot;devise:install&quot;</span>
  <span class="ruby-identifier">model_name</span> = <span class="ruby-identifier">ask</span>(<span class="ruby-string">&quot;What would you like the user model to be called? [user]&quot;</span>)
  <span class="ruby-identifier">model_name</span> = <span class="ruby-string">&quot;user&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-identifier">generate</span> <span class="ruby-string">&quot;devise&quot;</span>, <span class="ruby-identifier">model_name</span>
<span class="ruby-keyword">end</span>
</pre>

<p>In the above template we specify that the application relies on the
<code>rspec-rails</code> and <code>cucumber-rails</code> gem so these two
will be added to the <code>test</code> group in the <code>Gemfile</code>.
Then we pose a question to the user about whether or not they would like to
install Devise. If the user replies “y” or “yes” to this question, then the
template will add Devise to the <code>Gemfile</code> outside of any group
and then runs the <code>devise:install</code> generator. This template then
takes the users input and runs the <code>devise</code> generator, with the
user&#39;s answer from the last question being passed to this generator.</p>

<p>Imagine that this template was in a file called <code>template.rb</code>.
We can use it to modify the outcome of the <code>rails new</code> command
by using the <code>-m</code> option and passing in the filename:</p>

<pre>$ rails new thud -m template.rb</pre>

<p>This command will generate the <code>Thud</code> application, and then
apply the template to the generated output.</p>

<p>Templates don&#39;t have to be stored on the local system, the
<code>-m</code> option also supports online templates:</p>

<pre>$ rails new thud -m https://gist.github.com/radar/722911/raw/</pre>

<p>Whilst the final section of this guide doesn&#39;t cover how to generate
the most awesome template known to man, it will take you through the
methods available at your disposal so that you can develop it yourself.
These same methods are also available for generators.</p>

<h2 id="label-Generator+methods">Generator methods<span><a href="#label-Generator+methods">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>The following are methods available for both generators and templates for
Rails.</p>

<p>NOTE: Methods provided by Thor are not covered this guide and can be found
in <a
href="http://rdoc.info/github/erikhuda/thor/master/Thor/Actions.html">Thor’s
documentation</a></p>

<h3 id="label-gem"><code>gem</code><span><a href="#label-gem">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Specifies a gem dependency of the application.</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;rspec&quot;</span>, <span class="ruby-identifier">group</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;test&quot;</span>, <span class="ruby-identifier">version</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;2.1.0&quot;</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;devise&quot;</span>, <span class="ruby-string">&quot;1.1.5&quot;</span>
</pre>

<p>Available options are:</p>
<ul><li>
<p><code>:group</code> - The group in the <code>Gemfile</code> where this gem
should go.</p>
</li><li>
<p><code>:version</code> - The version string of the gem you want to use. Can
also be specified as the second argument to the method.</p>
</li><li>
<p><code>:git</code> - The URL to the git repository for this gem.</p>
</li></ul>

<p>Any additional options passed to this method are put on the end of the
line:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;devise&quot;</span>, <span class="ruby-identifier">git</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;git://github.com/plataformatec/devise&quot;</span>, <span class="ruby-identifier">branch</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;master&quot;</span>
</pre>

<p>The above code will put the following line into <code>Gemfile</code>:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;devise&quot;</span>, <span class="ruby-identifier">git</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;git://github.com/plataformatec/devise&quot;</span>, <span class="ruby-identifier">branch</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;master&quot;</span>
</pre>

<h3 id="label-gem_group"><code>gem_group</code><span><a href="#label-gem_group">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Wraps gem entries inside a group:</p>

<pre class="ruby"><span class="ruby-identifier">gem_group</span> :<span class="ruby-identifier">development</span>, :<span class="ruby-identifier">test</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">gem</span> <span class="ruby-string">&quot;rspec-rails&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-add_source"><code>add_source</code><span><a href="#label-add_source">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Adds a specified source to <code>Gemfile</code>:</p>

<pre class="ruby"><span class="ruby-identifier">add_source</span> <span class="ruby-string">&quot;http://gems.github.com&quot;</span>
</pre>

<h3 id="label-inject_into_file"><code>inject_into_file</code><span><a href="#label-inject_into_file">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Injects a block of code into a defined position in your file.</p>

<pre class="ruby"><span class="ruby-identifier">inject_into_file</span> <span class="ruby-string">&#39;name_of_file.rb&#39;</span>, <span class="ruby-identifier">after</span><span class="ruby-operator">:</span> <span class="ruby-node">&quot;#The code goes below this line. Don&#39;t forget the Line break at the end\n&quot;</span> <span class="ruby-identifier">do</span> <span class="ruby-value">&lt;&lt;-&#39;RUBY&#39;
  puts &quot;Hello World&quot;
RUBY</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-gsub_file"><code>gsub_file</code><span><a href="#label-gsub_file">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Replaces text inside a file.</p>

<pre class="ruby"><span class="ruby-identifier">gsub_file</span> <span class="ruby-string">&#39;name_of_file.rb&#39;</span>, <span class="ruby-string">&#39;method.to_be_replaced&#39;</span>, <span class="ruby-string">&#39;method.the_replacing_code&#39;</span>
</pre>

<p>Regular Expressions can be used to make this method more precise. You can
also use append_file and prepend_file in the same way to place code at the
beginning and end of a file respectively.</p>

<h3 id="label-application"><code>application</code><span><a href="#label-application">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Adds a line to <code>config/application.rb</code> directly after the
application class definition.</p>

<pre class="ruby"><span class="ruby-identifier">application</span> <span class="ruby-string">&quot;config.asset_host = &#39;http://example.com&#39;&quot;</span>
</pre>

<p>This method can also take a block:</p>

<pre class="ruby"><span class="ruby-identifier">application</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;config.asset_host = &#39;http://example.com&#39;&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Available options are:</p>
<ul><li>
<p><code>:env</code> - Specify an environment for this configuration option.
If you wish to use this option with the block syntax the recommended syntax
is as follows:</p>
</li></ul>

<pre class="ruby"><span class="ruby-identifier">application</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">env</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;development&quot;</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;config.asset_host = &#39;http://localhost:3000&#39;&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-git"><code>git</code><span><a href="#label-git">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Runs the specified git command:</p>

<pre class="ruby"><span class="ruby-identifier">git</span> :<span class="ruby-identifier">init</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">add</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;.&quot;</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">commit</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;-m First commit!&quot;</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">add</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;onefile.rb&quot;</span>, <span class="ruby-identifier">rm</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;badfile.cxx&quot;</span>
</pre>

<p>The values of the hash here being the arguments or options passed to the
specific git command. As per the final example shown here, multiple git
commands can be specified at a time, but the order of their running is not
guaranteed to be the same as the order that they were specified in.</p>

<h3 id="label-vendor"><code>vendor</code><span><a href="#label-vendor">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Places a file into <code>vendor</code> which contains the specified code.</p>

<pre class="ruby"><span class="ruby-identifier">vendor</span> <span class="ruby-string">&quot;sekrit.rb&quot;</span>, <span class="ruby-string">&#39;#top secret stuff&#39;</span>
</pre>

<p>This method also takes a block:</p>

<pre class="ruby"><span class="ruby-identifier">vendor</span> <span class="ruby-string">&quot;seeds.rb&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;puts &#39;in your app, seeding your database&#39;&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-lib"><code>lib</code><span><a href="#label-lib">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Places a file into <code>lib</code> which contains the specified code.</p>

<pre class="ruby"><span class="ruby-identifier">lib</span> <span class="ruby-string">&quot;special.rb&quot;</span>, <span class="ruby-string">&quot;p Rails.root&quot;</span>
</pre>

<p>This method also takes a block:</p>

<pre class="ruby"><span class="ruby-identifier">lib</span> <span class="ruby-string">&quot;super_special.rb&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Super special!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-rakefile"><code>rakefile</code><span><a href="#label-rakefile">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Creates a Rake file in the <code>lib/tasks</code> directory of the
application.</p>

<pre class="ruby"><span class="ruby-identifier">rakefile</span> <span class="ruby-string">&quot;test.rake&quot;</span>, <span class="ruby-string">&quot;hello there&quot;</span>
</pre>

<p>This method also takes a block:</p>

<pre class="ruby"><span class="ruby-identifier">rakefile</span> <span class="ruby-string">&quot;test.rake&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">%Q{
    task rock: :environment do
      puts &quot;Rockin&#39;&quot;
    end
  }</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-initializer"><code>initializer</code><span><a href="#label-initializer">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Creates an initializer in the <code>config/initializers</code> directory of
the application:</p>

<pre class="ruby"><span class="ruby-identifier">initializer</span> <span class="ruby-string">&quot;begin.rb&quot;</span>, <span class="ruby-string">&quot;puts &#39;this is the beginning&#39;&quot;</span>
</pre>

<p>This method also takes a block, expected to return a string:</p>

<pre class="ruby"><span class="ruby-identifier">initializer</span> <span class="ruby-string">&quot;begin.rb&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;puts &#39;this is the beginning&#39;&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-generate"><code>generate</code><span><a href="#label-generate">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Runs the specified generator where the first argument is the generator name
and the remaining arguments are passed directly to the generator.</p>

<pre class="ruby"><span class="ruby-identifier">generate</span> <span class="ruby-string">&quot;scaffold&quot;</span>, <span class="ruby-string">&quot;forums title:string description:text&quot;</span>
</pre>

<h3 id="label-rake"><code>rake</code><span><a href="#label-rake">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Runs the specified Rake task.</p>

<pre class="ruby"><span class="ruby-identifier">rake</span> <span class="ruby-string">&quot;db:migrate&quot;</span>
</pre>

<p>Available options are:</p>
<ul><li>
<p><code>:env</code> - Specifies the environment in which to run this rake
task.</p>
</li><li>
<p><code>:sudo</code> - Whether or not to run this task using
<code>sudo</code>. Defaults to <code>false</code>.</p>
</li></ul>

<h3 id="label-capify%21"><code>capify!</code><span><a href="#label-capify%21">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Runs the <code>capify</code> command from Capistrano at the root of the
application which generates Capistrano configuration.</p>

<pre class="ruby"><span class="ruby-identifier">capify!</span>
</pre>

<h3 id="label-route"><code>route</code><span><a href="#label-route">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Adds text to the <code>config/routes.rb</code> file:</p>

<pre class="ruby"><span class="ruby-identifier">route</span> <span class="ruby-string">&quot;resources :people&quot;</span>
</pre>

<h3 id="label-readme"><code>readme</code><span><a href="#label-readme">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Output the contents of a file in the template&#39;s
<code>source_path</code>, usually a <a
href="../../README_md.html">README</a>.</p>

<pre class="ruby"><span class="ruby-identifier">readme</span> <span class="ruby-string">&quot;README&quot;</span>
</pre>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

