<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>working_with_javascript_in_rails - rails-4.1.8 Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Working+with+JavaScript+in+Rails">Working with JavaScript in Rails</a>
    <li><a href="#label-An+Introduction+to+Ajax">An Introduction to Ajax</a>
    <li><a href="#label-Unobtrusive+JavaScript">Unobtrusive JavaScript</a>
    <li><a href="#label-Built-in+Helpers">Built-in Helpers</a>
    <li><a href="#label-form_for">form_for</a>
    <li><a href="#label-form_tag">form_tag</a>
    <li><a href="#label-link_to">link_to</a>
    <li><a href="#label-button_to">button_to</a>
    <li><a href="#label-Server-Side+Concerns">Server-Side Concerns</a>
    <li><a href="#label-A+Simple+Example">A Simple Example</a>
    <li><a href="#label-Turbolinks">Turbolinks</a>
    <li><a href="#label-How+Turbolinks+Works">How Turbolinks Works</a>
    <li><a href="#label-Page+Change+Events">Page Change Events</a>
    <li><a href="#label-Other+Resources">Other Resources</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile.html">Gemfile</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../guides/code/getting_started/README_rdoc.html">README</a>
  
    <li><a href="../../guides/code/getting_started/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/comments_js_coffee.html">comments.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/posts_js_coffee.html">posts.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/welcome_js_coffee.html">welcome.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/comments_css_scss.html">comments.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/posts_css_scss.html">posts.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/welcome_css_scss.html">welcome.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/config_ru.html">config.ru</a>
  
    <li><a href="../../guides/code/getting_started/public/404_html.html">404.html</a>
  
    <li><a href="../../guides/code/getting_started/public/422_html.html">422.html</a>
  
    <li><a href="../../guides/code/getting_started/public/500_html.html">500.html</a>
  
    <li><a href="../../guides/code/getting_started/public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../guides/code/getting_started/public/robots_txt.html">robots</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/migrations_md.html">migrations</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/working_with_javascript_in_rails.md">

<h1 id="label-Working+with+JavaScript+in+Rails">Working with JavaScript in Rails<span><a href="#label-Working+with+JavaScript+in+Rails">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>This guide covers the built-in Ajax/JavaScript functionality of Rails (and
more); it will enable you to create rich and dynamic Ajax applications with
ease!</p>

<p>After reading this guide, you will know:</p>
<ul><li>
<p>The basics of Ajax.</p>
</li><li>
<p>Unobtrusive JavaScript.</p>
</li><li>
<p>How Rails&#39; built-in helpers assist you.</p>
</li><li>
<p>How to handle Ajax on the server side.</p>
</li><li>
<p>The Turbolinks gem.</p>
</li></ul>
<hr>

<h2 id="label-An+Introduction+to+Ajax">An Introduction to Ajax<span><a href="#label-An+Introduction+to+Ajax">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>In order to understand Ajax, you must first understand what a web browser
does normally.</p>

<p>When you type <code>http://localhost:3000</code> into your browser&#39;s
address bar and hit &#39;Go,&#39; the browser (your &#39;client&#39;) makes
a request to the server. It parses the response, then fetches all
associated assets, like JavaScript files, stylesheets and images. It then
assembles the page. If you click a link, it does the same process: fetch
the page, fetch the assets, put it all together, show you the results. This
is called the &#39;request response cycle.&#39;</p>

<p>JavaScript can also make requests to the server, and parse the response. It
also has the ability to update information on the page. Combining these two
powers, a JavaScript writer can make a web page that can update just parts
of itself, without needing to get the full page data from the server. This
is a powerful technique that we call Ajax.</p>

<p>Rails ships with CoffeeScript by default, and so the rest of the examples
in this guide will be in CoffeeScript. All of these lessons, of course,
apply to vanilla JavaScript as well.</p>

<p>As an example, here&#39;s some CoffeeScript code that makes an Ajax request
using the jQuery library:</p>

<pre>$.ajax(url: &quot;/test&quot;).done (html) -&gt;
  $(&quot;#results&quot;).append html</pre>

<p>This code fetches data from “/test”, and then appends the result to the
<code>div</code> with an id of <code>results</code>.</p>

<p>Rails provides quite a bit of built-in support for building web pages with
this technique. You rarely have to write this code yourself. The rest of
this guide will show you how Rails can help you write websites in this way,
but it&#39;s all built on top of this fairly simple technique.</p>

<h2 id="label-Unobtrusive+JavaScript">Unobtrusive JavaScript<span><a href="#label-Unobtrusive+JavaScript">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Rails uses a technique called “Unobtrusive JavaScript” to handle attaching
JavaScript to the DOM. This is generally considered to be a best-practice
within the frontend community, but you may occasionally read tutorials that
demonstrate other ways.</p>

<p>Here&#39;s the simplest way to write JavaScript. You may see it referred to
as &#39;inline JavaScript&#39;:</p>

<pre>&lt;a href=&quot;#&quot; onclick=&quot;this.style.backgroundColor=&#39;#990000&#39;&quot;&gt;Paint it red&lt;/a&gt;</pre>

<p>When clicked, the link background will become red. Here&#39;s the problem:
what happens when we have lots of JavaScript we want to execute on a click?</p>

<pre>&lt;a href=&quot;#&quot; onclick=&quot;this.style.backgroundColor=&#39;#009900&#39;;this.style.color=&#39;#FFFFFF&#39;;&quot;&gt;Paint it green&lt;/a&gt;</pre>

<p>Awkward, right? We could pull the function definition out of the click
handler, and turn it into CoffeeScript:</p>

<pre>paintIt = (element, backgroundColor, textColor) -&gt;
  element.style.backgroundColor = backgroundColor
  if textColor?
    element.style.color = textColor</pre>

<p>And then on our page:</p>

<pre>&lt;a href=&quot;#&quot; onclick=&quot;paintIt(this, &#39;#990000&#39;)&quot;&gt;Paint it red&lt;/a&gt;</pre>

<p>That&#39;s a little bit better, but what about multiple links that have the
same effect?</p>

<pre>&lt;a href=&quot;#&quot; onclick=&quot;paintIt(this, &#39;#990000&#39;)&quot;&gt;Paint it red&lt;/a&gt;
&lt;a href=&quot;#&quot; onclick=&quot;paintIt(this, &#39;#009900&#39;, &#39;#FFFFFF&#39;)&quot;&gt;Paint it green&lt;/a&gt;
&lt;a href=&quot;#&quot; onclick=&quot;paintIt(this, &#39;#000099&#39;, &#39;#FFFFFF&#39;)&quot;&gt;Paint it blue&lt;/a&gt;</pre>

<p>Not very DRY, eh? We can fix this by using events instead. We&#39;ll add a
<code>data-*</code> attribute to our link, and then bind a handler to the
click event of every link that has that attribute:</p>

<pre>paintIt = (element, backgroundColor, textColor) -&gt;
  element.style.backgroundColor = backgroundColor
  if textColor?
    element.style.color = textColor

$ -&gt;
  $(&quot;a[data-background-color]&quot;).click -&gt;
    backgroundColor = $(this).data(&quot;background-color&quot;)
    textColor = $(this).data(&quot;text-color&quot;)
    paintIt(this, backgroundColor, textColor)</pre>

<pre>&lt;a href=&quot;#&quot; data-background-color=&quot;#990000&quot;&gt;Paint it red&lt;/a&gt;
&lt;a href=&quot;#&quot; data-background-color=&quot;#009900&quot; data-text-color=&quot;#FFFFFF&quot;&gt;Paint it green&lt;/a&gt;
&lt;a href=&quot;#&quot; data-background-color=&quot;#000099&quot; data-text-color=&quot;#FFFFFF&quot;&gt;Paint it blue&lt;/a&gt;</pre>

<p>We call this &#39;unobtrusive&#39; JavaScript because we&#39;re no longer
mixing our JavaScript into our HTML. We&#39;ve properly separated our
concerns, making future change easy. We can easily add behavior to any link
by adding the data attribute. We can run all of our JavaScript through a
minimizer and concatenator. We can serve our entire JavaScript bundle on
every page, which means that it&#39;ll get downloaded on the first page
load and then be cached on every page after that. Lots of little benefits
really add up.</p>

<p>The Rails team strongly encourages you to write your CoffeeScript (and
JavaScript) in this style, and you can expect that many libraries will also
follow this pattern.</p>

<h2 id="label-Built-in+Helpers">Built-in Helpers<span><a href="#label-Built-in+Helpers">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Rails provides a bunch of view helper methods written in Ruby to assist you
in generating HTML. Sometimes, you want to add a little Ajax to those
elements, and Rails has got your back in those cases.</p>

<p>Because of Unobtrusive JavaScript, the Rails “Ajax helpers” are actually in
two parts: the JavaScript half and the Ruby half.</p>

<p><a
href="https://github.com/rails/jquery-ujs/blob/master/src/rails.js">rails.js</a>
provides the JavaScript half, and the regular Ruby view helpers add
appropriate tags to your DOM. The CoffeeScript in rails.js then listens for
these attributes, and attaches appropriate handlers.</p>

<h3 id="label-form_for">form_for<span><a href="#label-form_for">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><a
href="http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for">form_for</a>
is a helper that assists with writing forms. <code>form_for</code> takes a
<code>:remote</code> option. It works like this:</p>

<pre>&lt;%= form_for(@post, remote: true) do |f| %&gt;
  ...
&lt;% end %&gt;</pre>

<p>This will generate the following HTML:</p>

<pre>&lt;form accept-charset=&quot;UTF-8&quot; action=&quot;/posts&quot; class=&quot;new_post&quot; data-remote=&quot;true&quot; id=&quot;new_post&quot; method=&quot;post&quot;&gt;
  ...
&lt;/form&gt;</pre>

<p>Note the <code>data-remote=&quot;true&quot;</code>. Now, the form will be
submitted by Ajax rather than by the browser&#39;s normal submit mechanism.</p>

<p>You probably don&#39;t want to just sit there with a filled out
<code>&lt;form&gt;</code>, though. You probably want to do something upon a
successful submission. To do that, bind to the <code>ajax:success</code>
event. On failure, use <code>ajax:error</code>. Check it out:</p>

<pre>$(document).ready -&gt;
  $(&quot;#new_post&quot;).on(&quot;ajax:success&quot;, (e, data, status, xhr) -&gt;
    $(&quot;#new_post&quot;).append xhr.responseText
  ).on &quot;ajax:error&quot;, (e, xhr, status, error) -&gt;
    $(&quot;#new_post&quot;).append &quot;&lt;p&gt;ERROR&lt;/p&gt;&quot;</pre>

<p>Obviously, you&#39;ll want to be a bit more sophisticated than that, but
it&#39;s a start. You can see more about the events <a
href="https://github.com/rails/jquery-ujs/wiki/ajax">in the jquery-ujs
wiki</a>.</p>

<h3 id="label-form_tag">form_tag<span><a href="#label-form_tag">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><a
href="http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag">form_tag</a>
is very similar to <code>form_for</code>. It has a <code>:remote</code>
option that you can use like this:</p>

<pre>&lt;%= form_tag(&#39;/posts&#39;, remote: true) do %&gt;
  ...
&lt;% end %&gt;</pre>

<p>This will generate the following HTML:</p>

<pre>&lt;form accept-charset=&quot;UTF-8&quot; action=&quot;/posts&quot; data-remote=&quot;true&quot; method=&quot;post&quot;&gt;
  ...
&lt;/form&gt;</pre>

<p>Everything else is the same as <code>form_for</code>. See its documentation
for full details.</p>

<h3 id="label-link_to">link_to<span><a href="#label-link_to">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><a
href="http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to">link_to</a>
is a helper that assists with generating links. It has a
<code>:remote</code> option you can use like this:</p>

<pre>&lt;%= link_to &quot;a post&quot;, @post, remote: true %&gt;</pre>

<p>which generates</p>

<pre>&lt;a href=&quot;/posts/1&quot; data-remote=&quot;true&quot;&gt;a post&lt;/a&gt;</pre>

<p>You can bind to the same Ajax events as <code>form_for</code>. Here&#39;s
an example. Let&#39;s assume that we have a list of posts that can be
deleted with just one click. We would generate some HTML like this:</p>

<pre>&lt;%= link_to &quot;Delete post&quot;, @post, remote: true, method: :delete %&gt;</pre>

<p>and write some CoffeeScript like this:</p>

<pre>$ -&gt;
  $(&quot;a[data-remote]&quot;).on &quot;ajax:success&quot;, (e, data, status, xhr) -&gt;
    alert &quot;The post was deleted.&quot;</pre>

<h3 id="label-button_to">button_to<span><a href="#label-button_to">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><a
href="http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to">button_to</a>
is a helper that helps you create buttons. It has a <code>:remote</code>
option that you can call like this:</p>

<pre>&lt;%= button_to &quot;A post&quot;, @post, remote: true %&gt;</pre>

<p>this generates</p>

<pre>&lt;form action=&quot;/posts/1&quot; class=&quot;button_to&quot; data-remote=&quot;true&quot; method=&quot;post&quot;&gt;
  &lt;div&gt;&lt;input type=&quot;submit&quot; value=&quot;A post&quot;&gt;&lt;/div&gt;
&lt;/form&gt;</pre>

<p>Since it&#39;s just a <code>&lt;form&gt;</code>, all of the information on
<code>form_for</code> also applies.</p>

<h2 id="label-Server-Side+Concerns">Server-Side Concerns<span><a href="#label-Server-Side+Concerns">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Ajax isn&#39;t just client-side, you also need to do some work on the
server side to support it. Often, people like their Ajax requests to return
JSON rather than HTML. Let&#39;s discuss what it takes to make that happen.</p>

<h3 id="label-A+Simple+Example">A Simple Example<span><a href="#label-A+Simple+Example">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Imagine you have a series of users that you would like to display and
provide a form on that same page to create a new user. The index action of
your controller looks like this:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">UsersController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
    <span class="ruby-ivar">@users</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">all</span>
    <span class="ruby-ivar">@user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># ...</span>
</pre>

<p>The index view (<code>app/views/users/index.html.erb</code>) contains:</p>

<pre>&lt;b&gt;Users&lt;/b&gt;

&lt;ul id=&quot;users&quot;&gt;
&lt;%= render @users %&gt;
&lt;/ul&gt;

&lt;br&gt;

&lt;%= form_for(@user, remote: true) do |f| %&gt;
  &lt;%= f.label :name %&gt;&lt;br&gt;
  &lt;%= f.text_field :name %&gt;
  &lt;%= f.submit %&gt;
&lt;% end %&gt;</pre>

<p>The <code>app/views/users/_user.html.erb</code> partial contains the
following:</p>

<pre>&lt;li&gt;&lt;%= user.name %&gt;&lt;/li&gt;</pre>

<p>The top portion of the index page displays the users. The bottom portion
provides a form to create a new user.</p>

<p>The bottom form will call the <code>create</code> action on the
<code>UsersController</code>. Because the form&#39;s remote option is set
to true, the request will be posted to the <code>UsersController</code> as
an Ajax request, looking for JavaScript. In order to serve that request,
the <code>create</code> action of your controller would look like this:</p>

<pre class="ruby"><span class="ruby-comment"># app/controllers/users_controller.rb</span>
  <span class="ruby-comment"># ......</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
    <span class="ruby-ivar">@user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">user</span>])

    <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">save</span>
        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span> <span class="ruby-ivar">@user</span>, <span class="ruby-identifier">notice</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;User was successfully created.&#39;</span> }
        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span>   {}
        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">json</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">created</span>, <span class="ruby-identifier">location</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span> }
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;new&quot;</span> }
        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">json</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@user</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">unprocessable_entity</span> }
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
</pre>

<p>Notice the format.js in the <code>respond_to</code> block; that allows the
controller to respond to your Ajax request. You then have a corresponding
<code>app/views/users/create.js.erb</code> view file that generates the
actual JavaScript code that will be sent and executed on the client side.</p>

<pre>$(&quot;&lt;%= escape_javascript(render @user) %&gt;&quot;).appendTo(&quot;#users&quot;);</pre>

<h2 id="label-Turbolinks">Turbolinks<span><a href="#label-Turbolinks">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Rails 4 ships with the <a
href="https://github.com/rails/turbolinks">Turbolinks gem</a>. This gem
uses Ajax to speed up page rendering in most applications.</p>

<h3 id="label-How+Turbolinks+Works">How Turbolinks Works<span><a href="#label-How+Turbolinks+Works">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Turbolinks attaches a click handler to all <code>&lt;a&gt;</code> on the
page. If your browser supports <a
href="https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState(\).C2.A0method">PushState</a>,
Turbolinks will make an Ajax request for the page, parse the response, and
replace the entire <code>&lt;body&gt;</code> of the page with the
<code>&lt;body&gt;</code> of the response. It will then use PushState to
change the URL to the correct one, preserving refresh semantics and giving
you pretty URLs.</p>

<p>The only thing you have to do to enable Turbolinks is have it in your <a
href="../code/getting_started/Gemfile.html">Gemfile</a>, and put <code>//=
require turbolinks</code> in your CoffeeScript manifest, which is usually
<code>app/assets/javascripts/application.js</code>.</p>

<p>If you want to disable Turbolinks for certain links, add a
<code>data-no-turbolink</code> attribute to the tag:</p>

<pre>&lt;a href=&quot;...&quot; data-no-turbolink&gt;No turbolinks here&lt;/a&gt;.</pre>

<h3 id="label-Page+Change+Events">Page Change Events<span><a href="#label-Page+Change+Events">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>When writing CoffeeScript, you&#39;ll often want to do some sort of
processing upon page load. With jQuery, you&#39;d write something like
this:</p>

<pre>$(document).ready -&gt;
  alert &quot;page has loaded!&quot;</pre>

<p>However, because Turbolinks overrides the normal page loading process, the
event that this relies on will not be fired. If you have code that looks
like this, you must change your code to do this instead:</p>

<pre>$(document).on &quot;page:change&quot;, -&gt;
  alert &quot;page has loaded!&quot;</pre>

<p>For more details, including other events you can bind to, check out <a
href="https://github.com/rails/turbolinks/blob/master/README.md">the
Turbolinks README</a>.</p>

<h2 id="label-Other+Resources">Other Resources<span><a href="#label-Other+Resources">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Here are some helpful links to help you learn even more:</p>
<ul><li>
<p><a href="https://github.com/rails/jquery-ujs/wiki">jquery-ujs wiki</a></p>
</li><li>
<p><a
href="https://github.com/rails/jquery-ujs/wiki/External-articles">jquery-ujs
list of external articles</a></p>
</li><li>
<p><a
href="http://www.alfajango.com/blog/rails-3-remote-links-and-forms/">Rails
3 Remote Links and Forms: A Definitive Guide</a></p>
</li><li>
<p><a
href="http://railscasts.com/episodes/205-unobtrusive-javascript">Railscasts:
Unobtrusive JavaScript</a></p>
</li><li>
<p><a href="http://railscasts.com/episodes/390-turbolinks">Railscasts:
Turbolinks</a></p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

