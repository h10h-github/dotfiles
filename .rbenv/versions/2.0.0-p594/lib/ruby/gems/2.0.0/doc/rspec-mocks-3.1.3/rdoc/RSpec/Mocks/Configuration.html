<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class RSpec::Mocks::Configuration - rspec-mocks-3.1.3 Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-add_stub_and_should_receive_to">#add_stub_and_should_receive_to</a>
    
    <li ><a href="#method-i-patch_marshal_to_support_partial_doubles-3D">#patch_marshal_to_support_partial_doubles=</a>
    
    <li ><a href="#method-i-reset_syntaxes_to_default">#reset_syntaxes_to_default</a>
    
    <li ><a href="#method-i-syntax">#syntax</a>
    
    <li ><a href="#method-i-syntax-3D">#syntax=</a>
    
    <li ><a href="#method-i-transfer_nested_constants-3F">#transfer_nested_constants?</a>
    
    <li ><a href="#method-i-verify_doubled_constant_names-3F">#verify_doubled_constant_names?</a>
    
    <li ><a href="#method-i-verify_partial_doubles-3D">#verify_partial_doubles=</a>
    
    <li ><a href="#method-i-verify_partial_doubles-3F">#verify_partial_doubles?</a>
    
    <li ><a href="#method-i-yield_receiver_to_any_instance_implementation_blocks-3F">#yield_receiver_to_any_instance_implementation_blocks?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-RSpec::Mocks::Configuration">
  <h1 id="class-RSpec::Mocks::Configuration" class="class">
    class RSpec::Mocks::Configuration
  </h1>

  <section class="description">
    
<p>Provides configuration options for rspec-mocks.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-transfer_nested_constants" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">transfer_nested_constants</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p>Sets the default for the `transfer_nested_constants` option when stubbing
constants.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-verify_doubled_constant_names" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">verify_doubled_constant_names</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p>When this is set to true, an error will be raised when `instance_double` or
`class_double` is given the name of an undefined constant. You probably
only want to set this when running your entire test suite, with all
production code loaded. Setting this for an isolated unit test will prevent
you from being able to isolate it!</p>
        
        </div>
      </div>
      
      <div id="attribute-i-yield_receiver_to_any_instance_implementation_blocks" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">yield_receiver_to_any_instance_implementation_blocks</span><span
            class="attribute-access-type">[W]</span>
        </div>

        <div class="method-description">
        
        <p>Sets whether or not RSpec will yield the receiving instance of a message to
blocks that are used for any_instance stub implementations. When set, the
first yielded argument will be the receiving instance. Defaults to `true`.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-constant">RSpec</span>.<span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rspec</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">rspec</span>.<span class="ruby-identifier">mock_with</span> :<span class="ruby-identifier">rspec</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mocks</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mocks</span>.<span class="ruby-identifier">yield_receiver_to_any_instance_implementation_blocks</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 5</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
  <span class="ruby-ivar">@yield_receiver_to_any_instance_implementation_blocks</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@verify_doubled_constant_names</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@transfer_nested_constants</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@verify_partial_doubles</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_stub_and_should_receive_to" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_stub_and_should_receive_to</span><span
            class="method-args">(*modules)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds `stub` and `should_receive` to the given modules or classes. This is
usually only necessary if you application uses some proxy classes that
“strip themselves down” to a bare minimum set of methods and remove `stub`
and `should_receive` in the process.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-constant">RSpec</span>.<span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rspec</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">rspec</span>.<span class="ruby-identifier">mock_with</span> :<span class="ruby-identifier">rspec</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mocks</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">mocks</span>.<span class="ruby-identifier">add_stub_and_should_receive_to</span> <span class="ruby-constant">Delegator</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="add_stub_and_should_receive_to-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_stub_and_should_receive_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">modules</span>)
  <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mod</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">enable_should</span>(<span class="ruby-identifier">mod</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-patch_marshal_to_support_partial_doubles-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">patch_marshal_to_support_partial_doubles=</span><span
            class="method-args">(val)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Monkey-patch `Marshal.dump` to enable dumping of mocked or stubbed objects.
By default this will not work since RSpec mocks works by adding singleton
methods that cannot be serialized. This patch removes these singleton
methods before serialization. Setting to falsey removes the patch.</p>

<p>This method is idempotent.</p>
          
          

          
          <div class="method-source-code" id="patch_marshal_to_support_partial_doubles-3D-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">patch_marshal_to_support_partial_doubles=</span>(<span class="ruby-identifier">val</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
    <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span><span class="ruby-operator">::</span><span class="ruby-constant">MarshalExtension</span>.<span class="ruby-identifier">patch!</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span><span class="ruby-operator">::</span><span class="ruby-constant">MarshalExtension</span>.<span class="ruby-identifier">unpatch!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset_syntaxes_to_default" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset_syntaxes_to_default</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@api private Resets the configured syntax to the default.</p>
          
          

          
          <div class="method-source-code" id="reset_syntaxes_to_default-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_syntaxes_to_default</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">syntax</span> = [<span class="ruby-value">:should</span>, <span class="ruby-value">:expect</span>]
  <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span><span class="ruby-operator">::</span><span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">warn_about_should!</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-syntax" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">syntax</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with a list of syntaxes that are enabled.</p>

<p>@example</p>

<pre>unless RSpec::Mocks.configuration.syntax.include?(:expect)
  raise &quot;this RSpec extension gem requires the rspec-mocks `:expect` syntax&quot;
end</pre>
          
          

          
          <div class="method-source-code" id="syntax-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">syntax</span>
  <span class="ruby-identifier">syntaxes</span> = []
  <span class="ruby-identifier">syntaxes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:should</span>  <span class="ruby-keyword">if</span> <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">should_enabled?</span>
  <span class="ruby-identifier">syntaxes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:expect</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">expect_enabled?</span>
  <span class="ruby-identifier">syntaxes</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-syntax-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">syntax=</span><span
            class="method-args">(*values)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Provides the ability to set either `expect`, `should` or both syntaxes.
RSpec uses `expect` syntax by default. This is needed if you want to
explicitly enable `should` syntax and/or explicitly disable `expect`
syntax.</p>

<p>@example</p>

<pre class="ruby"> <span class="ruby-constant">RSpec</span>.<span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rspec</span><span class="ruby-operator">|</span>
   <span class="ruby-identifier">rspec</span>.<span class="ruby-identifier">mock_with</span> :<span class="ruby-identifier">rspec</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mocks</span><span class="ruby-operator">|</span>
     <span class="ruby-identifier">mocks</span>.<span class="ruby-identifier">syntax</span> = [:<span class="ruby-identifier">expect</span>, :<span class="ruby-identifier">should</span>]
   <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="syntax-3D-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">syntax=</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
  <span class="ruby-identifier">syntaxes</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">syntaxes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:expect</span>)
    <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">enable_expect</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">disable_expect</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">syntaxes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:should</span>)
    <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">enable_should</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Syntax</span>.<span class="ruby-identifier">disable_should</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transfer_nested_constants-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transfer_nested_constants?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="transfer_nested_constants-3F-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transfer_nested_constants?</span>
  <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@transfer_nested_constants</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify_doubled_constant_names-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify_doubled_constant_names?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verify_doubled_constant_names-3F-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 96</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">verify_doubled_constant_names?</span>
  <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@verify_doubled_constant_names</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify_partial_doubles-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify_partial_doubles=</span><span
            class="method-args">(val)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>When set to true, partial mocks will be verified the same as object
doubles. Any stubs will have their arguments checked against the original
method, and methods that do not exist cannot be stubbed.</p>
          
          

          
          <div class="method-source-code" id="verify_partial_doubles-3D-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">verify_partial_doubles=</span>(<span class="ruby-identifier">val</span>)
  <span class="ruby-ivar">@verify_partial_doubles</span> = <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verify_partial_doubles-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verify_partial_doubles?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verify_partial_doubles-3F-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 122</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">verify_partial_doubles?</span>
  <span class="ruby-ivar">@verify_partial_doubles</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-yield_receiver_to_any_instance_implementation_blocks-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">yield_receiver_to_any_instance_implementation_blocks?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="yield_receiver_to_any_instance_implementation_blocks-3F-source">
            <pre><span class="ruby-comment"># File lib/rspec/mocks/configuration.rb, line 12</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">yield_receiver_to_any_instance_implementation_blocks?</span>
  <span class="ruby-ivar">@yield_receiver_to_any_instance_implementation_blocks</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

