<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ActiveRecord::Core - activerecord-4.2.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><span class="extend">ActiveSupport::Concern</span>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-configurations">::configurations</a>
    
    <li ><a href="#method-c-configurations-3D">::configurations=</a>
    
    <li ><a href="#method-c-connection_handler">::connection_handler</a>
    
    <li ><a href="#method-c-connection_handler-3D">::connection_handler=</a>
    
    <li ><a href="#method-c-disable_implicit_join_references-3D">::disable_implicit_join_references=</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li class="calls-super" ><a href="#method-i-3C-3D-3E">#&lt;=&gt;</a>
    
    <li class="calls-super" ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-clone">#clone</a>
    
    <li ><a href="#method-i-connection_handler">#connection_handler</a>
    
    <li ><a href="#method-i-custom_inspect_method_defined-3F">#custom_inspect_method_defined?</a>
    
    <li ><a href="#method-i-dup">#dup</a>
    
    <li ><a href="#method-i-encode_with">#encode_with</a>
    
    <li ><a href="#method-i-eql-3F">#eql?</a>
    
    <li ><a href="#method-i-freeze">#freeze</a>
    
    <li ><a href="#method-i-frozen-3F">#frozen?</a>
    
    <li class="calls-super" ><a href="#method-i-hash">#hash</a>
    
    <li ><a href="#method-i-init_attributes">#init_attributes</a>
    
    <li ><a href="#method-i-init_internals">#init_internals</a>
    
    <li ><a href="#method-i-init_with">#init_with</a>
    
    <li ><a href="#method-i-initialize_internals_callback">#initialize_internals_callback</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li class="calls-super" ><a href="#method-i-pretty_print">#pretty_print</a>
    
    <li ><a href="#method-i-readonly-21">#readonly!</a>
    
    <li ><a href="#method-i-readonly-3F">#readonly?</a>
    
    <li ><a href="#method-i-slice">#slice</a>
    
    <li ><a href="#method-i-sync_with_transaction_state">#sync_with_transaction_state</a>
    
    <li ><a href="#method-i-thaw">#thaw</a>
    
    <li ><a href="#method-i-update_attributes_from_transaction_state">#update_attributes_from_transaction_state</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ActiveRecord::Core">
  <h1 id="module-ActiveRecord::Core" class="module">
    module ActiveRecord::Core
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-configurations" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">configurations</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns fully resolved configurations hash</p>
          
          

          
          <div class="method-source-code" id="configurations-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">configurations</span>
  <span class="ruby-identifier">@@configurations</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-configurations-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">configurations=</span><span
            class="method-args">(config)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Contains the database configuration - as is typically stored in
config/database.yml - as a Hash.</p>

<p>For example, the following database.yml…</p>

<pre>development:
  adapter: sqlite3
  database: db/development.sqlite3

production:
  adapter: sqlite3
  database: db/production.sqlite3</pre>

<p>…would result in <a
href="Core.html#method-c-configurations">::configurations</a> to look like
this:</p>

<pre class="ruby">{
   <span class="ruby-string">&#39;development&#39;</span> =<span class="ruby-operator">&gt;</span> {
      <span class="ruby-string">&#39;adapter&#39;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;sqlite3&#39;</span>,
      <span class="ruby-string">&#39;database&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;db/development.sqlite3&#39;</span>
   },
   <span class="ruby-string">&#39;production&#39;</span> =<span class="ruby-operator">&gt;</span> {
      <span class="ruby-string">&#39;adapter&#39;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;sqlite3&#39;</span>,
      <span class="ruby-string">&#39;database&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;db/production.sqlite3&#39;</span>
   }
}
</pre>
          
          

          
          <div class="method-source-code" id="configurations-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">configurations=</span>(<span class="ruby-identifier">config</span>)
  <span class="ruby-identifier">@@configurations</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ConnectionHandling</span><span class="ruby-operator">::</span><span class="ruby-constant">MergeAndResolveDefaultUrlConfig</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>).<span class="ruby-identifier">resolve</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-connection_handler" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">connection_handler</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="connection_handler-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connection_handler</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RuntimeRegistry</span>.<span class="ruby-identifier">connection_handler</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">default_connection_handler</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-connection_handler-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">connection_handler=</span><span
            class="method-args">(handler)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="connection_handler-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connection_handler=</span>(<span class="ruby-identifier">handler</span>)
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RuntimeRegistry</span>.<span class="ruby-identifier">connection_handler</span> = <span class="ruby-identifier">handler</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-disable_implicit_join_references-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">disable_implicit_join_references=</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="disable_implicit_join_references-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 90</span>
      <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">disable_implicit_join_references=</span>(<span class="ruby-identifier">value</span>)
        <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;          Implicit join references were removed with Rails 4.1.
          Make sure to remove this configuration because it does nothing.
&quot;</span>.<span class="ruby-identifier">squish</span>)
      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(attributes = nil, options = {}) { |self| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with attributes but not yet saved (pass a hash with
key names matching the associated table column names). In both instances,
valid attribute keys are determined by the column names of the associated
table – hence you can&#39;t have attributes that aren&#39;t part of the
table columns.</p>

<h4 id="method-c-new-label-Example-3A">Example:<span><a href="#method-c-new-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-comment"># Instantiates a single new object</span>
<span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">first_name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Jamie&#39;</span>)
</pre>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 272</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">_default_attributes</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">define_attribute_methods</span>

  <span class="ruby-identifier">init_internals</span>
  <span class="ruby-identifier">initialize_internals_callback</span>

  <span class="ruby-comment"># +options+ argument is only needed to make protected_attributes gem easier to hook.</span>
  <span class="ruby-comment"># Remove it when we drop support to this gem.</span>
  <span class="ruby-identifier">init_attributes</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">_run_initialize_callbacks</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C-3D-3E" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;=&gt;</span><span
            class="method-args">(other_object)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Allows sort on objects</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="3C-3D-3E-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 414</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">other_object</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">other_object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_key</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other_object</span>.<span class="ruby-identifier">to_key</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(comparison_object)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if <code>comparison_object</code> is the same exact object, or
<code>comparison_object</code> is of the same type and <code>self</code>
has an ID and it is equal to <code>comparison_object.id</code>.</p>

<p>Note that new records are different from any other record by definition,
unless the other record is the receiver itself. Besides, if you fetch
existing records with <code>select</code> and leave the ID out, you&#39;re
on your own, this predicate will return false.</p>

<p>Note also that destroying a record preserves its ID in the model instance,
so deleted models are still comparable.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 382</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">comparison_object</span>)
  <span class="ruby-keyword">super</span> <span class="ruby-operator">||</span>
    <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Core.html#method-i-eql-3F">eql?</a>
        </div>
        

        
      </div>

    
      <div id="method-i-clone" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clone</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Identical to Ruby&#39;s clone method.  This is a “shallow” copy.  Be warned
that your attributes are not copied. That means that modifying attributes
of the clone will modify the original, since they will both point to the
same attributes hash. If you need a copy of your attributes hash, please
use the <a href="Core.html#method-i-dup">dup</a> method.</p>

<pre class="ruby"><span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">first</span>
<span class="ruby-identifier">new_user</span> = <span class="ruby-identifier">user</span>.<span class="ruby-identifier">clone</span>
<span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>               <span class="ruby-comment"># =&gt; &quot;Bob&quot;</span>
<span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;Joe&quot;</span>
<span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>               <span class="ruby-comment"># =&gt; &quot;Joe&quot;</span>

<span class="ruby-identifier">user</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">object_id</span>            <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">object_id</span>  <span class="ruby-comment"># =&gt; true</span>

<span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">object_id</span>  <span class="ruby-comment"># =&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="clone-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 329</span>
    </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-connection_handler" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">connection_handler</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="connection_handler-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">connection_handler</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection_handler</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-dup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dup</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Duped objects have no id assigned and are treated as new records. Note that
this is a “shallow” copy as it copies the object&#39;s attributes only, not
its associations. The extent of a “deep” copy is application specific and
is therefore left to the application to implement according to its need.
The dup method does not preserve the timestamps (created|updated)_(at|on).</p>
          
          

          
          <div class="method-source-code" id="dup-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 338</span>
    </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-encode_with" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encode_with</span><span
            class="method-args">(coder)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Populate <code>coder</code> with attributes about this record that should
be serialized. The structure of <code>coder</code> defined in this method
is guaranteed to match the structure of <code>coder</code> passed to the
<code>init_with</code> method.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">coder</span> = {}
<span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">encode_with</span>(<span class="ruby-identifier">coder</span>)
<span class="ruby-identifier">coder</span> <span class="ruby-comment"># =&gt; {&quot;attributes&quot; =&gt; {&quot;id&quot; =&gt; nil, ... }}</span>
</pre>
          
          

          
          <div class="method-source-code" id="encode_with-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 366</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">encode_with</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-comment"># FIXME: Remove this when we better serialize attributes</span>
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&#39;raw_attributes&#39;</span>] = <span class="ruby-identifier">attributes_before_type_cast</span>
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&#39;attributes&#39;</span>] = <span class="ruby-ivar">@attributes</span>
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&#39;new_record&#39;</span>] = <span class="ruby-identifier">new_record?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eql-3F" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">eql?</span><span
            class="method-args">(comparison_object)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Core.html#method-i-3D-3D">==</a>
        </div>
        
      </div>

    
      <div id="method-i-freeze" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">freeze</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Clone and freeze the attributes hash such that associations are still
accessible, even on destroyed records, but cloned models will not be
frozen.</p>
          
          

          
          <div class="method-source-code" id="freeze-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 403</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">freeze</span>
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-frozen-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">frozen?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the attributes hash has been frozen.</p>
          
          

          
          <div class="method-source-code" id="frozen-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">frozen?</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Delegates to id in order to allow two records of the same type and id to
work with something like:</p>

<pre class="ruby">[ <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>), <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>) ] <span class="ruby-operator">&amp;</span> [ <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">4</span>) ] <span class="ruby-comment"># =&gt; [ Person.find(1) ]</span>
</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="hash-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hash</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>
    <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-init_with" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_with</span><span
            class="method-args">(coder)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initialize an empty model object from <code>coder</code>.
<code>coder</code> must contain the attributes necessary for initializing
an empty model object. For example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Post</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">allocate</span>
<span class="ruby-identifier">post</span>.<span class="ruby-identifier">init_with</span>(<span class="ruby-string">&#39;attributes&#39;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-string">&#39;title&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;hello world&#39;</span> })
<span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span> <span class="ruby-comment"># =&gt; &#39;hello world&#39;</span>
</pre>
          
          

          
          <div class="method-source-code" id="init_with-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 297</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_with</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-identifier">coder</span>[<span class="ruby-string">&#39;attributes&#39;</span>]

  <span class="ruby-identifier">init_internals</span>

  <span class="ruby-ivar">@new_record</span> = <span class="ruby-identifier">coder</span>[<span class="ruby-string">&#39;new_record&#39;</span>]

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">define_attribute_methods</span>

  <span class="ruby-identifier">_run_find_callbacks</span>
  <span class="ruby-identifier">_run_initialize_callbacks</span>

  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the contents of the record as a nicely formatted string.</p>
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-comment"># We check defined?(@attributes) not to issue warnings if the object is</span>
  <span class="ruby-comment"># allocated but not initialized.</span>
  <span class="ruby-identifier">inspection</span> = <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>
                 <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
                   <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>)
                     <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
                   <span class="ruby-keyword">end</span>
                 }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)
               <span class="ruby-keyword">else</span>
                 <span class="ruby-string">&quot;not initialized&quot;</span>
               <span class="ruby-keyword">end</span>
  <span class="ruby-node">&quot;#&lt;#{self.class} #{inspection}&gt;&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pretty_print" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pretty_print</span><span
            class="method-args">(pp)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Takes a PP and prettily prints this record to it, allowing you to get a
nice result from `pp record` when pp is required.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="pretty_print-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 455</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pretty_print</span>(<span class="ruby-identifier">pp</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">super</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">custom_inspect_method_defined?</span>
  <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">object_address_group</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>
      <span class="ruby-identifier">column_names</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">has_attribute?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">new_record?</span> }
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">seplist</span>(<span class="ruby-identifier">column_names</span>, <span class="ruby-identifier">proc</span> { <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&#39;,&#39;</span> }) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column_name</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">column_value</span> = <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">column_name</span>)
        <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span> <span class="ruby-string">&#39; &#39;</span>
        <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword">do</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-identifier">column_name</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&#39;:&#39;</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">pp</span> <span class="ruby-identifier">column_value</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span> <span class="ruby-string">&#39; &#39;</span>
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&#39;not initialized&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-readonly-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">readonly!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Marks this record as read only.</p>
          
          

          
          <div class="method-source-code" id="readonly-21-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 429</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">readonly!</span>
  <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-readonly-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">readonly?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the record is read only. Records loaded
through joins with piggy-back attributes will be marked as read only since
they cannot be saved.</p>
          
          

          
          <div class="method-source-code" id="readonly-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 424</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">readonly?</span>
  <span class="ruby-ivar">@readonly</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-slice" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">slice</span><span
            class="method-args">(*methods)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a hash of the given methods with their names as keys and returned
values as values.</p>
          
          

          
          <div class="method-source-code" id="slice-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 478</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">slice</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>)
  <span class="ruby-constant">Hash</span>[<span class="ruby-identifier">methods</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">method</span>, <span class="ruby-identifier">public_send</span>(<span class="ruby-identifier">method</span>)] }].<span class="ruby-identifier">with_indifferent_access</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-custom_inspect_method_defined-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">custom_inspect_method_defined?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="custom_inspect_method_defined-3F-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 568</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">custom_inspect_method_defined?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">instance_method</span>(<span class="ruby-value">:inspect</span>).<span class="ruby-identifier">owner</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">instance_method</span>(<span class="ruby-value">:inspect</span>).<span class="ruby-identifier">owner</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-init_attributes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_attributes</span><span
            class="method-args">(attributes, options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method is needed to make protected_attributes gem easier to hook.
Remove it when we drop support to this gem.</p>
          
          

          
          <div class="method-source-code" id="init_attributes-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 558</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_attributes</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-identifier">attributes</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-init_internals" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init_internals</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="init_internals-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 539</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init_internals</span>
  <span class="ruby-ivar">@aggregation_cache</span>        = {}
  <span class="ruby-ivar">@association_cache</span>        = {}
  <span class="ruby-ivar">@readonly</span>                 = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@destroyed</span>                = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@marked_for_destruction</span>   = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@destroyed_by_association</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@new_record</span>               = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@txn</span>                      = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@_start_transaction_state</span> = {}
  <span class="ruby-ivar">@transaction_state</span>        = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@reflects_state</span>           = [<span class="ruby-keyword">false</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialize_internals_callback" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize_internals_callback</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="initialize_internals_callback-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 553</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize_internals_callback</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-sync_with_transaction_state" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sync_with_transaction_state</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Updates the attributes on this particular <a
href="../ActiveRecord.html">ActiveRecord</a> object so that if it is
associated with a transaction, then the state of the AR object will be
updated to reflect the current state of the transaction</p>

<p>The @transaction_state variable stores the states of the associated
transaction. This relies on the fact that a transaction can only be in one
rollback or commit (otherwise a list of states would be required) Each AR
object inside of a transaction carries that transaction&#39;s
TransactionState.</p>

<p>This method checks to see if the <a
href="../ActiveRecord.html">ActiveRecord</a> object&#39;s state reflects
the TransactionState, and rolls back or commits the <a
href="../ActiveRecord.html">ActiveRecord</a> object as appropriate.</p>

<p>Since <a href="../ActiveRecord.html">ActiveRecord</a> objects can be inside
multiple transactions, this method recursively goes through the parent of
the TransactionState and checks if the <a
href="../ActiveRecord.html">ActiveRecord</a> object reflects the state of
the object.</p>
          
          

          
          <div class="method-source-code" id="sync_with_transaction_state-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 509</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sync_with_transaction_state</span>
  <span class="ruby-identifier">update_attributes_from_transaction_state</span>(<span class="ruby-ivar">@transaction_state</span>, <span class="ruby-value">0</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-thaw" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">thaw</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="thaw-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 562</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">thaw</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">frozen?</span>
    <span class="ruby-ivar">@attributes</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-update_attributes_from_transaction_state" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update_attributes_from_transaction_state</span><span
            class="method-args">(transaction_state, depth)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="update_attributes_from_transaction_state-source">
            <pre><span class="ruby-comment"># File lib/active_record/core.rb, line 513</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_attributes_from_transaction_state</span>(<span class="ruby-identifier">transaction_state</span>, <span class="ruby-identifier">depth</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">transaction_state</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">transaction_state</span>.<span class="ruby-identifier">finalized?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">has_transactional_callbacks?</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@reflects_state</span>[<span class="ruby-identifier">depth</span>]
      <span class="ruby-identifier">restore_transaction_record_state</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">transaction_state</span>.<span class="ruby-identifier">rolledback?</span>
      <span class="ruby-identifier">clear_transaction_record_state</span>
      <span class="ruby-ivar">@reflects_state</span>[<span class="ruby-identifier">depth</span>] = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">transaction_state</span>.<span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@reflects_state</span>[<span class="ruby-identifier">depth</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>]
      <span class="ruby-identifier">update_attributes_from_transaction_state</span>(<span class="ruby-identifier">transaction_state</span>.<span class="ruby-identifier">parent</span>, <span class="ruby-identifier">depth</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

