<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ChunkyPNG::Color - chunky_png</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-a">#a</a>
    
    <li ><a href="#method-i-alpha_decomposable-3F">#alpha_decomposable?</a>
    
    <li ><a href="#method-i-b">#b</a>
    
    <li ><a href="#method-i-blend">#blend</a>
    
    <li ><a href="#method-i-compose">#compose</a>
    
    <li ><a href="#method-i-compose_precise">#compose_precise</a>
    
    <li ><a href="#method-i-compose_quick">#compose_quick</a>
    
    <li ><a href="#method-i-cylindrical_to_cubic">#cylindrical_to_cubic</a>
    
    <li ><a href="#method-i-decompose_alpha">#decompose_alpha</a>
    
    <li ><a href="#method-i-decompose_alpha_component">#decompose_alpha_component</a>
    
    <li ><a href="#method-i-decompose_alpha_components">#decompose_alpha_components</a>
    
    <li ><a href="#method-i-decompose_color">#decompose_color</a>
    
    <li ><a href="#method-i-euclidean_distance_rgba">#euclidean_distance_rgba</a>
    
    <li ><a href="#method-i-fade">#fade</a>
    
    <li ><a href="#method-i-from_hex">#from_hex</a>
    
    <li ><a href="#method-i-from_hsb">#from_hsb</a>
    
    <li ><a href="#method-i-from_hsl">#from_hsl</a>
    
    <li ><a href="#method-i-from_hsv">#from_hsv</a>
    
    <li ><a href="#method-i-from_rgb_stream">#from_rgb_stream</a>
    
    <li ><a href="#method-i-from_rgba_stream">#from_rgba_stream</a>
    
    <li ><a href="#method-i-fully_transparent-3F">#fully_transparent?</a>
    
    <li ><a href="#method-i-g">#g</a>
    
    <li ><a href="#method-i-grayscale">#grayscale</a>
    
    <li ><a href="#method-i-grayscale-3F">#grayscale?</a>
    
    <li ><a href="#method-i-grayscale_alpha">#grayscale_alpha</a>
    
    <li ><a href="#method-i-grayscale_teint">#grayscale_teint</a>
    
    <li ><a href="#method-i-html_color">#html_color</a>
    
    <li ><a href="#method-i-hue_and_chroma">#hue_and_chroma</a>
    
    <li ><a href="#method-i-int8_mult">#int8_mult</a>
    
    <li ><a href="#method-i-interpolate_quick">#interpolate_quick</a>
    
    <li ><a href="#method-i-opaque-21">#opaque!</a>
    
    <li ><a href="#method-i-opaque-3F">#opaque?</a>
    
    <li ><a href="#method-i-parse">#parse</a>
    
    <li ><a href="#method-i-pass_bytesize">#pass_bytesize</a>
    
    <li ><a href="#method-i-pixel_bitsize">#pixel_bitsize</a>
    
    <li ><a href="#method-i-pixel_bytesize">#pixel_bytesize</a>
    
    <li ><a href="#method-i-r">#r</a>
    
    <li ><a href="#method-i-rgb">#rgb</a>
    
    <li ><a href="#method-i-rgba">#rgba</a>
    
    <li ><a href="#method-i-samples_per_pixel">#samples_per_pixel</a>
    
    <li ><a href="#method-i-scanline_bytesize">#scanline_bytesize</a>
    
    <li ><a href="#method-i-to_grayscale">#to_grayscale</a>
    
    <li ><a href="#method-i-to_grayscale_alpha_bytes">#to_grayscale_alpha_bytes</a>
    
    <li ><a href="#method-i-to_grayscale_bytes">#to_grayscale_bytes</a>
    
    <li ><a href="#method-i-to_hex">#to_hex</a>
    
    <li ><a href="#method-i-to_hsb">#to_hsb</a>
    
    <li ><a href="#method-i-to_hsl">#to_hsl</a>
    
    <li ><a href="#method-i-to_hsv">#to_hsv</a>
    
    <li ><a href="#method-i-to_truecolor_alpha_bytes">#to_truecolor_alpha_bytes</a>
    
    <li ><a href="#method-i-to_truecolor_bytes">#to_truecolor_bytes</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ChunkyPNG::Color">
  <h1 id="module-ChunkyPNG::Color" class="module">
    module ChunkyPNG::Color
  </h1>

  <section class="description">
    
<p>The <a href="Color.html">Color</a> module defines methods for handling
colors. Within the <a href="../ChunkyPNG.html">ChunkyPNG</a> library, the
concepts of pixels and colors are both used, and they are both represented
by a Integer.</p>

<p>Pixels/colors are represented in RGBA components. Each of the four
components is stored with a depth of 8 bits (maximum value = 255 =
{ChunkyPNG::Color::MAX}). Together, these components are stored in a 4-byte
Integer.</p>

<p>A color will always be represented using these 4 components in memory. When
the image is encoded, a more suitable representation can be used (e.g. rgb,
grayscale, palette-based), for which several conversion methods are
provided in this module.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="BLACK">BLACK
        
        <dd><p>@return [Integer] Black pixel/color</p>
        
      
        <dt id="HEX3_COLOR_REGEXP">HEX3_COLOR_REGEXP
        
        <dd><p>@private @return [Regexp] The regexp to parse 3-digit hex color values.</p>
        
      
        <dt id="HEX6_COLOR_REGEXP">HEX6_COLOR_REGEXP
        
        <dd><p>@private @return [Regexp] The regexp to parse 6- and 8-digit hex color
values.</p>
        
      
        <dt id="HTML_COLOR_REGEXP">HTML_COLOR_REGEXP
        
        <dd><p>@private @return [Regexp] The regexp to parse named color values.</p>
        
      
        <dt id="MAX">MAX
        
        <dd><p>@return [Integer] The maximum value of each color component.</p>
        
      
        <dt id="MAX_EUCLIDEAN_DISTANCE_RGBA">MAX_EUCLIDEAN_DISTANCE_RGBA
        
        <dd><p>Could be simplified as <a href="Color.html#MAX">MAX</a> * 2, but this
format mirrors the math in {#euclidean_distance_rgba} @return [Float] The
maximum Euclidean distance of two RGBA colors.</p>
        
      
        <dt id="PREDEFINED_COLORS">PREDEFINED_COLORS
        
        <dd><p>@return [Hash&lt;Symbol, Integer&gt;] All the predefined color names in
HTML.</p>
        
      
        <dt id="TRANSPARENT">TRANSPARENT
        
        <dd><p>@return [Integer] Fully transparent pixel/color</p>
        
      
        <dt id="WHITE">WHITE
        
        <dd><p>@return [Integer] White pixel/color</p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-a" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">a</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the alpha channel value for the color value.</p>

<p>@param [Integer] value The color value. @return [Integer] A value between 0
and <a href="Color.html#MAX">MAX</a>.</p>
          
          

          
          <div class="method-source-code" id="a-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x000000ff</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-alpha_decomposable-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">alpha_decomposable?</span><span
            class="method-args">(color, mask, bg, tolerance = 1)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Checks whether an alpha channel value can successfully be composed given
the resulting color, the mask color and a background color, all of which
should be opaque.</p>

<p>@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being</p>

<pre class="ruby"><span class="ruby-identifier">composed</span>
</pre>

<p>@param [Integer] bg The background color on which the color was composed.
@param [Integer] tolerance The decomposition tolerance level, a value</p>

<pre>between 0 and 255.</pre>

<p>@return [Boolean] True if the alpha component can be decomposed</p>

<pre>successfully.</pre>

<p>@see <a href="Color.html#method-i-decompose_alpha">decompose_alpha</a></p>
          
          

          
          <div class="method-source-code" id="alpha_decomposable-3F-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 500</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">alpha_decomposable?</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span> = <span class="ruby-value">1</span>)
  <span class="ruby-identifier">components</span> = <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  <span class="ruby-identifier">sum</span> = <span class="ruby-identifier">components</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> }
  <span class="ruby-identifier">max</span> = <span class="ruby-identifier">components</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">*</span> <span class="ruby-value">3</span>
  <span class="ruby-identifier">components</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">255</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">components</span>.<span class="ruby-identifier">min</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">tolerance</span> <span class="ruby-operator">*</span> <span class="ruby-value">3</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">max</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-b" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">b</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the blue-component from the color value.</p>

<p>@param [Integer] value The color value. @return [Integer] A value between 0
and <a href="Color.html#MAX">MAX</a>.</p>
          
          

          
          <div class="method-source-code" id="b-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 288</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>)
  (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x0000ff00</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-blend" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">blend</span><span
            class="method-args">(fg, bg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Blends the foreground and background color by taking the average of the
components.</p>

<p>@param [Integer] fg The foreground color. @param [Integer] bg The
foreground color. @return [Integer] The blended color.</p>
          
          

          
          <div class="method-source-code" id="blend-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 403</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">blend</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
  (<span class="ruby-identifier">fg</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bg</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compose" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">compose</span><span
            class="method-args">(fg, bg)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Color.html#method-i-compose_quick">compose_quick</a>
        </div>
        
      </div>

    
      <div id="method-i-compose_precise" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compose_precise</span><span
            class="method-args">(fg, bg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Composes two colors with an alpha channel using floating point math.</p>

<p>This method uses more precise floating point math, but this precision is
lost when the result is converted back to an integer. Because it is slower
than the version based on integer math, that version is preferred.</p>

<p>@param [Integer] fg The foreground color. @param [Integer] bg The
background color. @return [Integer] The composited color. @see <a
href="Color.html#method-i-compose_quick">#compose_quick</a></p>
          
          

          
          <div class="method-source-code" id="compose_precise-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 380</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compose_precise</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">bg</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">fg</span>)

  <span class="ruby-identifier">fg_a</span>  = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MAX</span>
  <span class="ruby-identifier">bg_a</span>  = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MAX</span>
  <span class="ruby-identifier">a_com</span> = (<span class="ruby-value">1.0</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">fg_a</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">bg_a</span>

  <span class="ruby-identifier">new_r</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
  <span class="ruby-identifier">new_g</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
  <span class="ruby-identifier">new_b</span> = (<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>)).<span class="ruby-identifier">round</span>
  <span class="ruby-identifier">new_a</span> = ((<span class="ruby-identifier">fg_a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span>) <span class="ruby-operator">*</span> <span class="ruby-constant">MAX</span>).<span class="ruby-identifier">round</span>
  <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compose_quick" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compose_quick</span><span
            class="method-args">(fg, bg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Composes two colors with an alpha channel using integer math.</p>

<p>This version is faster than the version based on floating point math, so
this compositing function is used by default.</p>

<p>@param [Integer] fg The foreground color. @param [Integer] bg The
background color. @return [Integer] The composited color. @see <a
href="Color.html#method-i-compose_precise">#compose_precise</a></p>
          
          

          
          <div class="method-source-code" id="compose_quick-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 358</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compose_quick</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">bg</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">fg</span>)

  <span class="ruby-identifier">a_com</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-value">0xff</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_r</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_g</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_b</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a_com</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_a</span> = <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">a_com</span>
  <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Color.html#method-i-compose">compose</a>
        </div>
        

        
      </div>

    
      <div id="method-i-decompose_alpha" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose_alpha</span><span
            class="method-args">(color, mask, bg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Decomposes the alpha channel value given the resulting color, the mask
color and a background color, all of which should be opaque.</p>

<p>Make sure to call {#alpha_decomposable?} first to see if the alpha channel
value can successfully decomposed with a given tolerance, otherwise the
return value of this method is undefined.</p>

<p>@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being</p>

<pre class="ruby"><span class="ruby-identifier">composed</span>
</pre>

<p>@param [Integer] bg The background color on which the color was composed.
@return [Integer] The best fitting alpha channel, a value between 0 and</p>

<pre>255.</pre>

<p>@see <a
href="Color.html#method-i-alpha_decomposable-3F">alpha_decomposable?</a></p>
          
          

          
          <div class="method-source-code" id="decompose_alpha-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 521</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose_alpha</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  <span class="ruby-identifier">components</span> = <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  (<span class="ruby-identifier">components</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> } <span class="ruby-operator">/</span> <span class="ruby-value">3.0</span>).<span class="ruby-identifier">round</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-decompose_alpha_component" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose_alpha_component</span><span
            class="method-args">(channel, color, mask, bg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Decomposes an alpha channel for either the r, g or b color channel. @param
[:r, :g, :b] channel The channel to decompose the alpha channel</p>

<pre>from.</pre>

<p>@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being</p>

<pre class="ruby"><span class="ruby-identifier">composed</span>
</pre>

<p>@param [Integer] bg The background color on which the color was composed.
@return [Integer] The decomposed alpha value for the channel.</p>
          
          

          
          <div class="method-source-code" id="decompose_alpha_component-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 534</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  <span class="ruby-identifier">cc</span>, <span class="ruby-identifier">mc</span>, <span class="ruby-identifier">bc</span> = <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">color</span>), <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">mask</span>), <span class="ruby-identifier">send</span>(<span class="ruby-identifier">channel</span>, <span class="ruby-identifier">bg</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-value">0x00</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">bc</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cc</span>
  <span class="ruby-keyword">return</span> <span class="ruby-value">0xff</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">bc</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mc</span>
  <span class="ruby-keyword">return</span> <span class="ruby-value">0xff</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cc</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">mc</span>

  (((<span class="ruby-identifier">bc</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cc</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">bc</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">mc</span>).<span class="ruby-identifier">to_f</span>) <span class="ruby-operator">*</span> <span class="ruby-constant">MAX</span>).<span class="ruby-identifier">round</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-decompose_alpha_components" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose_alpha_components</span><span
            class="method-args">(color, mask, bg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Decomposes the alpha channels for the r, g and b color channel. @param
[Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being</p>

<pre class="ruby"><span class="ruby-identifier">composed</span>
</pre>

<p>@param [Integer] bg The background color on which the color was composed.
@return [Array&lt;Integer&gt;] The decomposed alpha values for the r, g and
b</p>

<pre>channels.</pre>
          
          

          
          <div class="method-source-code" id="decompose_alpha_components-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 551</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose_alpha_components</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  [
    <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-value">:r</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>),
    <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-value">:g</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>),
    <span class="ruby-identifier">decompose_alpha_component</span>(<span class="ruby-value">:b</span>, <span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  ]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-decompose_color" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">decompose_color</span><span
            class="method-args">(color, mask, bg, tolerance = 1)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Decomposes a color, given a color, a mask color and a background color. The
returned color will be a variant of the mask color, with the alpha channel
set to the best fitting value. This basically is the reverse operation if
alpha composition.</p>

<p>If the color cannot be decomposed, this method will return the fully
transparent variant of the mask color.</p>

<p>@param [Integer] color The color that was the result of compositing. @param
[Integer] mask The opaque variant of the color that was being</p>

<pre class="ruby"><span class="ruby-identifier">composed</span>
</pre>

<p>@param [Integer] bg The background color on which the color was composed.
@param [Integer] tolerance The decomposition tolerance level, a value</p>

<pre>between 0 and 255.</pre>

<p>@return [Integer] The decomposed color, a variant of the masked color</p>

<pre>with the alpha channel set to an appropriate value.</pre>
          
          

          
          <div class="method-source-code" id="decompose_color-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 479</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">decompose_color</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span> = <span class="ruby-value">1</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">alpha_decomposable?</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">tolerance</span>)
    <span class="ruby-identifier">mask</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">decompose_alpha</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">mask</span>, <span class="ruby-identifier">bg</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">mask</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-euclidean_distance_rgba" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">euclidean_distance_rgba</span><span
            class="method-args">(pixel_after, pixel_before)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Compute the Euclidean distance between 2 colors in RGBA</p>

<p>This method simply takes the Euclidean distance between the RGBA channels
of 2 colors, which gives us a measure of how different the two colors are.</p>

<p>Although it would be more perceptually accurate to calculate a proper Delta
E in Lab colorspace, this method should serve many use-cases while avoiding
the overhead of converting RGBA to Lab.</p>

<p>@param pixel_after [Integer] @param pixel_before [Integer] @return [Float]</p>
          
          

          
          <div class="method-source-code" id="euclidean_distance_rgba-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 716</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">euclidean_distance_rgba</span>(<span class="ruby-identifier">pixel_after</span>, <span class="ruby-identifier">pixel_before</span>)
  <span class="ruby-constant">Math</span>.<span class="ruby-identifier">sqrt</span>(
    (<span class="ruby-identifier">r</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span> <span class="ruby-operator">+</span>
    (<span class="ruby-identifier">g</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span> <span class="ruby-operator">+</span>
    (<span class="ruby-identifier">b</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span> <span class="ruby-operator">+</span>
    (<span class="ruby-identifier">a</span>(<span class="ruby-identifier">pixel_after</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span>(<span class="ruby-identifier">pixel_before</span>))<span class="ruby-operator">**</span><span class="ruby-value">2</span>
  )
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fade" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fade</span><span
            class="method-args">(color, factor)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Lowers the intensity of a color, by lowering its alpha by a given factor.
@param [Integer] color The color to adjust. @param [Integer] factor Fade
factor as an integer between 0 and 255. @return [Integer] The faded color.</p>
          
          

          
          <div class="method-source-code" id="fade-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 458</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fade</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">factor</span>)
  <span class="ruby-identifier">new_alpha</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">factor</span>)
  (<span class="ruby-identifier">color</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xffffff00</span>) <span class="ruby-operator">|</span> <span class="ruby-identifier">new_alpha</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from_hex" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_hex</span><span
            class="method-args">(hex_value, opacity = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a color by converting it from a string in hex notation.</p>

<p>It supports colors with (#rrggbbaa) or without (#rrggbb) alpha channel as
well as the 3-digit short format (#rgb) for those without. <a
href="Color.html">Color</a> strings may include the prefix “0x” or “#”.</p>

<p>@param [String] str The color in hex notation. @return [Integer] The</p>

<pre>converted color value.</pre>

<p>@param [Integer] opacity The opacity value for the color. Overrides any</p>

<pre>opacity value given in the hex value if given.</pre>

<p>@return [Integer] The color value. @raise [ArgumentError] if the value
given is not a hex color notation.</p>
          
          

          
          <div class="method-source-code" id="from_hex-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_hex</span>(<span class="ruby-identifier">hex_value</span>, <span class="ruby-identifier">opacity</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">base_color</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">hex_value</span>
               <span class="ruby-keyword">when</span> <span class="ruby-constant">HEX3_COLOR_REGEXP</span>
                 <span class="ruby-node">$1</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/([0-9a-f])/i</span>, <span class="ruby-string">&#39;\1\1&#39;</span>).<span class="ruby-identifier">hex</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>
               <span class="ruby-keyword">when</span> <span class="ruby-constant">HEX6_COLOR_REGEXP</span>
                 <span class="ruby-node">$1</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span>
               <span class="ruby-keyword">else</span>
                 <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Not a valid hex color notation: #{hex_value.inspect}!&quot;</span>
               <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">opacity</span>  <span class="ruby-operator">||=</span> <span class="ruby-node">$2</span> <span class="ruby-operator">?</span> <span class="ruby-node">$2</span>.<span class="ruby-identifier">hex</span> <span class="ruby-operator">:</span> <span class="ruby-value">0xff</span>
  <span class="ruby-identifier">base_color</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">opacity</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from_hsb" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">from_hsb</span><span
            class="method-args">(hue, saturation, value, alpha = 255)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Color.html#method-i-from_hsv">from_hsv</a>
        </div>
        
      </div>

    
      <div id="method-i-from_hsl" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_hsl</span><span
            class="method-args">(hue, saturation, lightness, alpha = 255)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new color from an HSL triple.</p>

<p>This implementation follows the modern convention of 0 degrees hue
indicating red.</p>

<p>@param [Fixnum] hue The hue component (0-360) @param [Fixnum] saturation
The saturation component (0-1) @param [Fixnum] lightness The lightness
component (0-1) @param [Fixnum] alpha Defaults to opaque (255). @return
[Integer] The newly constructed color value. @raise [ArgumentError] if the
hsl triple is invalid. @see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a></p>
          
          

          
          <div class="method-source-code" id="from_hsl-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_hsl</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>, <span class="ruby-identifier">alpha</span> = <span class="ruby-value">255</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Hue #{hue} was not between 0 and 360&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">360</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">hue</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Saturation #{saturation} was not between 0 and 1&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">saturation</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Lightness #{lightness} was not between 0 and 1&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">lightness</span>)
  <span class="ruby-identifier">chroma</span> = (<span class="ruby-value">1</span> <span class="ruby-operator">-</span> (<span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">lightness</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">abs</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">saturation</span>
  <span class="ruby-identifier">rgb</span>    = <span class="ruby-identifier">cylindrical_to_cubic</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>, <span class="ruby-identifier">chroma</span>)
  <span class="ruby-identifier">rgb</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span> ((<span class="ruby-identifier">component</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lightness</span> <span class="ruby-operator">-</span> <span class="ruby-value">0.5</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">chroma</span>) <span class="ruby-operator">*</span> <span class="ruby-value">255</span>).<span class="ruby-identifier">to_i</span> }
  <span class="ruby-identifier">rgb</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">alpha</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rgb</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from_hsv" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_hsv</span><span
            class="method-args">(hue, saturation, value, alpha = 255)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new color from an HSV triple.</p>

<p>Create a new color using an HSV (sometimes also called HSB) triple. The
words `value` and `brightness` are used interchangeably and synonymously in
descriptions of this colorspace. This implementation follows the modern
convention of 0 degrees hue indicating red.</p>

<p>@param [Fixnum] hue The hue component (0-360) @param [Fixnum] saturation
The saturation component (0-1) @param [Fixnum] value The value (brightness)
component (0-1) @param [Fixnum] alpha Defaults to opaque (255). @return
[Integer] The newly constructed color value. @raise [ArgumentError] if the
hsv triple is invalid. @see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a></p>
          
          

          
          <div class="method-source-code" id="from_hsv-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 193</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_hsv</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">alpha</span> = <span class="ruby-value">255</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Hue must be between 0 and 360&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">360</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">hue</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Saturation must be between 0 and 1&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">saturation</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Value/brightness must be between 0 and 1&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">chroma</span> = <span class="ruby-identifier">value</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">saturation</span>
  <span class="ruby-identifier">rgb</span>    = <span class="ruby-identifier">cylindrical_to_cubic</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">chroma</span>)
  <span class="ruby-identifier">rgb</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span> ((<span class="ruby-identifier">component</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">chroma</span>) <span class="ruby-operator">*</span> <span class="ruby-value">255</span>).<span class="ruby-identifier">to_i</span> }
  <span class="ruby-identifier">rgb</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">alpha</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rgb</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Color.html#method-i-from_hsb">from_hsb</a>
        </div>
        

        
      </div>

    
      <div id="method-i-from_rgb_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_rgb_stream</span><span
            class="method-args">(stream, pos = 0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a color by unpacking an rgb triple from a string.</p>

<p>@param [String] stream The string to load the color from. It should be</p>

<pre>at least 3 + pos bytes long.</pre>

<p>@param [Integer] pos The position in the string to load the triple from.
@return [Integer] The newly constructed color value.</p>
          
          

          
          <div class="method-source-code" id="from_rgb_stream-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_rgb_stream</span>(<span class="ruby-identifier">stream</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>)
  <span class="ruby-identifier">rgb</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">stream</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-node">&quot;@#{pos}C3&quot;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-from_rgba_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">from_rgba_stream</span><span
            class="method-args">(stream, pos = 0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a color by unpacking an rgba triple from a string</p>

<p>@param [String] stream The string to load the color from. It should be</p>

<pre>at least 4 + pos bytes long.</pre>

<p>@param [Integer] pos The position in the string to load the triple from.
@return [Integer] The newly constructed color value.</p>
          
          

          
          <div class="method-source-code" id="from_rgba_stream-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">from_rgba_stream</span>(<span class="ruby-identifier">stream</span>, <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>)
  <span class="ruby-identifier">rgba</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">stream</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-node">&quot;@#{pos}C4&quot;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fully_transparent-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fully_transparent?</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this color is fully transparent.</p>

<p>@param [Integer] value The color to test. @return [true, false] True if the
alpha channel equals 0.</p>
          
          

          
          <div class="method-source-code" id="fully_transparent-3F-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 327</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fully_transparent?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0x00000000</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-g" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">g</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the green-component from the color value.</p>

<p>@param [Integer] value The color value. @return [Integer] A value between 0
and <a href="Color.html#MAX">MAX</a>.</p>
          
          

          
          <div class="method-source-code" id="g-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 280</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">value</span>)
  (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x00ff0000</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">16</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-grayscale" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">grayscale</span><span
            class="method-args">(teint)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new color using a grayscale teint. @param [Integer] teint The
grayscale teint (0-255), will be used as r, g,</p>

<pre>and b value.</pre>

<p>@return [Integer] The newly constructed color value.</p>
          
          

          
          <div class="method-source-code" id="grayscale-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">grayscale</span>(<span class="ruby-identifier">teint</span>)
  <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xff</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-grayscale-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">grayscale?</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this color is fully transparent.</p>

<p>@param [Integer] value The color to test. @return [true, false] True if the
r, g and b component are equal.</p>
          
          

          
          <div class="method-source-code" id="grayscale-3F-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 319</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">grayscale?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">r</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-grayscale_alpha" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">grayscale_alpha</span><span
            class="method-args">(teint, a)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new color using a grayscale teint and alpha value. @param
[Integer] teint The grayscale teint (0-255), will be used as r, g,</p>

<pre>and b value.</pre>

<p>@param [Integer] a The opacity (0-255) @return [Integer] The newly
constructed color value.</p>
          
          

          
          <div class="method-source-code" id="grayscale_alpha-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">grayscale_alpha</span>(<span class="ruby-identifier">teint</span>, <span class="ruby-identifier">a</span>)
  <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">teint</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-grayscale_teint" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">grayscale_teint</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Calculates the grayscale teint of an RGB color.</p>

<p>@param [Integer] color The color to convert. @return [Integer] The
grayscale teint of the input color, 0-255.</p>
          
          

          
          <div class="method-source-code" id="grayscale_teint-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 435</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">grayscale_teint</span>(<span class="ruby-identifier">color</span>)
  (<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0.3</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0.59</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>) <span class="ruby-operator">*</span> <span class="ruby-value">0.11</span>).<span class="ruby-identifier">round</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-html_color" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">html_color</span><span
            class="method-args">(color_name, opacity = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Gets a color value based on a HTML color name.</p>

<p>The color name is flexible. E.g. <code>&#39;yellowgreen&#39;</code>,
<code>&#39;Yellow green&#39;</code>, <code>&#39;YellowGreen&#39;</code>,
<code>&#39;YELLOW_GREEN&#39;</code> and <code>:yellow_green</code> will all
return the same color value.</p>

<p>You can include a opacity level in the color name (e.g. <code>&#39;red @
0.5&#39;</code>) or give an explicit opacity value as second argument. If
no opacity value is given, the color will be fully opaque.</p>

<p>@param [Symbol, String] color_name The color name. It may include an</p>

<pre>opacity specifier like &lt;tt&gt;@ 0.8&lt;/tt&gt; to set the color&#39;s opacity.</pre>

<p>@param [Integer] opacity The opacity value for the color between 0 and</p>

<pre>255. Overrides any opacity value given in the color name.</pre>

<p>@return [Integer] The color value. @raise [ChunkyPNG::Exception] If the
color name was not recognized.</p>
          
          

          
          <div class="method-source-code" id="html_color-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 901</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">html_color</span>(<span class="ruby-identifier">color_name</span>, <span class="ruby-identifier">opacity</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">color_name</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">=~</span> <span class="ruby-constant">HTML_COLOR_REGEXP</span>
    <span class="ruby-identifier">opacity</span> <span class="ruby-operator">||=</span> <span class="ruby-node">$2</span> <span class="ruby-operator">?</span> (<span class="ruby-node">$2</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">255.0</span>).<span class="ruby-identifier">round</span> <span class="ruby-operator">:</span> <span class="ruby-value">0xff</span>
    <span class="ruby-identifier">base_color_name</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[^a-z]+/i</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">to_sym</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">PREDEFINED_COLORS</span>[<span class="ruby-identifier">base_color_name</span>] <span class="ruby-operator">|</span> <span class="ruby-identifier">opacity</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">PREDEFINED_COLORS</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">base_color_name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown color name #{color_name}!&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-int8_mult" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">int8_mult</span><span
            class="method-args">(a, b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Multiplies two fractions using integer math, where the fractions are stored
using an integer between 0 and 255. This method is used as a helper method
for compositing colors using integer math.</p>

<p>This is a quicker implementation of ((a * b) / 255.0).round.</p>

<p>@param [Integer] a The first fraction. @param [Integer] b The second
fraction. @return [Integer] The result of the multiplication.</p>
          
          

          
          <div class="method-source-code" id="int8_mult-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">a</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">0x80</span>
  ((<span class="ruby-identifier">t</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">t</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-interpolate_quick" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">interpolate_quick</span><span
            class="method-args">(fg, bg, alpha)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Interpolates the foreground and background colors by the given alpha value.
This also blends the alpha channels themselves.</p>

<p>A blending factor of 255 will give entirely the foreground, while a
blending factor of 0 will give the background.</p>

<p>@param [Integer] fg The foreground color. @param [Integer] bg The
background color. @param [Integer] alpha The blending factor (fixed 8bit)
@param [Integer] The interpolated color.</p>
          
          

          
          <div class="method-source-code" id="interpolate_quick-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 417</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">interpolate_quick</span>(<span class="ruby-identifier">fg</span>, <span class="ruby-identifier">bg</span>, <span class="ruby-identifier">alpha</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">fg</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">alpha</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">255</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">bg</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">alpha</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>

  <span class="ruby-identifier">alpha_com</span> = <span class="ruby-value">255</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">alpha</span>

  <span class="ruby-identifier">new_r</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">r</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_g</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">g</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_b</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">b</span>(<span class="ruby-identifier">bg</span>))
  <span class="ruby-identifier">new_a</span> = <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">fg</span>)) <span class="ruby-operator">+</span> <span class="ruby-identifier">int8_mult</span>(<span class="ruby-identifier">alpha_com</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">bg</span>))

  <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">new_r</span>, <span class="ruby-identifier">new_g</span>, <span class="ruby-identifier">new_b</span>, <span class="ruby-identifier">new_a</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-opaque-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">opaque!</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the opaque value of this color by removing the alpha channel.
@param [Integer] value The color to transform. @return [Integer] The opaque
color</p>
          
          

          
          <div class="method-source-code" id="opaque-21-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 311</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">opaque!</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">value</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x000000ff</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-opaque-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">opaque?</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this color is fully opaque.</p>

<p>@param [Integer] value The color to test. @return [true, false] True if the
alpha channel equals <a href="Color.html#MAX">MAX</a>.</p>
          
          

          
          <div class="method-source-code" id="opaque-3F-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 304</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">opaque?</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">a</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0x000000ff</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-parse" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parse</span><span
            class="method-args">(source)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Parses a color value given a numeric or string argument.</p>

<p>It supports color numbers, colors in hex notation and named HTML colors.</p>

<p>@param [Integer, String] The color value. @return [Integer] The color
value, with the opacity applied if one was</p>

<pre>given.</pre>
          
          

          
          <div class="method-source-code" id="parse-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">source</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Integer</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^\d+$/</span>; <span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">HEX3_COLOR_REGEXP</span>, <span class="ruby-constant">HEX6_COLOR_REGEXP</span>; <span class="ruby-identifier">from_hex</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-constant">HTML_COLOR_REGEXP</span>; <span class="ruby-identifier">html_color</span>(<span class="ruby-identifier">source</span>.<span class="ruby-identifier">to_s</span>)
    <span class="ruby-keyword">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Don&#39;t know how to create a color from #{source.inspect}!&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pass_bytesize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pass_bytesize</span><span
            class="method-args">(color_mode, depth, width, height)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the number of bytes used for an image pass @param [Integer]
color_mode The color mode in which the pixels are</p>

<pre>stored.</pre>

<p>@param [Integer] depth The color depth of the pixels. @param [Integer]
width The width of the image pass. @param [Integer] width The height of the
image pass. @return [Integer] The number of bytes used per scanline in a
datastream.</p>
          
          

          
          <div class="method-source-code" id="pass_bytesize-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 976</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pass_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">height</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">width</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">height</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
  (<span class="ruby-identifier">scanline_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">height</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pixel_bitsize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pixel_bitsize</span><span
            class="method-args">(color_mode, depth = 8)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the size in bits of a pixel when it is stored using a given color
mode.</p>

<p>@param [Integer] color_mode The color mode in which the pixels are</p>

<pre>stored.</pre>

<p>@param [Integer] depth The color depth of the pixels. @return [Integer] The
number of bytes used per pixel in a datastream.</p>
          
          

          
          <div class="method-source-code" id="pixel_bitsize-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 955</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span> = <span class="ruby-value">8</span>)
  <span class="ruby-identifier">samples_per_pixel</span>(<span class="ruby-identifier">color_mode</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">depth</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pixel_bytesize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pixel_bytesize</span><span
            class="method-args">(color_mode, depth = 8)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the size in bytes of a pixel when it is stored using a given color
mode.</p>

<p>@param [Integer] color_mode The color mode in which the pixels are</p>

<pre>stored.</pre>

<p>@return [Integer] The number of bytes used per pixel in a datastream.</p>
          
          

          
          <div class="method-source-code" id="pixel_bytesize-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 943</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pixel_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span> = <span class="ruby-value">8</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">8</span>
  (<span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>) <span class="ruby-operator">+</span> <span class="ruby-value">7</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">3</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-r" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">r</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the red-component from the color value.</p>

<p>@param [Integer] value The color value. @return [Integer] A value between 0
and <a href="Color.html#MAX">MAX</a>.</p>
          
          

          
          <div class="method-source-code" id="r-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 272</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">r</span>(<span class="ruby-identifier">value</span>)
  (<span class="ruby-identifier">value</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0xff000000</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">24</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rgb" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rgb</span><span
            class="method-args">(r, g, b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new color using an r, g, b triple. @param [Integer] r The
r-component (0-255) @param [Integer] g The g-component (0-255) @param
[Integer] b The b-component (0-255) @return [Integer] The newly constructed
color value.</p>
          
          

          
          <div class="method-source-code" id="rgb-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rgb</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-value">0xff</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rgba" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rgba</span><span
            class="method-args">(r, g, b, a)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new color using an r, g, b triple and an alpha value. @param
[Integer] r The r-component (0-255) @param [Integer] g The g-component
(0-255) @param [Integer] b The b-component (0-255) @param [Integer] a The
opacity (0-255) @return [Integer] The newly constructed color value.</p>
          
          

          
          <div class="method-source-code" id="rgba-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rgba</span>(<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>, <span class="ruby-identifier">a</span>)
  <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">24</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">16</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-samples_per_pixel" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">samples_per_pixel</span><span
            class="method-args">(color_mode)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the number of sample values per pixel. @param [Integer] color_mode
The color mode being used. @return [Integer] The number of sample values
per pixel.</p>
          
          

          
          <div class="method-source-code" id="samples_per_pixel-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 926</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">samples_per_pixel</span>(<span class="ruby-identifier">color_mode</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">color_mode</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_INDEXED</span>;         <span class="ruby-value">1</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_TRUECOLOR</span>;       <span class="ruby-value">3</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_TRUECOLOR_ALPHA</span>; <span class="ruby-value">4</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_GRAYSCALE</span>;       <span class="ruby-value">1</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">COLOR_GRAYSCALE_ALPHA</span>; <span class="ruby-value">2</span>
    <span class="ruby-keyword">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ChunkyPNG</span><span class="ruby-operator">::</span><span class="ruby-constant">NotSupported</span>, <span class="ruby-node">&quot;Don&#39;t know the number of samples for this colormode: #{color_mode}!&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-scanline_bytesize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">scanline_bytesize</span><span
            class="method-args">(color_mode, depth, width)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the number of bytes used per scanline. @param [Integer] color_mode
The color mode in which the pixels are</p>

<pre>stored.</pre>

<p>@param [Integer] depth The color depth of the pixels. @param [Integer]
width The number of pixels per scanline. @return [Integer] The number of
bytes used per scanline in a datastream.</p>
          
          

          
          <div class="method-source-code" id="scanline_bytesize-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 965</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scanline_bytesize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>, <span class="ruby-identifier">width</span>)
  ((<span class="ruby-identifier">pixel_bitsize</span>(<span class="ruby-identifier">color_mode</span>, <span class="ruby-identifier">depth</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">width</span>) <span class="ruby-operator">+</span> <span class="ruby-value">7</span>) <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">3</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_grayscale" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_grayscale</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts a color to a fiting grayscale value. It will conserve the alpha
channel.</p>

<p>This method will return a full color value, with the R, G, and B value set
to the grayscale teint calcuated from the input color&#39;s R, G and B
values.</p>

<p>@param [Integer] color The color to convert. @return [Integer] The input
color, converted to the best fitting</p>

<pre>grayscale.</pre>

<p>@see <a href="Color.html#method-i-grayscale_teint">grayscale_teint</a></p>
          
          

          
          <div class="method-source-code" id="to_grayscale-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 450</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_grayscale</span>(<span class="ruby-identifier">color</span>)
  <span class="ruby-identifier">grayscale_alpha</span>(<span class="ruby-identifier">grayscale_teint</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_grayscale_alpha_bytes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_grayscale_alpha_bytes</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with the grayscale teint and alpha channel values for this
color.</p>

<p>This method expects the color to be grayscale, i.e. r, g, and b value to be
equal and uses only the B channel. If you need to convert a color to
grayscale first, see {#to_grayscale}.</p>

<p>@param [Integer] color The grayscale color to convert. @return
[Array&lt;Integer&gt;] An array with 2 Integer elements. @see <a
href="Color.html#method-i-to_grayscale">to_grayscale</a></p>
          
          

          
          <div class="method-source-code" id="to_grayscale_alpha_bytes-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 695</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_grayscale_alpha_bytes</span>(<span class="ruby-identifier">color</span>)
  [<span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-comment"># assumption r == g == b</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_grayscale_bytes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_grayscale_bytes</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with the grayscale teint value for this color.</p>

<p>This method expects the r, g, and b value to be equal, and the alpha
channel will be discarded.</p>

<p>@param [Integer] color The grayscale color to convert. @return
[Array&lt;Integer&gt;] An array with 1 Integer element.</p>
          
          

          
          <div class="method-source-code" id="to_grayscale_bytes-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 681</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_grayscale_bytes</span>(<span class="ruby-identifier">color</span>)
  [<span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-comment"># assumption r == g == b</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_hex" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_hex</span><span
            class="method-args">(color, include_alpha = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a string representing this color using hex notation (i.e.
rrggbbaa).</p>

<p>@param [Integer] value The color to convert. @return [String] The color in
hex notation, starting with a pound sign.</p>
          
          

          
          <div class="method-source-code" id="to_hex-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 568</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hex</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">include_alpha</span> <span class="ruby-operator">?</span> (<span class="ruby-string">&#39;#%08x&#39;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">color</span>) <span class="ruby-operator">:</span> (<span class="ruby-string">&#39;#%06x&#39;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">color</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-value">8</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_hsb" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">to_hsb</span><span
            class="method-args">(color, include_alpha = false)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Color.html#method-i-to_hsv">to_hsv</a>
        </div>
        
      </div>

    
      <div id="method-i-to_hsl" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_hsl</span><span
            class="method-args">(color, include_alpha = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with the separate HSL components of a color.</p>

<p>Because <a href="../ChunkyPNG.html">ChunkyPNG</a> internally handles colors
as Integers for performance reasons, some rounding  occurs when importing
or exporting HSL colors whose coordinates are float-based.  Because of this
rounding, <a href="Color.html#method-i-to_hsl">to_hsl</a> and <a
href="Color.html#method-i-from_hsl">from_hsl</a> may not be perfect
inverses.</p>

<p>This implementation follows the modern convention of 0 degrees hue
indicating red.</p>

<p>@param [Integer] color The <a href="../ChunkyPNG.html">ChunkyPNG</a> color
to convert. @param [Boolean] include_alpha Flag indicates whether a fourth
element</p>

<pre>representing alpha channel should be included in the returned array.</pre>

<p>@return [<a href="0">Array<Fixnum></a>] The hue of the color (0-360)
@return [<a href="1">Array<Fixnum></a>] The saturation of the color (0-1)
@return [<a href="2">Array<Fixnum></a>] The lightness of the color (0-1)
@return [<a href="3">Array<Fixnum></a>] Optional fourth element for alpha,
included if</p>

<pre>include_alpha=true (0-255)</pre>

<p>@see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a></p>
          
          

          
          <div class="method-source-code" id="to_hsl-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 619</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hsl</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">hue</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">max</span>, <span class="ruby-identifier">min</span> = <span class="ruby-identifier">hue_and_chroma</span>(<span class="ruby-identifier">color</span>)
  <span class="ruby-identifier">lightness</span>  = <span class="ruby-value">0.5</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">max</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">min</span>)
  <span class="ruby-identifier">saturation</span> = <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-operator">?</span> <span class="ruby-value">0.0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">fdiv</span>(<span class="ruby-value">1</span> <span class="ruby-operator">-</span> (<span class="ruby-value">2</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">lightness</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">abs</span>)

  <span class="ruby-identifier">include_alpha</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-operator">:</span>
                  [<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">lightness</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_hsv" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_hsv</span><span
            class="method-args">(color, include_alpha = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with the separate HSV components of a color.</p>

<p>Because <a href="../ChunkyPNG.html">ChunkyPNG</a> internally handles colors
as Integers for performance reasons, some rounding  occurs when importing
or exporting HSV colors whose coordinates are float-based.  Because of this
rounding, <a href="Color.html#method-i-to_hsv">to_hsv</a> and <a
href="Color.html#method-i-from_hsv">from_hsv</a> may not be perfect
inverses.</p>

<p>This implementation follows the modern convention of 0 degrees hue
indicating red.</p>

<p>@param [Integer] color The <a href="../ChunkyPNG.html">ChunkyPNG</a> color
to convert. @param [Boolean] include_alpha Flag indicates whether a fourth
element</p>

<pre>representing alpha channel should be included in the returned array.</pre>

<p>@return [<a href="0">Array</a>] The hue of the color (0-360) @return [<a
href="1">Array</a>] The saturation of the color (0-1) @return [<a
href="2">Array</a>] The value of the color (0-1) @return [<a
href="3">Array</a>] Optional fourth element for alpha, included if</p>

<pre>include_alpha=true (0-255)</pre>

<p>@see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a></p>
          
          

          
          <div class="method-source-code" id="to_hsv-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 591</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hsv</span>(<span class="ruby-identifier">color</span>, <span class="ruby-identifier">include_alpha</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">hue</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">max</span>, <span class="ruby-identifier">min</span> = <span class="ruby-identifier">hue_and_chroma</span>(<span class="ruby-identifier">color</span>)
  <span class="ruby-identifier">value</span>      = <span class="ruby-identifier">max</span>
  <span class="ruby-identifier">saturation</span> = <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-operator">?</span> <span class="ruby-value">0.0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">fdiv</span>(<span class="ruby-identifier">value</span>)

  <span class="ruby-identifier">include_alpha</span> <span class="ruby-operator">?</span> [<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)] <span class="ruby-operator">:</span>
                  [<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">value</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Color.html#method-i-to_hsb">to_hsb</a>
        </div>
        

        
      </div>

    
      <div id="method-i-to_truecolor_alpha_bytes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_truecolor_alpha_bytes</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with the separate RGBA values for this color.</p>

<p>@param [Integer] color The color to convert. @return [Array&lt;Integer&gt;]
An array with 4 Integer elements.</p>
          
          

          
          <div class="method-source-code" id="to_truecolor_alpha_bytes-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 661</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_truecolor_alpha_bytes</span>(<span class="ruby-identifier">color</span>)
  [<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">a</span>(<span class="ruby-identifier">color</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_truecolor_bytes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_truecolor_bytes</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array with the separate RGB values for this color. The alpha
channel will be discarded.</p>

<p>@param [Integer] color The color to convert. @return [Array&lt;Integer&gt;]
An array with 3 Integer elements.</p>
          
          

          
          <div class="method-source-code" id="to_truecolor_bytes-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 670</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_truecolor_bytes</span>(<span class="ruby-identifier">color</span>)
  [<span class="ruby-identifier">r</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">g</span>(<span class="ruby-identifier">color</span>), <span class="ruby-identifier">b</span>(<span class="ruby-identifier">color</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-cylindrical_to_cubic" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cylindrical_to_cubic</span><span
            class="method-args">(hue, saturation, y_component, chroma)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convert one HSL or HSV triple and associated chroma to a scaled rgb triple</p>

<p>This method encapsulates the shared mathematical operations needed to
convert coordinates from a cylindrical colorspace such as HSL or HSV into
coordinates of the RGB colorspace.</p>

<p>Even though chroma values are derived from the other three coordinates, the
formula for calculating chroma differs for each colorspace.  Since it is
calculated differently for each colorspace, it must be passed in as a
parameter.</p>

<p>@param [Fixnum] hue The hue-component (0-360) @param [Fixnum] saturation
The saturation-component (0-1) @param [Fixnum] y_component The y_component
can represent either lightness</p>

<pre>or brightness/value (0-1) depending on which scheme (HSV/HSL) is being used.</pre>

<p>@param [Fixnum] chroma The associated chroma value. @return
[Array&lt;Fixnum&gt;] A scaled r,g,b triple. Scheme-dependent</p>

<pre>adjustments are still needed to reach the true r,g,b values.</pre>

<p>@see <a
href="http://en.wikipedia.org/wiki/HSL_and_HSV">en.wikipedia.org/wiki/HSL_and_HSV</a>
@see <a
href="http://www.tomjewett.com/colors/hsb.html">www.tomjewett.com/colors/hsb.html</a>
@private</p>
          
          

          
          <div class="method-source-code" id="cylindrical_to_cubic-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 249</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cylindrical_to_cubic</span>(<span class="ruby-identifier">hue</span>, <span class="ruby-identifier">saturation</span>, <span class="ruby-identifier">y_component</span>, <span class="ruby-identifier">chroma</span>)
  <span class="ruby-identifier">hue_prime</span> = <span class="ruby-identifier">hue</span>.<span class="ruby-identifier">fdiv</span>(<span class="ruby-value">60</span>)
  <span class="ruby-identifier">x</span> = <span class="ruby-identifier">chroma</span> <span class="ruby-operator">*</span> (<span class="ruby-value">1</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">hue_prime</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">abs</span>)

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">hue_prime</span>
  <span class="ruby-keyword">when</span> (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">1</span>); [<span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">x</span>, <span class="ruby-value">0</span>]
  <span class="ruby-keyword">when</span> (<span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-value">2</span>); [<span class="ruby-identifier">x</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-value">0</span>]
  <span class="ruby-keyword">when</span> (<span class="ruby-value">2</span><span class="ruby-operator">...</span><span class="ruby-value">3</span>); [<span class="ruby-value">0</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">x</span>]
  <span class="ruby-keyword">when</span> (<span class="ruby-value">3</span><span class="ruby-operator">...</span><span class="ruby-value">4</span>); [<span class="ruby-value">0</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">chroma</span>]
  <span class="ruby-keyword">when</span> (<span class="ruby-value">4</span><span class="ruby-operator">...</span><span class="ruby-value">5</span>); [<span class="ruby-identifier">x</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">chroma</span>]
  <span class="ruby-keyword">when</span> (<span class="ruby-value">5</span><span class="ruby-operator">...</span><span class="ruby-value">6</span>); [<span class="ruby-identifier">chroma</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">x</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-hue_and_chroma" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hue_and_chroma</span><span
            class="method-args">(color)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method encapsulates the logic needed to extract hue and chroma from a
ChunkPNG color. This logic is shared by the cylindrical HSV/HSB and HSL
color space models.</p>

<p>@param [Integer] A <a href="../ChunkyPNG.html">ChunkyPNG</a> color. @return
[Fixnum] hue The hue of the color (0-360) @return [Fixnum] chroma The
chroma of the color (0-1) @return [Fixnum] max The magnitude of the largest
scaled rgb component (0-1) @return [Fixnum] min The magnitude of the
smallest scaled rgb component (0-1) @private</p>
          
          

          
          <div class="method-source-code" id="hue_and_chroma-source">
            <pre><span class="ruby-comment"># File lib/chunky_png/color.rb, line 638</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hue_and_chroma</span>(<span class="ruby-identifier">color</span>)
  <span class="ruby-identifier">scaled_rgb</span>      = <span class="ruby-identifier">to_truecolor_bytes</span>(<span class="ruby-identifier">color</span>)
  <span class="ruby-identifier">scaled_rgb</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">fdiv</span>(<span class="ruby-value">255</span>) }
  <span class="ruby-identifier">min</span>, <span class="ruby-identifier">max</span> = <span class="ruby-identifier">scaled_rgb</span>.<span class="ruby-identifier">minmax</span>
  <span class="ruby-identifier">chroma</span>   = <span class="ruby-identifier">max</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">min</span>

  <span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>   = <span class="ruby-identifier">scaled_rgb</span>
  <span class="ruby-identifier">hue_prime</span> = <span class="ruby-identifier">chroma</span>.<span class="ruby-identifier">zero?</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">case</span> <span class="ruby-identifier">max</span>
                                 <span class="ruby-keyword">when</span> <span class="ruby-identifier">r</span>; (<span class="ruby-identifier">g</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">b</span>).<span class="ruby-identifier">fdiv</span>(<span class="ruby-identifier">chroma</span>)
                                 <span class="ruby-keyword">when</span> <span class="ruby-identifier">g</span>; (<span class="ruby-identifier">b</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">r</span>).<span class="ruby-identifier">fdiv</span>(<span class="ruby-identifier">chroma</span>) <span class="ruby-operator">+</span> <span class="ruby-value">2</span>
                                 <span class="ruby-keyword">when</span> <span class="ruby-identifier">b</span>; (<span class="ruby-identifier">r</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">g</span>).<span class="ruby-identifier">fdiv</span>(<span class="ruby-identifier">chroma</span>) <span class="ruby-operator">+</span> <span class="ruby-value">4</span>
                                 <span class="ruby-keyword">else</span> <span class="ruby-value">0</span>
                                 <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">hue</span> = <span class="ruby-value">60</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">hue_prime</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">hue</span>.<span class="ruby-identifier">round</span>, <span class="ruby-identifier">chroma</span>, <span class="ruby-identifier">max</span>, <span class="ruby-identifier">min</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

