<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Daemons - daemons-1.2.2 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#module-Daemons-label-What+does+daemons+internally+do+with+my+daemons-3F">What does daemons internally do with my daemons?</a>
    <li><a href="#module-Daemons-label-How+do+PidFiles+work-3F+Where+are+they+stored-3F">How do PidFiles work? Where are they stored?</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-call">::call</a>
    
    <li ><a href="#method-c-controller">::controller</a>
    
    <li ><a href="#method-c-daemonize">::daemonize</a>
    
    <li ><a href="#method-c-group">::group</a>
    
    <li ><a href="#method-c-run">::run</a>
    
    <li ><a href="#method-c-run_proc">::run_proc</a>
    
    <li ><a href="#method-i-call">#call</a>
    
    <li ><a href="#method-i-controller">#controller</a>
    
    <li ><a href="#method-i-daemonize">#daemonize</a>
    
    <li ><a href="#method-i-group">#group</a>
    
    <li ><a href="#method-i-run">#run</a>
    
    <li ><a href="#method-i-run_proc">#run_proc</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-Daemons">
  <h1 id="module-Daemons" class="module">
    module Daemons
  </h1>

  <section class="description">
    
<p>All functions and classes that <a href="Daemons.html">Daemons</a> provides
reside in this module.</p>

<p><a href="Daemons.html">Daemons</a> is normally invoked by one of the
following four ways:</p>
<ol><li>
<p><code>Daemons.run(script, options)</code>: This is used in wrapper-scripts
that are supposed to control other ruby scripts or external applications.
Control is completely passed to the daemons library. Such wrapper script
need to be invoked with command line options like &#39;start&#39; or
&#39;stop&#39; to do anything useful.</p>
</li><li>
<p><code>Daemons.run_proc(app_name, options) { (...) }</code>: This is used in
wrapper-scripts that are supposed to control a proc. Control is completely
passed to the daemons library. Such wrapper scripts need to be invoked with
command line options like &#39;start&#39; or &#39;stop&#39; to do anything
useful.</p>
</li><li>
<p><code>Daemons.call(options) { block }</code>: Execute the block in a new
daemon. <code>Daemons.call</code> will return immediately after spawning
the daemon with the new <a href="Daemons/Application.html">Application</a>
object as a return value.</p>
</li><li>
<p><code>Daemons.daemonize(options)</code>: <a
href="Daemonize.html">Daemonize</a> the currently runnig process, i.e. the
calling process will become a daemon.</p>
</li></ol>

<h2 id="module-Daemons-label-What+does+daemons+internally+do+with+my+daemons-3F">What does daemons internally do with my daemons?<span><a href="#module-Daemons-label-What+does+daemons+internally+do+with+my+daemons-3F">&para;</a> <a href="#top">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt><strong>or</strong>
<dd>
<p>why do my daemons crash when they try to open a file?</p>
</dd><dt><strong>or</strong>
<dd>
<p>why can I not see any output from the daemon on the console (when using for
example <code>puts</code>)?</p>
</dd></dl>

<p>From a technical aspect of view, daemons does the following when creating a
daemon:</p>
<ol><li>
<p>Forks a child (and exits the parent process, if needed)</p>
</li><li>
<p>Becomes a session leader (which detaches the program from the controlling
terminal).</p>
</li><li>
<p>Forks another child process and exits first child. This prevents the
potential of acquiring a controlling terminal.</p>
</li><li>
<p>Changes the current working directory to “/”.</p>
</li><li>
<p>Clears the file creation mask (sets <code>umask</code> to 0000).</p>
</li><li>
<p>Closes file descriptors (reopens <code>STDOUT</code> and
<code>STDERR</code> to point to a logfile if possible).</p>
</li></ol>

<p>So what does this mean for your daemons:</p>
<ul><li>
<p>the current directory is &#39;/&#39;</p>
</li><li>
<p>you cannot receive any input from the console (for example no
<code>gets</code>)</p>
</li><li>
<p>you cannot output anything from the daemons with
<code>puts</code>/<code>print</code> unless a logfile is used</p>
</li></ul>

<h2 id="module-Daemons-label-How+do+PidFiles+work-3F+Where+are+they+stored-3F">How do PidFiles work? Where are they stored?<span><a href="#module-Daemons-label-How+do+PidFiles+work-3F+Where+are+they+stored-3F">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Also, you are maybe interested in reading the documentation for the class
<a href="Daemons/PidFile.html">PidFile</a>. There you can find out about
how <a href="Daemons.html">Daemons</a> works internally and how and where
the so called <em>PidFiles</em> are stored.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="VERSION">VERSION
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">call</span><span
            class="method-args">(options = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Execute the block in a new daemon. <code>Daemons.call</code> will return
immediately after spawning the daemon with the new <a
href="Daemons/Application.html">Application</a> object as a return value.</p>
<dl class="rdoc-list note-list"><dt><code>app_name</code>
<dd>
<p>The name of the application.</p>
</dd><dt><code>options</code>
<dd>
<p>A hash that may contain one or more of the options listed below</p>
</dd><dt><code>block</code>
<dd>
<p>The block to call in the daemon.</p>
</dd></dl>

<h3 id="method-c-call-label-Options-3A">Options:<span><a href="#method-c-call-label-Options-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>:multiple</code>
<dd>
<p>Specifies whether multiple instances of the same script are allowed to run
at the same time</p>
</dd><dt><code>:ontop</code>
<dd>
<p>When given, stay on top, i.e. do not daemonize the application</p>
</dd><dt><code>:backtrace</code>
<dd>
<p>Write a backtrace of the last exceptions to the file
&#39;[app_name].log&#39; in the pid-file directory if the application exits
due to an uncaught exception</p>
</dd></dl>
<hr>

<h3 id="method-c-call-label-Example-3A">Example:<span><a href="#method-c-call-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>options = {
  :app_name   =&gt; &quot;myproc&quot;,
  :backtrace  =&gt; true,
  :monitor    =&gt; true,
  :ontop      =&gt; true
}

Daemons.call(options) begin
  # Server loop:
  loop {
    conn = accept_conn()
    serve(conn)
  }
end</pre>
          
          

          
          <div class="method-source-code" id="call-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">call</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-string">&#39;Daemons.call: no block given&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:proc</span>] = <span class="ruby-identifier">block</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:mode</span>] = <span class="ruby-value">:proc</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&#39;proc&#39;</span>

  <span class="ruby-ivar">@group</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ApplicationGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>], <span class="ruby-identifier">options</span>)

  <span class="ruby-identifier">new_app</span> = <span class="ruby-ivar">@group</span>.<span class="ruby-identifier">new_application</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">new_app</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-identifier">new_app</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-controller" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">controller</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the internal <a href="Daemons/Controller.html">Controller</a>
instance.</p>
          
          

          
          <div class="method-source-code" id="controller-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">controller</span>
  <span class="ruby-ivar">@controller</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-daemonize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">daemonize</span><span
            class="method-args">(options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Daemonize.html">Daemonize</a> the currently runnig process, i.e.
the calling process will become a daemon.</p>
<dl class="rdoc-list note-list"><dt><code>options</code>
<dd>
<p>A hash that may contain one or more of the options listed below</p>
</dd></dl>

<h3 id="method-c-daemonize-label-Options-3A">Options:<span><a href="#method-c-daemonize-label-Options-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>:ontop</code>
<dd>
<p>When given, stay on top, i.e. do not daemonize the application</p>
</dd><dt><code>:backtrace</code>
<dd>
<p>Write a backtrace of the last exceptions to the file
&#39;[app_name].log&#39; in the pid-file directory if the application exits
due to an uncaught exception</p>
</dd><dt><code>:app_name</code>
<dd>
<p>The name of the application. This will be used to contruct the name of the
pid files and log files. Defaults to the basename of the script.</p>
</dd><dt><code>:dir_mode</code>
<dd>
<p>Either <code>:script</code> (the directory for writing files to given by
<code>:dir</code> is interpreted relative to the script location given by
<code>script</code>, the default) or <code>:normal</code> (the directory
given by <code>:dir</code> is interpreted as a (absolute or relative) path)
or <code>:system</code> (<code>/var/run</code> is used as the file
directory)</p>
</dd><dt><code>:dir</code>
<dd>
<p>Used in combination with <code>:dir_mode</code> (description above)</p>
</dd><dt><code>:log_dir</code>
<dd>
<p>A specific directory to put the log files into (when not given, resort to
the default location as derived from the :dir_mode and :dir options</p>
</dd><dt><code>:log_output</code>
<dd>
<p>When given (i.e. set to true), redirect both STDOUT and STDERR to a logfile
named &#39;[app_name].output&#39; in the pid-file directory</p>
</dd></dl>
<hr>

<h3 id="method-c-daemonize-label-Example-3A">Example:<span><a href="#method-c-daemonize-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">options</span> = {
  :<span class="ruby-identifier">backtrace</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
  :<span class="ruby-identifier">ontop</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
  :<span class="ruby-identifier">log_output</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
}

<span class="ruby-constant">Daemons</span>.<span class="ruby-identifier">daemonize</span>(<span class="ruby-identifier">options</span>)

<span class="ruby-comment"># Server loop:</span>
<span class="ruby-identifier">loop</span> {
  <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">accept_conn</span>()
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;some text which goes to the output logfile&quot;</span>
  <span class="ruby-identifier">serve</span>(<span class="ruby-identifier">conn</span>)
}
</pre>
          
          

          
          <div class="method-source-code" id="daemonize-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">daemonize</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:script</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-keyword">__FILE__</span>)

  <span class="ruby-ivar">@group</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ApplicationGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:script</span>], <span class="ruby-identifier">options</span>)

  <span class="ruby-ivar">@group</span>.<span class="ruby-identifier">new_application</span>(<span class="ruby-value">:mode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:none</span>).<span class="ruby-identifier">start</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-group" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">group</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the internal <a
href="Daemons/ApplicationGroup.html">ApplicationGroup</a> instance.</p>
          
          

          
          <div class="method-source-code" id="group-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 303</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group</span>
  <span class="ruby-ivar">@group</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(script, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Passes control to <a href="Daemons.html">Daemons</a>. This is used in
wrapper-scripts that are supposed to control other ruby scripts or external
applications. Control is completely passed to the daemons library. Such
wrapper script should be invoked with command line options like
&#39;start&#39; or &#39;stop&#39; to do anything useful.</p>
<dl class="rdoc-list note-list"><dt><code>script</code>
<dd>
<p>This is the path to the script that should be run as a daemon. Please note
that <a href="Daemons.html">Daemons</a> runs this script with <code>load
&lt;script&gt;</code>. Also note that <a href="Daemons.html">Daemons</a>
cannot detect the directory in which the controlling script resides, so
this has to be either an absolute path or you have to run the controlling
script from the appropriate directory. Your script name should not end with
_monitor because that name is reserved for a monitor process which is there
to restart your daemon if it crashes.</p>
</dd><dt><code>options</code>
<dd>
<p>A hash that may contain one or more of the options listed below</p>
</dd></dl>

<h3 id="method-c-run-label-Options-3A">Options:<span><a href="#method-c-run-label-Options-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt><code>:app_name</code>
<dd>
<p>The name of the application. This will be used to contruct the name of the
pid files and log files. Defaults to the basename of the script.</p>
</dd><dt><code>:ARGV</code>
<dd>
<p>An array of strings containing parameters and switches for <a
href="Daemons.html">Daemons</a>. This includes both parameters for <a
href="Daemons.html">Daemons</a> itself and the controlled scripted. These
are assumed to be separated by an array element &#39;–&#39;, .e.g.
[&#39;start&#39;, &#39;f&#39;, &#39;–&#39;, &#39;param1_for_script&#39;,
&#39;param2_for_script&#39;]. If not given, ARGV (the parameters given to
the Ruby process) will be used.</p>
</dd><dt><code>:dir_mode</code>
<dd>
<p>Either <code>:script</code> (the directory for writing the pid files to
given by <code>:dir</code> is interpreted relative to the script location
given by <code>script</code>, the default) or <code>:normal</code> (the
directory given by <code>:dir</code> is interpreted as a (absolute or
relative) path) or <code>:system</code> (<code>/var/run</code> is used as
the pid file directory)</p>
</dd><dt><code>:dir</code>
<dd>
<p>Used in combination with <code>:dir_mode</code> (description above)</p>
</dd><dt><code>:multiple</code>
<dd>
<p>Specifies whether multiple instances of the same script are allowed to run
at the same time</p>
</dd><dt><code>:ontop</code>
<dd>
<p>When given (i.e. set to true), stay on top, i.e. do not daemonize the
application (but the pid-file and other things are written as usual)</p>
</dd><dt><code>:mode</code>
<dd>
<p><code>:load</code> Load the script with <code>Kernel.load</code>; note that
:stop_proc only works for the :load (and :proc) mode. <code>:exec</code>
Execute the script file with <code>Kernel.exec</code></p>
</dd><dt><code>:backtrace</code>
<dd>
<p>Write a backtrace of the last exceptions to the file
&#39;[app_name].log&#39; in the pid-file directory if the application exits
due to an uncaught exception</p>
</dd><dt><code>:monitor</code>
<dd>
<p><a href="Daemons/Monitor.html">Monitor</a> the programs and restart crashed
instances</p>
</dd><dt><code>:log_dir</code>
<dd>
<p>A specific directory to put the log files into (when not given, resort to
the default location as derived from the :dir_mode and :dir options</p>
</dd><dt><code>:logfilename</code>
<dd>
<p>Specifiy a custom log file name</p>
</dd><dt><code>:log_output</code>
<dd>
<p>When given (i.e. set to true), redirect both STDOUT and STDERR to a logfile
named &#39;[app_name].output&#39; (or as given in :output_logfilename) in
the pid-file directory</p>
</dd><dt><code>:output_logfilename</code>
<dd>
<p>Specifiy a custom output redirection file name</p>
</dd><dt><code>:keep_pid_files</code>
<dd>
<p>When given do not delete lingering pid-files (files for which the process
is no longer running).</p>
</dd><dt><code>:hard_exit</code>
<dd>
<p>When given use exit! to end a daemons instead of exit (this will for
example not call at_exit handlers).</p>
</dd><dt><code>:stop_proc</code>
<dd>
<p>A proc that will be called when the daemonized process receives a request
to stop (works only for :load and :proc mode)</p>
</dd></dl>
<hr>

<h3 id="method-c-run-label-Example-3A">Example:<span><a href="#method-c-run-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>options = {
  :app_name           =&gt; &quot;my_app&quot;,
  :ARGV               =&gt; [&#39;start&#39;, &#39;-f&#39;, &#39;--&#39;, &#39;param_for_myscript&#39;]
  :dir_mode           =&gt; :script,
  :dir                =&gt; &#39;pids&#39;,
  :multiple           =&gt; true,
  :ontop              =&gt; true,
  :mode               =&gt; :exec,
  :backtrace          =&gt; true,
  :monitor            =&gt; true,
  :logfilename        =&gt; &#39;custom_logfile.log&#39;,
  :output_logfilename =&gt; &#39;custom_outputfile.txt&#39;
}

Daemons.run(File.join(File.dirname(__FILE__), &#39;myscript.rb&#39;), options)</pre>
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 139</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">script</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:script</span>] = <span class="ruby-identifier">script</span>
  <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Controller</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:ARGV</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ARGV</span>)

  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">catch_exceptions</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">run</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># I don&#39;t think anybody will ever use @group, as this location should not be reached under non-error conditions</span>
  <span class="ruby-ivar">@group</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">group</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-run_proc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run_proc</span><span
            class="method-args">(app_name, options = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Passes control to <a href="Daemons.html">Daemons</a>. This function does
the same as <a href="Daemons.html#method-i-run">#run</a> except that not a
script but a proc will be run as a daemon while this script provides
command line options like &#39;start&#39; or &#39;stop&#39; and the whole
pid-file management to control the proc.</p>
<dl class="rdoc-list note-list"><dt><code>app_name</code>
<dd>
<p>The name of the application. This will be used to contruct the name of the
pid files and log files. Defaults to the basename of the script.</p>
</dd><dt><code>options</code>
<dd>
<p>A hash that may contain one or more of the options listed in the
documentation for <a href="Daemons.html#method-i-run">#run</a></p>
</dd></dl>

<p>A block must be given to this function. The block will be used as the :proc
entry in the options hash.</p>
<hr>

<h3 id="method-c-run_proc-label-Example-3A">Example:<span><a href="#method-c-run_proc-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-constant">Daemons</span>.<span class="ruby-identifier">run_proc</span>(<span class="ruby-string">&#39;myproc.rb&#39;</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">accept_connection</span>()
    <span class="ruby-identifier">read_request</span>()
    <span class="ruby-identifier">send_response</span>()
    <span class="ruby-identifier">close_connection</span>()
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="run_proc-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_proc</span>(<span class="ruby-identifier">app_name</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>] = <span class="ruby-identifier">app_name</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:mode</span>] = <span class="ruby-value">:proc</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:proc</span>] = <span class="ruby-identifier">block</span>

  <span class="ruby-comment"># we do not have a script location so the the :script :dir_mode cannot be used, change it to :normal</span>
  <span class="ruby-keyword">if</span> [<span class="ruby-keyword">nil</span>, <span class="ruby-value">:script</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:dir_mode</span>]
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:dir_mode</span>] = <span class="ruby-value">:normal</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:dir</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;.&#39;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Controller</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:ARGV</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ARGV</span>)

  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">catch_exceptions</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">run</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># I don&#39;t think anybody will ever use @group, as this location should not be reached under non-error conditions</span>
  <span class="ruby-ivar">@group</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">group</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">call</span><span
            class="method-args">(options = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Execute the block in a new daemon. <code>Daemons.call</code> will return
immediately after spawning the daemon with the new <a
href="Daemons/Application.html">Application</a> object as a return value.</p>
<dl class="rdoc-list note-list"><dt>app_name
<dd>
<p>The name of the application.</p>
</dd><dt>options
<dd>
<p>A hash that may contain one or more of the options listed below</p>
</dd><dt>block
<dd>
<p>The block to call in the daemon.</p>
</dd></dl>

<h3 id="method-i-call-label-Options-3A">Options:<span><a href="#method-i-call-label-Options-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt>:multiple
<dd>
<p>Specifies whether multiple instances of the same script are allowed to run
at the same time</p>
</dd><dt>:ontop
<dd>
<p>When given, stay on top, i.e. do not daemonize the application</p>
</dd><dt>:backtrace
<dd>
<p>Write a backtrace of the last exceptions to the file
&#39;[app_name].log&#39; in the pid-file directory if the application exits
due to an uncaught exception</p>
</dd></dl>
<hr>

<h3 id="method-i-call-label-Example-3A">Example:<span><a href="#method-i-call-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>options = {
  :app_name   =&gt; &quot;myproc&quot;,
  :backtrace  =&gt; true,
  :monitor    =&gt; true,
  :ontop      =&gt; true
}

Daemons.call(options) begin
  # Server loop:
  loop {
    conn = accept_conn()
    serve(conn)
  }
end</pre>
          
          

          
          <div class="method-source-code" id="call-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">call</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-identifier">fail</span> <span class="ruby-string">&#39;Daemons.call: no block given&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:proc</span>] = <span class="ruby-identifier">block</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:mode</span>] = <span class="ruby-value">:proc</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>] <span class="ruby-operator">||=</span> <span class="ruby-string">&#39;proc&#39;</span>

  <span class="ruby-ivar">@group</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ApplicationGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>], <span class="ruby-identifier">options</span>)

  <span class="ruby-identifier">new_app</span> = <span class="ruby-ivar">@group</span>.<span class="ruby-identifier">new_application</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">new_app</span>.<span class="ruby-identifier">start</span>

  <span class="ruby-identifier">new_app</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-controller" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">controller</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the internal <a href="Daemons/Controller.html">Controller</a>
instance.</p>
          
          

          
          <div class="method-source-code" id="controller-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">controller</span>
  <span class="ruby-ivar">@controller</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-daemonize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">daemonize</span><span
            class="method-args">(options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Daemonize.html">Daemonize</a> the currently runnig process, i.e.
the calling process will become a daemon.</p>
<dl class="rdoc-list note-list"><dt>options
<dd>
<p>A hash that may contain one or more of the options listed below</p>
</dd></dl>

<h3 id="method-i-daemonize-label-Options-3A">Options:<span><a href="#method-i-daemonize-label-Options-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt>:ontop
<dd>
<p>When given, stay on top, i.e. do not daemonize the application</p>
</dd><dt>:backtrace
<dd>
<p>Write a backtrace of the last exceptions to the file
&#39;[app_name].log&#39; in the pid-file directory if the application exits
due to an uncaught exception</p>
</dd><dt>:app_name
<dd>
<p>The name of the application. This will be used to contruct the name of the
pid files and log files. Defaults to the basename of the script.</p>
</dd><dt>:dir_mode
<dd>
<p>Either <code>:script</code> (the directory for writing files to given by
<code>:dir</code> is interpreted relative to the script location given by
<code>script</code>, the default) or <code>:normal</code> (the directory
given by <code>:dir</code> is interpreted as a (absolute or relative) path)
or <code>:system</code> (<code>/var/run</code> is used as the file
directory)</p>
</dd><dt>:dir
<dd>
<p>Used in combination with <code>:dir_mode</code> (description above)</p>
</dd><dt>:log_dir
<dd>
<p>A specific directory to put the log files into (when not given, resort to
the default location as derived from the :dir_mode and :dir options</p>
</dd><dt>:log_output
<dd>
<p>When given (i.e. set to true), redirect both STDOUT and STDERR to a logfile
named &#39;[app_name].output&#39; in the pid-file directory</p>
</dd></dl>
<hr>

<h3 id="method-i-daemonize-label-Example-3A">Example:<span><a href="#method-i-daemonize-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">options</span> = {
  :<span class="ruby-identifier">backtrace</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
  :<span class="ruby-identifier">ontop</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,
  :<span class="ruby-identifier">log_output</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
}

<span class="ruby-constant">Daemons</span>.<span class="ruby-identifier">daemonize</span>(<span class="ruby-identifier">options</span>)

<span class="ruby-comment"># Server loop:</span>
<span class="ruby-identifier">loop</span> {
  <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">accept_conn</span>()
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;some text which goes to the output logfile&quot;</span>
  <span class="ruby-identifier">serve</span>(<span class="ruby-identifier">conn</span>)
}
</pre>
          
          

          
          <div class="method-source-code" id="daemonize-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">daemonize</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:script</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-keyword">__FILE__</span>)

  <span class="ruby-ivar">@group</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ApplicationGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:script</span>], <span class="ruby-identifier">options</span>)

  <span class="ruby-ivar">@group</span>.<span class="ruby-identifier">new_application</span>(<span class="ruby-value">:mode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:none</span>).<span class="ruby-identifier">start</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-group" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">group</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the internal <a
href="Daemons/ApplicationGroup.html">ApplicationGroup</a> instance.</p>
          
          

          
          <div class="method-source-code" id="group-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 303</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group</span>
  <span class="ruby-ivar">@group</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(script, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Passes control to <a href="Daemons.html">Daemons</a>. This is used in
wrapper-scripts that are supposed to control other ruby scripts or external
applications. Control is completely passed to the daemons library. Such
wrapper script should be invoked with command line options like
&#39;start&#39; or &#39;stop&#39; to do anything useful.</p>
<dl class="rdoc-list note-list"><dt>script
<dd>
<p>This is the path to the script that should be run as a daemon. Please note
that <a href="Daemons.html">Daemons</a> runs this script with <code>load
&lt;script&gt;</code>. Also note that <a href="Daemons.html">Daemons</a>
cannot detect the directory in which the controlling script resides, so
this has to be either an absolute path or you have to run the controlling
script from the appropriate directory. Your script name should not end with
_monitor because that name is reserved for a monitor process which is there
to restart your daemon if it crashes.</p>
</dd><dt>options
<dd>
<p>A hash that may contain one or more of the options listed below</p>
</dd></dl>

<h3 id="method-i-run-label-Options-3A">Options:<span><a href="#method-i-run-label-Options-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl class="rdoc-list note-list"><dt>:app_name
<dd>
<p>The name of the application. This will be used to contruct the name of the
pid files and log files. Defaults to the basename of the script.</p>
</dd><dt>:ARGV
<dd>
<p>An array of strings containing parameters and switches for <a
href="Daemons.html">Daemons</a>. This includes both parameters for <a
href="Daemons.html">Daemons</a> itself and the controlled scripted. These
are assumed to be separated by an array element &#39;–&#39;, .e.g.
[&#39;start&#39;, &#39;f&#39;, &#39;–&#39;, &#39;param1_for_script&#39;,
&#39;param2_for_script&#39;]. If not given, ARGV (the parameters given to
the Ruby process) will be used.</p>
</dd><dt>:dir_mode
<dd>
<p>Either <code>:script</code> (the directory for writing the pid files to
given by <code>:dir</code> is interpreted relative to the script location
given by <code>script</code>, the default) or <code>:normal</code> (the
directory given by <code>:dir</code> is interpreted as a (absolute or
relative) path) or <code>:system</code> (<code>/var/run</code> is used as
the pid file directory)</p>
</dd><dt>:dir
<dd>
<p>Used in combination with <code>:dir_mode</code> (description above)</p>
</dd><dt>:multiple
<dd>
<p>Specifies whether multiple instances of the same script are allowed to run
at the same time</p>
</dd><dt>:ontop
<dd>
<p>When given (i.e. set to true), stay on top, i.e. do not daemonize the
application (but the pid-file and other things are written as usual)</p>
</dd><dt>:mode
<dd>
<p><code>:load</code> Load the script with <code>Kernel.load</code>; note that
:stop_proc only works for the :load (and :proc) mode. <code>:exec</code>
Execute the script file with <code>Kernel.exec</code></p>
</dd><dt>:backtrace
<dd>
<p>Write a backtrace of the last exceptions to the file
&#39;[app_name].log&#39; in the pid-file directory if the application exits
due to an uncaught exception</p>
</dd><dt>:monitor
<dd>
<p><a href="Daemons/Monitor.html">Monitor</a> the programs and restart crashed
instances</p>
</dd><dt>:log_dir
<dd>
<p>A specific directory to put the log files into (when not given, resort to
the default location as derived from the :dir_mode and :dir options</p>
</dd><dt>:logfilename
<dd>
<p>Specifiy a custom log file name</p>
</dd><dt>:log_output
<dd>
<p>When given (i.e. set to true), redirect both STDOUT and STDERR to a logfile
named &#39;[app_name].output&#39; (or as given in :output_logfilename) in
the pid-file directory</p>
</dd><dt>:output_logfilename
<dd>
<p>Specifiy a custom output redirection file name</p>
</dd><dt>:keep_pid_files
<dd>
<p>When given do not delete lingering pid-files (files for which the process
is no longer running).</p>
</dd><dt>:hard_exit
<dd>
<p>When given use exit! to end a daemons instead of exit (this will for
example not call at_exit handlers).</p>
</dd><dt>:stop_proc
<dd>
<p>A proc that will be called when the daemonized process receives a request
to stop (works only for :load and :proc mode)</p>
</dd></dl>
<hr>

<h3 id="method-i-run-label-Example-3A">Example:<span><a href="#method-i-run-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre>options = {
  :app_name           =&gt; &quot;my_app&quot;,
  :ARGV               =&gt; [&#39;start&#39;, &#39;-f&#39;, &#39;--&#39;, &#39;param_for_myscript&#39;]
  :dir_mode           =&gt; :script,
  :dir                =&gt; &#39;pids&#39;,
  :multiple           =&gt; true,
  :ontop              =&gt; true,
  :mode               =&gt; :exec,
  :backtrace          =&gt; true,
  :monitor            =&gt; true,
  :logfilename        =&gt; &#39;custom_logfile.log&#39;,
  :output_logfilename =&gt; &#39;custom_outputfile.txt&#39;
}

Daemons.run(File.join(File.dirname(__FILE__), &#39;myscript.rb&#39;), options)</pre>
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 139</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">script</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:script</span>] = <span class="ruby-identifier">script</span>
  <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Controller</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:ARGV</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ARGV</span>)

  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">catch_exceptions</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">run</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># I don&#39;t think anybody will ever use @group, as this location should not be reached under non-error conditions</span>
  <span class="ruby-ivar">@group</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">group</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run_proc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run_proc</span><span
            class="method-args">(app_name, options = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Passes control to <a href="Daemons.html">Daemons</a>. This function does
the same as <a href="Daemons.html#method-i-run">#run</a> except that not a
script but a proc will be run as a daemon while this script provides
command line options like &#39;start&#39; or &#39;stop&#39; and the whole
pid-file management to control the proc.</p>
<dl class="rdoc-list note-list"><dt>app_name
<dd>
<p>The name of the application. This will be used to contruct the name of the
pid files and log files. Defaults to the basename of the script.</p>
</dd><dt>options
<dd>
<p>A hash that may contain one or more of the options listed in the
documentation for <a href="Daemons.html#method-i-run">#run</a></p>
</dd></dl>

<p>A block must be given to this function. The block will be used as the :proc
entry in the options hash.</p>
<hr>

<h3 id="method-i-run_proc-label-Example-3A">Example:<span><a href="#method-i-run_proc-label-Example-3A">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-constant">Daemons</span>.<span class="ruby-identifier">run_proc</span>(<span class="ruby-string">&#39;myproc.rb&#39;</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">accept_connection</span>()
    <span class="ruby-identifier">read_request</span>()
    <span class="ruby-identifier">send_response</span>()
    <span class="ruby-identifier">close_connection</span>()
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          
          

          
          <div class="method-source-code" id="run_proc-source">
            <pre><span class="ruby-comment"># File lib/daemons.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_proc</span>(<span class="ruby-identifier">app_name</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:app_name</span>] = <span class="ruby-identifier">app_name</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:mode</span>] = <span class="ruby-value">:proc</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:proc</span>] = <span class="ruby-identifier">block</span>

  <span class="ruby-comment"># we do not have a script location so the the :script :dir_mode cannot be used, change it to :normal</span>
  <span class="ruby-keyword">if</span> [<span class="ruby-keyword">nil</span>, <span class="ruby-value">:script</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:dir_mode</span>]
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:dir_mode</span>] = <span class="ruby-value">:normal</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:dir</span>] <span class="ruby-operator">||=</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;.&#39;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Controller</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:ARGV</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ARGV</span>)

  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">catch_exceptions</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">run</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># I don&#39;t think anybody will ever use @group, as this location should not be reached under non-error conditions</span>
  <span class="ruby-ivar">@group</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">group</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

