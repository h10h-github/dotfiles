<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>4_0_release_notes - rails-4.2.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Ruby+on+Rails+4.0+Release+Notes">Ruby on Rails 4.0 Release Notes</a>
    <li><a href="#label-Upgrading+to+Rails+4.0">Upgrading to Rails 4.0</a>
    <li><a href="#label-Creating+a+Rails+4.0+application">Creating a Rails 4.0 application</a>
    <li><a href="#label-Vendoring+Gems">Vendoring Gems</a>
    <li><a href="#label-Living+on+the+Edge">Living on the Edge</a>
    <li><a href="#label-Major+Features">Major Features</a>
    <li><a href="#label-Upgrade">Upgrade</a>
    <li><a href="#label-ActionPack">ActionPack</a>
    <li><a href="#label-General">General</a>
    <li><a href="#label-Security">Security</a>
    <li><a href="#label-Extraction+of+features+to+gems">Extraction of features to gems</a>
    <li><a href="#label-Documentation">Documentation</a>
    <li><a href="#label-Railties">Railties</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Deprecations">Deprecations</a>
    <li><a href="#label-Action+Mailer">Action Mailer</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Deprecations">Deprecations</a>
    <li><a href="#label-Active+Model">Active Model</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Deprecations">Deprecations</a>
    <li><a href="#label-Active+Support">Active Support</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Deprecations">Deprecations</a>
    <li><a href="#label-Action+Pack">Action Pack</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Deprecations">Deprecations</a>
    <li><a href="#label-Active+Record">Active Record</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Deprecations">Deprecations</a>
    <li><a href="#label-Credits">Credits</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/4_2_release_notes_md.html">4_2_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_job_basics_md.html">active_job_basics</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_migrations_md.html">active_record_migrations</a>
  
    <li><a href="../../guides/source/active_record_postgresql_md.html">active_record_postgresql</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/autoloading_and_reloading_constants_md.html">autoloading_and_reloading_constants</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/4_0_release_notes.md">

<h1 id="label-Ruby+on+Rails+4.0+Release+Notes">Ruby on Rails 4.0 Release Notes<span><a href="#label-Ruby+on+Rails+4.0+Release+Notes">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Highlights in Rails 4.0:</p>
<ul><li>
<p>Ruby 2.0 preferred; 1.9.3+ required</p>
</li><li>
<p>Strong Parameters</p>
</li><li>
<p>Turbolinks</p>
</li><li>
<p>Russian Doll Caching</p>
</li></ul>

<p>These release notes cover only the major changes. To learn about various
bug fixes and changes, please refer to the change logs or check out the <a
href="https://github.com/rails/rails/commits/4-0-stable">list of
commits</a> in the main Rails repository on GitHub.</p>
<hr>

<h2 id="label-Upgrading+to+Rails+4.0">Upgrading to Rails 4.0<span><a href="#label-Upgrading+to+Rails+4.0">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>If you&#39;re upgrading an existing application, it&#39;s a great idea to
have good test coverage before going in. You should also first upgrade to
Rails 3.2 in case you haven&#39;t and make sure your application still runs
as expected before attempting an update to Rails 4.0. A list of things to
watch out for when upgrading is available in the <a
href="upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0">Upgrading
Ruby on Rails</a> guide.</p>

<h2 id="label-Creating+a+Rails+4.0+application">Creating a Rails 4.0 application<span><a href="#label-Creating+a+Rails+4.0+application">&para;</a> <a href="#top">&uarr;</a></span></h2>

<pre>You should have the &#39;rails&#39; RubyGem installed
$ rails new myapp
$ cd myapp</pre>

<h3 id="label-Vendoring+Gems">Vendoring Gems<span><a href="#label-Vendoring+Gems">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Rails now uses a <code>Gemfile</code> in the application root to determine
the gems you require for your application to start. This
<code>Gemfile</code> is processed by the <a
href="https://github.com/carlhuda/bundler">Bundler</a> gem, which then
installs all your dependencies. It can even install all the dependencies
locally to your application so that it doesn&#39;t depend on the system
gems.</p>

<p>More information: <a href="http://gembundler.com">Bundler homepage</a></p>

<h3 id="label-Living+on+the+Edge">Living on the Edge<span><a href="#label-Living+on+the+Edge">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>Bundler</code> and <code>Gemfile</code> makes freezing your Rails
application easy as pie with the new dedicated <code>bundle</code> command.
If you want to bundle straight from the Git repository, you can pass the
<code>--edge</code> flag:</p>

<pre>$ rails new myapp --edge</pre>

<p>If you have a local checkout of the Rails repository and want to generate
an application using that, you can pass the <code>--dev</code> flag:</p>

<pre>$ ruby /path/to/rails/railties/bin/rails new myapp --dev</pre>

<h2 id="label-Major+Features">Major Features<span><a href="#label-Major+Features">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><img src="http://guides.rubyonrails.org/images/rails4_features.png" /></p>

<h3 id="label-Upgrade">Upgrade<span><a href="#label-Upgrade">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><strong>Ruby 1.9.3</strong> (<a
href="https://github.com/rails/rails/commit/a0380e808d3dbd2462df17f5d3b7fcd8bd812496">commit</a>)
- Ruby 2.0 preferred; 1.9.3+ required</p>
</li><li>
<p><strong><a href="http://www.youtube.com/watch?v=z6YgD6tVPQs">New
deprecation policy</a></strong> - Deprecated features are warnings in Rails
4.0 and will be removed in Rails 4.1.</p>
</li><li>
<p><strong>ActionPack page and action caching</strong> (<a
href="https://github.com/rails/rails/commit/b0a7068564f0c95e7ef28fc39d0335ed17d93e90">commit</a>)
- Page and action caching are extracted to a separate gem. Page and action
caching requires too much manual intervention (manually expiring caches
when the underlying model objects are updated). Instead, use Russian doll
caching.</p>
</li><li>
<p><strong>ActiveRecord observers</strong> (<a
href="https://github.com/rails/rails/commit/ccecab3ba950a288b61a516bf9b6962e384aae0b">commit</a>)
- Observers are extracted to a separate gem. Observers are only needed for
page and action caching, and can lead to spaghetti code.</p>
</li><li>
<p><strong>ActiveRecord session store</strong> (<a
href="https://github.com/rails/rails/commit/0ffe19056c8e8b2f9ae9d487b896cad2ce9387ad">commit</a>)
- The <a href="../../ActiveRecord.html">ActiveRecord</a> session store is
extracted to a separate gem. Storing sessions in SQL is costly. Instead,
use cookie sessions, memcache sessions, or a custom session store.</p>
</li><li>
<p><strong>ActiveModel mass assignment protection</strong> (<a
href="https://github.com/rails/rails/commit/f8c9a4d3e88181cee644f91e1342bfe896ca64c6">commit</a>)
- Rails 3 mass assignment protection is deprecated. Instead, use strong
parameters.</p>
</li><li>
<p><strong>ActiveResource</strong> (<a
href="https://github.com/rails/rails/commit/f1637bf2bb00490203503fbd943b73406e043d1d">commit</a>)
- ActiveResource is extracted to a separate gem. ActiveResource was not
widely used.</p>
</li><li>
<p><strong>vendor/plugins removed</strong> (<a
href="https://github.com/rails/rails/commit/853de2bd9ac572735fa6cf59fcf827e485a231c3">commit</a>)
- Use a Gemfile to manage installed gems.</p>
</li></ul>

<h3 id="label-ActionPack">ActionPack<span><a href="#label-ActionPack">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><strong>Strong parameters</strong> (<a
href="https://github.com/rails/rails/commit/a8f6d5c6450a7fe058348a7f10a908352bb6c7fc">commit</a>)
- Only allow whitelisted parameters to update model objects
(<code>params.permit(:title, :text)</code>).</p>
</li><li>
<p><strong>Routing concerns</strong> (<a
href="https://github.com/rails/rails/commit/0dd24728a088fcb4ae616bb5d62734aca5276b1b">commit</a>)
- In the routing DSL, factor out common subroutes (<code>comments</code>
from <code>/posts/1/comments</code> and <code>/videos/1/comments</code>).</p>
</li><li>
<p><strong>ActionController::Live</strong> (<a
href="https://github.com/rails/rails/commit/af0a9f9eefaee3a8120cfd8d05cbc431af376da3">commit</a>)
- Stream JSON with <code>response.stream</code>.</p>
</li><li>
<p><strong>Declarative ETags</strong> (<a
href="https://github.com/rails/rails/commit/ed5c938fa36995f06d4917d9543ba78ed506bb8d">commit</a>)
- Add controller-level etag additions that will be part of the action etag
computation</p>
</li><li>
<p><strong><a
href="http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works">Russian
doll caching</a></strong> (<a
href="https://github.com/rails/rails/commit/4154bf012d2bec2aae79e4a49aa94a70d3e91d49">commit</a>)
- Cache nested fragments of views. Each fragment expires based on a set of
dependencies (a cache key). The cache key is usually a template version
number and a model object.</p>
</li><li>
<p><strong>Turbolinks</strong> (<a
href="https://github.com/rails/rails/commit/e35d8b18d0649c0ecc58f6b73df6b3c8d0c6bb74">commit</a>)
- Serve only one initial HTML page. When the user navigates to another
page, use pushState to update the URL and use AJAX to update the title and
body.</p>
</li><li>
<p><strong>Decouple ActionView from ActionController</strong> (<a
href="https://github.com/rails/rails/commit/78b0934dd1bb84e8f093fb8ef95ca99b297b51cd">commit</a>)
- ActionView was decoupled from ActionPack and will be moved to a separated
gem in Rails 4.1.</p>
</li><li>
<p><strong>Do not depend on ActiveModel</strong> (<a
href="https://github.com/rails/rails/commit/166dbaa7526a96fdf046f093f25b0a134b277a68">commit</a>)
- ActionPack no longer depends on ActiveModel.</p>
</li></ul>

<h3 id="label-General">General<span><a href="#label-General">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><strong>ActiveModel::Model</strong> (<a
href="https://github.com/rails/rails/commit/3b822e91d1a6c4eab0064989bbd07aae3a6d0d08">commit</a>)
- <code>ActiveModel::Model</code>, a mixin to make normal Ruby objects to
work with ActionPack out of box (ex. for <code>form_for</code>)</p>
</li><li>
<p><strong>New scope API</strong> (<a
href="https://github.com/rails/rails/commit/50cbc03d18c5984347965a94027879623fc44cce">commit</a>)
- Scopes must always use callables.</p>
</li><li>
<p><strong>Schema cache dump</strong> (<a
href="https://github.com/rails/rails/commit/5ca4fc95818047108e69e22d200e7a4a22969477">commit</a>)
- To improve Rails boot time, instead of loading the schema directly from
the database, load the schema from a dump file.</p>
</li><li>
<p><strong>Support for specifying transaction isolation level</strong> (<a
href="https://github.com/rails/rails/commit/392eeecc11a291e406db927a18b75f41b2658253">commit</a>)
- Choose whether repeatable reads or improved performance (less locking) is
more important.</p>
</li><li>
<p><strong>Dalli</strong> (<a
href="https://github.com/rails/rails/commit/82663306f428a5bbc90c511458432afb26d2f238">commit</a>)
- Use Dalli memcache client for the memcache store.</p>
</li><li>
<p><strong>Notifications start &amp; finish</strong> (<a
href="https://github.com/rails/rails/commit/f08f8750a512f741acb004d0cebe210c5f949f28">commit</a>)
- Active Support instrumentation reports start and finish notifications to
subscribers.</p>
</li><li>
<p><strong>Thread safe by default</strong> (<a
href="https://github.com/rails/rails/commit/5d416b907864d99af55ebaa400fff217e17570cd">commit</a>)
- Rails can run in threaded app servers without additional configuration.
Note: Check that the gems you are using are threadsafe.</p>
</li><li>
<p><strong>PATCH verb</strong> (<a
href="https://github.com/rails/rails/commit/eed9f2539e3ab5a68e798802f464b8e4e95e619e">commit</a>)
- In Rails, PATCH replaces PUT. PATCH is used for partial updates of
resources.</p>
</li></ul>

<h3 id="label-Security">Security<span><a href="#label-Security">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><strong>match do not catch all</strong> (<a
href="https://github.com/rails/rails/commit/90d2802b71a6e89aedfe40564a37bd35f777e541">commit</a>)
- In the routing DSL, match requires the HTTP verb or verbs to be
specified.</p>
</li><li>
<p><strong>html entities escaped by default</strong> (<a
href="https://github.com/rails/rails/commit/5f189f41258b83d49012ec5a0678d827327e7543">commit</a>)
- Strings rendered in erb are escaped unless wrapped with <code>raw</code>
or <code>html_safe</code> is called.</p>
</li><li>
<p><strong>New security headers</strong> (<a
href="https://github.com/rails/rails/commit/6794e92b204572d75a07bd6413bdae6ae22d5a82">commit</a>)
- Rails sends the following headers with every HTTP request:
<code>X-Frame-Options</code> (prevents clickjacking by forbidding the
browser from embedding the page in a frame), <code>X-XSS-Protection</code>
(asks the browser to halt script injection) and
<code>X-Content-Type-Options</code> (prevents the browser from opening a
jpeg as an exe).</p>
</li></ul>

<h2 id="label-Extraction+of+features+to+gems">Extraction of features to gems<span><a href="#label-Extraction+of+features+to+gems">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>In Rails 4.0, several features have been extracted into gems. You can
simply add the extracted gems to your <code>Gemfile</code> to bring the
functionality back.</p>
<ul><li>
<p>Hash-based &amp; Dynamic finder methods (<a
href="https://github.com/rails/activerecord-deprecated_finders">GitHub</a>)</p>
</li><li>
<p>Mass assignment protection in Active Record models (<a
href="https://github.com/rails/protected_attributes">GitHub</a>, <a
href="https://github.com/rails/rails/pull/7251">Pull Request</a>)</p>
</li><li>
<p>ActiveRecord::SessionStore (<a
href="https://github.com/rails/activerecord-session_store">GitHub</a>, <a
href="https://github.com/rails/rails/pull/7436">Pull Request</a>)</p>
</li><li>
<p>Active Record Observers (<a
href="https://github.com/rails/rails-observers">GitHub</a>, <a
href="https://github.com/rails/rails/commit/39e85b3b90c58449164673909a6f1893cba290b2">Commit</a>)</p>
</li><li>
<p>Active Resource (<a
href="https://github.com/rails/activeresource">GitHub</a>, <a
href="https://github.com/rails/rails/pull/572">Pull Request</a>, <a
href="http://yetimedia.tumblr.com/post/35233051627/activeresource-is-dead-long-live-activeresource">Blog</a>)</p>
</li><li>
<p>Action Caching (<a
href="https://github.com/rails/actionpack-action_caching">GitHub</a>, <a
href="https://github.com/rails/rails/pull/7833">Pull Request</a>)</p>
</li><li>
<p>Page Caching (<a
href="https://github.com/rails/actionpack-page_caching">GitHub</a>, <a
href="https://github.com/rails/rails/pull/7833">Pull Request</a>)</p>
</li><li>
<p>Sprockets (<a href="https://github.com/rails/sprockets-rails">GitHub</a>)</p>
</li><li>
<p>Performance tests (<a
href="https://github.com/rails/rails-perftest">GitHub</a>, <a
href="https://github.com/rails/rails/pull/8876">Pull Request</a>)</p>
</li></ul>

<h2 id="label-Documentation">Documentation<span><a href="#label-Documentation">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Guides are rewritten in GitHub Flavored Markdown.</p>
</li><li>
<p>Guides have a responsive design.</p>
</li></ul>

<h2 id="label-Railties">Railties<span><a href="#label-Railties">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Please refer to the <a
href="https://github.com/rails/rails/blob/4-0-stable/railties/CHANGELOG.md">Changelog</a>
for detailed changes.</p>

<h3 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>New test locations <code>test/models</code>, <code>test/helpers</code>,
<code>test/controllers</code>, and <code>test/mailers</code>. Corresponding
rake tasks added as well. (<a
href="https://github.com/rails/rails/pull/7878">Pull Request</a>)</p>
</li><li>
<p>Your app&#39;s executables now live in the <code>bin/</code> directory. Run
<code>rake rails:update:bin</code> to get <code>bin/bundle</code>,
<code>bin/rails</code>, and <code>bin/rake</code>.</p>
</li><li>
<p>Threadsafe on by default</p>
</li><li>
<p>Ability to use a custom builder by passing <code>--builder</code> (or
<code>-b</code>) to  <code>rails new</code> has been removed. Consider
using application templates  instead. (<a
href="https://github.com/rails/rails/pull/9401">Pull Request</a>)</p>
</li></ul>

<h3 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><code>config.threadsafe!</code> is deprecated in favor of
<code>config.eager_load</code> which provides a more fine grained control
on what is eager loaded.</p>
</li><li>
<p><code>Rails::Plugin</code> has gone. Instead of adding plugins to
<code>vendor/plugins</code> use gems or bundler with path or git
dependencies.</p>
</li></ul>

<h2 id="label-Action+Mailer">Action Mailer<span><a href="#label-Action+Mailer">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Please refer to the <a
href="https://github.com/rails/rails/blob/4-0-stable/actionmailer/CHANGELOG.md">Changelog</a>
for detailed changes.</p>

<h3 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h3 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h2 id="label-Active+Model">Active Model<span><a href="#label-Active+Model">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Please refer to the <a
href="https://github.com/rails/rails/blob/4-0-stable/activemodel/CHANGELOG.md">Changelog</a>
for detailed changes.</p>

<h3 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Add <code>ActiveModel::ForbiddenAttributesProtection</code>, a simple
module to protect attributes from mass assignment when non-permitted
attributes are passed.</p>
</li><li>
<p>Added <code>ActiveModel::Model</code>, a mixin to make Ruby objects work
with Action Pack out of box.</p>
</li></ul>

<h3 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h2 id="label-Active+Support">Active Support<span><a href="#label-Active+Support">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Please refer to the <a
href="https://github.com/rails/rails/blob/4-0-stable/activesupport/CHANGELOG.md">Changelog</a>
for detailed changes.</p>

<h3 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Replace deprecated <code>memcache-client</code> gem with <code>dalli</code>
in <code>ActiveSupport::Cache::MemCacheStore</code>.</p>
</li><li>
<p>Optimize <code>ActiveSupport::Cache::Entry</code> to reduce memory and
processing overhead.</p>
</li><li>
<p>Inflections can now be defined per locale. <code>singularize</code> and
<code>pluralize</code> accept locale as an extra argument.</p>
</li><li>
<p><code>Object#try</code> will now return nil instead of raise a
NoMethodError if the receiving object does not implement the method, but
you can still get the old behavior by using the new
<code>Object#try!</code>.</p>
</li><li>
<p><code>String#to_date</code> now raises <code>ArgumentError: invalid
date</code> instead of <code>NoMethodError: undefined method &#39;div&#39;
for nil:NilClass</code>  when given an invalid date. It is now the same as
<code>Date.parse</code>, and it accepts more invalid dates than 3.x, such
as:</p>
</li></ul>

<p>“<code>   # ActiveSupport 3.x   &quot;asdf&quot;.to_date # =&gt;
NoMethodError: undefined method</code>div&#39; for nil:NilClass 
“333”.to_date # =&gt; NoMethodError: undefined method `div&#39; for
nil:NilClass</p>

<p># ActiveSupport 4  “asdf”.to_date # =&gt; ArgumentError: invalid date 
“333”.to_date # =&gt; Fri, 29 Nov 2013  “`</p>

<h3 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Deprecate <code>ActiveSupport::TestCase#pending</code> method, use
<code>skip</code> from MiniTest instead.</p>
</li><li>
<p><code>ActiveSupport::Benchmarkable#silence</code> has been deprecated due
to its lack of thread safety. It will be removed without replacement in
Rails 4.1.</p>
</li><li>
<p><code>ActiveSupport::JSON::Variable</code> is deprecated. Define your own
<code>#as_json</code> and <code>#encode_json</code> methods for custom JSON
string literals.</p>
</li><li>
<p>Deprecates the compatibility method
<code>Module#local_constant_names</code>, use
<code>Module#local_constants</code> instead (which returns symbols).</p>
</li><li>
<p><code>BufferedLogger</code> is deprecated. Use
<code>ActiveSupport::Logger</code>, or the logger from Ruby standard
library.</p>
</li><li>
<p>Deprecate <code>assert_present</code> and <code>assert_blank</code> in
favor of <code>assert object.blank?</code> and <code>assert
object.present?</code></p>
</li></ul>

<h2 id="label-Action+Pack">Action Pack<span><a href="#label-Action+Pack">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Please refer to the <a
href="https://github.com/rails/rails/blob/4-0-stable/actionpack/CHANGELOG.md">Changelog</a>
for detailed changes.</p>

<h3 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Change the stylesheet of exception pages for development mode. Additionally
display also the line of code and fragment that raised the exception in all
exceptions pages.</p>
</li></ul>

<h3 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h2 id="label-Active+Record">Active Record<span><a href="#label-Active+Record">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Please refer to the <a
href="https://github.com/rails/rails/blob/4-0-stable/activerecord/CHANGELOG.md">Changelog</a>
for detailed changes.</p>

<h3 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Improve ways to write <code>change</code> migrations, making the old
<code>up</code> &amp; <code>down</code> methods no longer necessary.</p>
<ul><li>
<p>The methods <code>drop_table</code> and <code>remove_column</code> are now
reversible, as long as the necessary information is given.  The method
<code>remove_column</code> used to accept multiple column names; instead
use <code>remove_columns</code> (which is not revertible).  The method
<code>change_table</code> is also reversible, as long as its block
doesn&#39;t call <code>remove</code>, <code>change</code> or
<code>change_default</code></p>
</li><li>
<p>New method <code>reversible</code> makes it possible to specify code to be
run when migrating up or down.  See the <a
href="https://github.com/rails/rails/blob/master/guides/source/active_record_migrations.md#using-reversible">Guide
on Migration</a></p>
</li><li>
<p>New method <code>revert</code> will revert a whole migration or the given
block.  If migrating down, the given migration / block is run normally. 
See the <a
href="https://github.com/rails/rails/blob/master/guides/source/active_record_migrations.md#reverting-previous-migrations">Guide
on Migration</a></p>
</li></ul>
</li><li>
<p>Adds PostgreSQL array type support. Any datatype can be used to create an
array column, with full migration and schema dumper support.</p>
</li><li>
<p>Add <code>Relation#load</code> to explicitly load the record and return
<code>self</code>.</p>
</li><li>
<p><code>Model.all</code> now returns an <code>ActiveRecord::Relation</code>,
rather than an array of records. Use <code>Relation#to_a</code> if you
really want an array. In some specific cases, this may cause breakage when
upgrading.</p>
</li><li>
<p>Added <code>ActiveRecord::Migration.check_pending!</code> that raises an
error if migrations are pending.</p>
</li><li>
<p>Added custom coders support for <code>ActiveRecord::Store</code>. Now you
can set your custom coder like this:</p>

<pre class="ruby"><span class="ruby-identifier">store</span> :<span class="ruby-identifier">settings</span>, <span class="ruby-identifier">accessors</span><span class="ruby-operator">:</span> [ :<span class="ruby-identifier">color</span>, :<span class="ruby-identifier">homepage</span> ], <span class="ruby-identifier">coder</span><span class="ruby-operator">:</span> <span class="ruby-constant">JSON</span>
</pre>
</li><li>
<p><code>mysql</code> and <code>mysql2</code> connections will set
<code>SQL_MODE=STRICT_ALL_TABLES</code> by default to avoid silent data
loss. This can be disabled by specifying <code>strict: false</code> in your
<code>database.yml</code>.</p>
</li><li>
<p>Remove IdentityMap.</p>
</li><li>
<p>Remove automatic execution of EXPLAIN queries. The option
<code>active_record.auto_explain_threshold_in_seconds</code> is no longer
used and should be removed.</p>
</li><li>
<p>Adds <code>ActiveRecord::NullRelation</code> and
<code>ActiveRecord::Relation#none</code> implementing the null object
pattern for the Relation class.</p>
</li><li>
<p>Added <code>create_join_table</code> migration helper to create HABTM join
tables.</p>
</li><li>
<p>Allows PostgreSQL hstore records to be created.</p>
</li></ul>

<h3 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Deprecated the old-style hash based finder API. This means that methods
which previously accepted “finder options” no longer do.</p>
</li><li>
<p>All dynamic methods except for <code>find_by_...</code> and
<code>find_by_...!</code> are deprecated. Here&#39;s  how you can rewrite
the code:</p>
<ul><li>
<p><code>find_all_by_...</code> can be rewritten using
<code>where(...)</code>.</p>
</li><li>
<p><code>find_last_by_...</code> can be rewritten using
<code>where(...).last</code>.</p>
</li><li>
<p><code>scoped_by_...</code> can be rewritten using <code>where(...)</code>.</p>
</li><li>
<p><code>find_or_initialize_by_...</code> can be rewritten using
<code>find_or_initialize_by(...)</code>.</p>
</li><li>
<p><code>find_or_create_by_...</code> can be rewritten using
<code>find_or_create_by(...)</code>.</p>
</li><li>
<p><code>find_or_create_by_...!</code> can be rewritten using
<code>find_or_create_by!(...)</code>.</p>
</li></ul>
</li></ul>

<h2 id="label-Credits">Credits<span><a href="#label-Credits">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>See the <a href="http://contributors.rubyonrails.org/">full list of
contributors to Rails</a> for the many people who spent many hours making
Rails, the stable and robust framework it is. Kudos to all of them.</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

