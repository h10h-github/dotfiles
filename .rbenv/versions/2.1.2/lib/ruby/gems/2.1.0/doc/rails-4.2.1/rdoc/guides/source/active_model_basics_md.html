<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>active_model_basics - rails-4.2.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Active+Model+Basics">Active Model Basics</a>
    <li><a href="#label-Introduction">Introduction</a>
    <li><a href="#label-Attribute+Methods">Attribute Methods</a>
    <li><a href="#label-Callbacks">Callbacks</a>
    <li><a href="#label-Conversion">Conversion</a>
    <li><a href="#label-Dirty">Dirty</a>
    <li><a href="#label-Querying+object+directly+for+its+list+of+all+changed+attributes.">Querying object directly for its list of all changed attributes.</a>
    <li><a href="#label-Attribute+based+accessor+methods">Attribute based accessor methods</a>
    <li><a href="#label-Validations">Validations</a>
    <li><a href="#label-Naming">Naming</a>
    <li><a href="#label-Model">Model</a>
    <li><a href="#label-Serialization">Serialization</a>
    <li><a href="#label-ActiveModel-3A-3ASerializers">ActiveModel::Serializers</a>
    <li><a href="#label-ActiveModel-3A-3ASerializers-3A-3AJSON">ActiveModel::Serializers::JSON</a>
    <li><a href="#label-ActiveModel-3A-3ASerializers-3A-3AXml">ActiveModel::Serializers::Xml</a>
    <li><a href="#label-Translation">Translation</a>
    <li><a href="#label-Lint+Tests">Lint Tests</a>
    <li><a href="#label-SecurePassword">SecurePassword</a>
    <li><a href="#label-Requirements">Requirements</a>
    <li><a href="#label-Examples">Examples</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/4_2_release_notes_md.html">4_2_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_job_basics_md.html">active_job_basics</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_migrations_md.html">active_record_migrations</a>
  
    <li><a href="../../guides/source/active_record_postgresql_md.html">active_record_postgresql</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/autoloading_and_reloading_constants_md.html">autoloading_and_reloading_constants</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/active_model_basics.md">

<h1 id="label-Active+Model+Basics">Active Model Basics<span><a href="#label-Active+Model+Basics">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>This guide should provide you with all you need to get started using model
classes. Active Model allows for Action Pack helpers to interact with plain
Ruby objects. Active Model also helps build custom ORMs for use outside of
the Rails framework.</p>

<p>After reading this guide, you will be able to add to plain Ruby objects:</p>
<ul><li>
<p>The ability to behave like an Active Record model.</p>
</li><li>
<p>Callbacks and validations like Active Record.</p>
</li><li>
<p>Serializers.</p>
</li><li>
<p>Integration with the Rails internationalization (i18n) framework.</p>
</li></ul>
<hr>

<h2 id="label-Introduction">Introduction<span><a href="#label-Introduction">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Active Model is a library containing various modules used in developing
classes that need some features present on Active Record. Some of these
modules are explained below.</p>

<h3 id="label-Attribute+Methods">Attribute Methods<span><a href="#label-Attribute+Methods">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The <code>ActiveModel::AttributeMethods</code> module can add custom
prefixes and suffixes on methods of a class. It is used by defining the
prefixes and suffixes and which methods on the object will use them.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">AttributeMethods</span>

  <span class="ruby-identifier">attribute_method_prefix</span> <span class="ruby-string">&#39;reset_&#39;</span>
  <span class="ruby-identifier">attribute_method_suffix</span> <span class="ruby-string">&#39;_highest?&#39;</span>
  <span class="ruby-identifier">define_attribute_methods</span> <span class="ruby-string">&#39;age&#39;</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">age</span>

  <span class="ruby-identifier">private</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_attribute</span>(<span class="ruby-identifier">attribute</span>)
      <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{attribute}=&quot;</span>, <span class="ruby-value">0</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">def</span> <span class="ruby-identifier">attribute_highest?</span>(<span class="ruby-identifier">attribute</span>)
      <span class="ruby-identifier">send</span>(<span class="ruby-identifier">attribute</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">100</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">age</span> = <span class="ruby-value">110</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">age_highest?</span>  <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">reset_age</span>     <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">age_highest?</span>  <span class="ruby-comment"># =&gt; false</span>
</pre>

<h3 id="label-Callbacks">Callbacks<span><a href="#label-Callbacks">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Callbacks</code> gives Active Record style callbacks.
This provides an ability to define callbacks which run at appropriate
times. After defining callbacks, you can wrap them with before, after and
around custom methods.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">extend</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Callbacks</span>

  <span class="ruby-identifier">define_model_callbacks</span> :<span class="ruby-identifier">update</span>

  <span class="ruby-identifier">before_update</span> :<span class="ruby-identifier">reset_me</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>
    <span class="ruby-identifier">run_callbacks</span>(:<span class="ruby-identifier">update</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-comment"># This method is called when update is called on an object.</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">reset_me</span>
    <span class="ruby-comment"># This method is called when update is called on an object as a before_update callback is defined.</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Conversion">Conversion<span><a href="#label-Conversion">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>If a class defines <code>persisted?</code> and <code>id</code> methods,
then you can include the <code>ActiveModel::Conversion</code> module in
that class and call the Rails conversion methods on objects of that class.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Conversion</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">persisted?</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">id</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">to_model</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">person</span>  <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">to_key</span>              <span class="ruby-comment"># =&gt; nil</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">to_param</span>            <span class="ruby-comment"># =&gt; nil</span>
</pre>

<h3 id="label-Dirty">Dirty<span><a href="#label-Dirty">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>An object becomes dirty when it has gone through one or more changes to its
attributes and has not been saved. <code>ActiveModel::Dirty</code> gives
the ability to check whether an object has been changed or not. It also has
attribute based accessor methods. Let&#39;s consider a Person class with
attributes <code>first_name</code> and <code>last_name</code>:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Dirty</span>
  <span class="ruby-identifier">define_attribute_methods</span> :<span class="ruby-identifier">first_name</span>, :<span class="ruby-identifier">last_name</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">first_name</span>
    <span class="ruby-ivar">@first_name</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">first_name=</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">first_name_will_change!</span>
    <span class="ruby-ivar">@first_name</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">last_name</span>
    <span class="ruby-ivar">@last_name</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">last_name=</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">last_name_will_change!</span>
    <span class="ruby-ivar">@last_name</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">save</span>
    <span class="ruby-comment"># do save work...</span>
    <span class="ruby-identifier">changes_applied</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h4 id="label-Querying+object+directly+for+its+list+of+all+changed+attributes.">Querying object directly for its list of all changed attributes.<span><a href="#label-Querying+object+directly+for+its+list+of+all+changed+attributes.">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">changed?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name</span> = <span class="ruby-string">&quot;First Name&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name</span> <span class="ruby-comment"># =&gt; &quot;First Name&quot;</span>

<span class="ruby-comment"># returns if any attribute has changed.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">changed?</span> <span class="ruby-comment"># =&gt; true</span>

<span class="ruby-comment"># returns a list of attributes that have changed before saving.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">changed</span> <span class="ruby-comment"># =&gt; [&quot;first_name&quot;]</span>

<span class="ruby-comment"># returns a hash of the attributes that have changed with their original values.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">changed_attributes</span> <span class="ruby-comment"># =&gt; {&quot;first_name&quot;=&gt;nil}</span>

<span class="ruby-comment"># returns a hash of changes, with the attribute names as the keys, and the values will be an array of the old and new value for that field.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">changes</span> <span class="ruby-comment"># =&gt; {&quot;first_name&quot;=&gt;[nil, &quot;First Name&quot;]}</span>
</pre>

<h4 id="label-Attribute+based+accessor+methods">Attribute based accessor methods<span><a href="#label-Attribute+based+accessor+methods">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Track whether the particular attribute has been changed or not.</p>

<pre class="ruby"><span class="ruby-comment"># attr_name_changed?</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name</span> <span class="ruby-comment"># =&gt; &quot;First Name&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name_changed?</span> <span class="ruby-comment"># =&gt; true</span>
</pre>

<p>Track what was the previous value of the attribute.</p>

<pre class="ruby"><span class="ruby-comment"># attr_name_was accessor</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name_was</span> <span class="ruby-comment"># =&gt; nil</span>
</pre>

<p>Track both previous and current value of the changed attribute. Returns an
array if changed, else returns nil.</p>

<pre class="ruby"><span class="ruby-comment"># attr_name_change</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">first_name_change</span> <span class="ruby-comment"># =&gt; [nil, &quot;First Name&quot;]</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">last_name_change</span> <span class="ruby-comment"># =&gt; nil</span>
</pre>

<h3 id="label-Validations">Validations<span><a href="#label-Validations">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Validations</code> module adds the ability to validate
class objects like in Active Record.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Validations</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">email</span>, :<span class="ruby-identifier">token</span>

  <span class="ruby-identifier">validates</span> :<span class="ruby-identifier">name</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">validates_format_of</span> :<span class="ruby-identifier">email</span>, <span class="ruby-identifier">with</span><span class="ruby-operator">:</span> <span class="ruby-regexp">/\A([^\s]+)((?:[-a-z0-9]\.)[a-z]{2,})\z/i</span>
  <span class="ruby-identifier">validates!</span> :<span class="ruby-identifier">token</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">token</span> = <span class="ruby-string">&quot;2b1f325&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span>                        <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;vishnu&#39;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">email</span> = <span class="ruby-string">&#39;me&#39;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span>                        <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">email</span> = <span class="ruby-string">&#39;me@vishnuatrai.com&#39;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span>                        <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">token</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span>                        <span class="ruby-comment"># =&gt; raises ActiveModel::StrictValidationFailed</span>
</pre>

<h3 id="label-Naming">Naming<span><a href="#label-Naming">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Naming</code> adds a number of class methods which make
the naming and routing easier to manage. The module defines the
<code>model_name</code> class method which will define a number of
accessors using some <code>ActiveSupport::Inflector</code> methods.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">extend</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Naming</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">name</span>                <span class="ruby-comment"># =&gt; &quot;Person&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">singular</span>            <span class="ruby-comment"># =&gt; &quot;person&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">plural</span>              <span class="ruby-comment"># =&gt; &quot;people&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">element</span>             <span class="ruby-comment"># =&gt; &quot;person&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">human</span>               <span class="ruby-comment"># =&gt; &quot;Person&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">collection</span>          <span class="ruby-comment"># =&gt; &quot;people&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">param_key</span>           <span class="ruby-comment"># =&gt; &quot;person&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">i18n_key</span>            <span class="ruby-comment"># =&gt; :person</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">route_key</span>           <span class="ruby-comment"># =&gt; &quot;people&quot;</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">singular_route_key</span>  <span class="ruby-comment"># =&gt; &quot;person&quot;</span>
</pre>

<h3 id="label-Model">Model<span><a href="#label-Model">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Model</code> adds the ability to a class to work with
Action Pack and Action View right out of the box.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">EmailContact</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">email</span>, :<span class="ruby-identifier">message</span>
  <span class="ruby-identifier">validates</span> :<span class="ruby-identifier">name</span>, :<span class="ruby-identifier">email</span>, :<span class="ruby-identifier">message</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">deliver</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">valid?</span>
      <span class="ruby-comment"># deliver email</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>When including <code>ActiveModel::Model</code> you get some features like:</p>
<ul><li>
<p>model name introspection</p>
</li><li>
<p>conversions</p>
</li><li>
<p>translations</p>
</li><li>
<p>validations</p>
</li></ul>

<p>It also gives you the ability to initialize an object with a hash of
attributes, much like any Active Record object.</p>

<pre class="ruby"><span class="ruby-identifier">email_contact</span> = <span class="ruby-constant">EmailContact</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;David&#39;</span>,
                                 <span class="ruby-identifier">email</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;david@example.com&#39;</span>,
                                 <span class="ruby-identifier">message</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Hello World&#39;</span>)
<span class="ruby-identifier">email_contact</span>.<span class="ruby-identifier">name</span>       <span class="ruby-comment"># =&gt; &#39;David&#39;</span>
<span class="ruby-identifier">email_contact</span>.<span class="ruby-identifier">email</span>      <span class="ruby-comment"># =&gt; &#39;david@example.com&#39;</span>
<span class="ruby-identifier">email_contact</span>.<span class="ruby-identifier">valid?</span>     <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">email_contact</span>.<span class="ruby-identifier">persisted?</span> <span class="ruby-comment"># =&gt; false</span>
</pre>

<p>Any class that includes <code>ActiveModel::Model</code> can be used with
<code>form_for</code>, <code>render</code> and any other Action View helper
methods, just like Active Record objects.</p>

<h3 id="label-Serialization">Serialization<span><a href="#label-Serialization">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Serialization</code> provides a basic serialization for
your object. You need to declare an attributes hash which contains the
attributes you want to serialize. Attributes must be strings, not symbols.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Serialization</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes</span>
    {<span class="ruby-string">&#39;name&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now you can access a serialized hash of your object using the
<code>serializable_hash</code>.</p>

<pre class="ruby"><span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">serializable_hash</span>   <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;nil}</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;Bob&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">serializable_hash</span>   <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Bob&quot;}</span>
</pre>

<h4 id="label-ActiveModel-3A-3ASerializers">ActiveModel::Serializers<span><a href="#label-ActiveModel-3A-3ASerializers">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Rails provides two serializers <code>ActiveModel::Serializers::JSON</code>
and <code>ActiveModel::Serializers::Xml</code>. Both of these modules
automatically include the <code>ActiveModel::Serialization</code>.</p>

<h5 id="label-ActiveModel-3A-3ASerializers-3A-3AJSON">ActiveModel::Serializers::JSON<span><a href="#label-ActiveModel-3A-3ASerializers-3A-3AJSON">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>To use the <code>ActiveModel::Serializers::JSON</code> you only need to
change from <code>ActiveModel::Serialization</code> to
<code>ActiveModel::Serializers::JSON</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Serializers</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes</span>
    {<span class="ruby-string">&#39;name&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>With the <code>as_json</code> you have a hash representing the model.</p>

<pre class="ruby"><span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">as_json</span> <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;nil}</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;Bob&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">as_json</span> <span class="ruby-comment"># =&gt; {&quot;name&quot;=&gt;&quot;Bob&quot;}</span>
</pre>

<p>From a JSON string you define the attributes of the model. You need to have
the <code>attributes=</code> method defined on your class:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Serializers</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">hash</span>)
    <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{key}=&quot;</span>, <span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes</span>
    {<span class="ruby-string">&#39;name&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now it is possible to create an instance of person and set the attributes
using <code>from_json</code>.</p>

<pre class="ruby"><span class="ruby-identifier">json</span> = { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Bob&#39;</span> }.<span class="ruby-identifier">to_json</span>
<span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">from_json</span>(<span class="ruby-identifier">json</span>) <span class="ruby-comment"># =&gt; #&lt;Person:0x00000100c773f0 @name=&quot;Bob&quot;&gt;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span>            <span class="ruby-comment"># =&gt; &quot;Bob&quot;</span>
</pre>

<h5 id="label-ActiveModel-3A-3ASerializers-3A-3AXml">ActiveModel::Serializers::Xml<span><a href="#label-ActiveModel-3A-3ASerializers-3A-3AXml">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>To use the <code>ActiveModel::Serializers::Xml</code> you only need to
change from <code>ActiveModel::Serialization</code> to
<code>ActiveModel::Serializers::Xml</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Serializers</span><span class="ruby-operator">::</span><span class="ruby-constant">Xml</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes</span>
    {<span class="ruby-string">&#39;name&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>With the <code>to_xml</code> you have a XML representing the model.</p>

<pre class="ruby"><span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">to_xml</span> <span class="ruby-comment"># =&gt; &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&lt;person&gt;\n  &lt;name nil=\&quot;true\&quot;/&gt;\n&lt;/person&gt;\n&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;Bob&quot;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">to_xml</span> <span class="ruby-comment"># =&gt; &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&lt;person&gt;\n  &lt;name&gt;Bob&lt;/name&gt;\n&lt;/person&gt;\n&quot;</span>
</pre>

<p>From a XML string you define the attributes of the model. You need to have
the <code>attributes=</code> method defined on your class:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Serializers</span><span class="ruby-operator">::</span><span class="ruby-constant">Xml</span>

  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">name</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">hash</span>)
    <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{key}=&quot;</span>, <span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">attributes</span>
    {<span class="ruby-string">&#39;name&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now it is possible to create an instance of person and set the attributes
using <code>from_xml</code>.</p>

<pre class="ruby"><span class="ruby-identifier">xml</span> = { <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Bob&#39;</span> }.<span class="ruby-identifier">to_xml</span>
<span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">xml</span>) <span class="ruby-comment"># =&gt; #&lt;Person:0x00000100c773f0 @name=&quot;Bob&quot;&gt;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span>          <span class="ruby-comment"># =&gt; &quot;Bob&quot;</span>
</pre>

<h3 id="label-Translation">Translation<span><a href="#label-Translation">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Translation</code> provides integration between your
object and the Rails internationalization (i18n) framework.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">extend</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Translation</span>
<span class="ruby-keyword">end</span>
</pre>

<p>With the <code>human_attribute_name</code> you can transform attribute
names into a more human format. The human format is defined in your locale
file.</p>
<ul><li>
<p>config/locales/app.pt-BR.yml</p>
</li></ul>

<p><code>yml   pt-BR:     activemodel:       attributes:         person:      
name: &#39;Nome&#39; </code></p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-string">&#39;name&#39;</span>) <span class="ruby-comment"># =&gt; &quot;Nome&quot;</span>
</pre>

<h3 id="label-Lint+Tests">Lint Tests<span><a href="#label-Lint+Tests">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::Lint::Tests</code> allow you to test whether an object
is compliant with the Active Model API.</p>
<ul><li>
<p>app/models/person.rb</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span>

<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>test/models/person_test.rb</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;test_helper&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">PersonTest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TestCase</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">Lint</span><span class="ruby-operator">::</span><span class="ruby-constant">Tests</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">setup</span>
    <span class="ruby-ivar">@model</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
</li></ul>

<pre>$ rake test

Run options: --seed 14596

# Running:

......

Finished in 0.024899s, 240.9735 runs/s, 1204.8677 assertions/s.

6 runs, 30 assertions, 0 failures, 0 errors, 0 skips</pre>

<p>An object is not required to implement all APIs in order to work with
Action Pack. This module only intends to provide guidance in case you want
all features out of the box.</p>

<h3 id="label-SecurePassword">SecurePassword<span><a href="#label-SecurePassword">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActiveModel::SecurePassword</code> provides a way to securely store
any password in an encrypted form. On including this module, a
<code>has_secure_password</code> class method is provided which defines an
accessor named <code>password</code> with certain validations on it.</p>

<h4 id="label-Requirements">Requirements<span><a href="#label-Requirements">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p><code>ActiveModel::SecurePassword</code> depends on the <a
href="https://github.com/codahale/bcrypt-ruby">bcrypt</a>, so include this
gem in your Gemfile to use <code>ActiveModel::SecurePassword</code>
correctly. In order to make this work, the model must have an accessor
named <code>password_digest</code>. The <code>has_secure_password</code>
will add the following validations on the <code>password</code> accessor:</p>
<ol><li>
<p>Password should be present.</p>
</li><li>
<p>Password should be equal to its confirmation.</p>
</li><li>
<p>This maximum length of a password is 72 (required by <code>bcrypt</code> on
which ActiveModel::SecurePassword depends)</p>
</li></ol>

<h4 id="label-Examples">Examples<span><a href="#label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">SecurePassword</span>
  <span class="ruby-identifier">has_secure_password</span>
  <span class="ruby-identifier">attr_accessor</span> :<span class="ruby-identifier">password_digest</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>

<span class="ruby-comment"># When password is blank.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-comment"># When the confirmation doesn&#39;t match the password.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">password</span> = <span class="ruby-string">&#39;aditya&#39;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">password_confirmation</span> = <span class="ruby-string">&#39;nomatch&#39;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-comment"># When the length of password, exceeds 72.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">person</span>.<span class="ruby-identifier">password_confirmation</span> = <span class="ruby-string">&#39;a&#39;</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-comment"># When all validations are passed.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">password</span> = <span class="ruby-identifier">person</span>.<span class="ruby-identifier">password_confirmation</span> = <span class="ruby-string">&#39;aditya&#39;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">valid?</span> <span class="ruby-comment"># =&gt; true</span>
</pre>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

