<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>active_support_instrumentation - rails-4.2.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Active+Support+Instrumentation">Active Support Instrumentation</a>
    <li><a href="#label-Introduction+to+instrumentation">Introduction to instrumentation</a>
    <li><a href="#label-Rails+framework+hooks">Rails framework hooks</a>
    <li><a href="#label-Action+Controller">Action Controller</a>
    <li><a href="#label-write_fragment.action_controller">write_fragment.action_controller</a>
    <li><a href="#label-read_fragment.action_controller">read_fragment.action_controller</a>
    <li><a href="#label-expire_fragment.action_controller">expire_fragment.action_controller</a>
    <li><a href="#label-exist_fragment-3F.action_controller">exist_fragment?.action_controller</a>
    <li><a href="#label-write_page.action_controller">write_page.action_controller</a>
    <li><a href="#label-expire_page.action_controller">expire_page.action_controller</a>
    <li><a href="#label-start_processing.action_controller">start_processing.action_controller</a>
    <li><a href="#label-process_action.action_controller">process_action.action_controller</a>
    <li><a href="#label-send_file.action_controller">send_file.action_controller</a>
    <li><a href="#label-send_data.action_controller">send_data.action_controller</a>
    <li><a href="#label-redirect_to.action_controller">redirect_to.action_controller</a>
    <li><a href="#label-halted_callback.action_controller">halted_callback.action_controller</a>
    <li><a href="#label-Action+View">Action View</a>
    <li><a href="#label-render_template.action_view">render_template.action_view</a>
    <li><a href="#label-render_partial.action_view">render_partial.action_view</a>
    <li><a href="#label-Active+Record">Active Record</a>
    <li><a href="#label-sql.active_record">sql.active_record</a>
    <li><a href="#label-identity.active_record">identity.active_record</a>
    <li><a href="#label-Action+Mailer">Action Mailer</a>
    <li><a href="#label-receive.action_mailer">receive.action_mailer</a>
    <li><a href="#label-deliver.action_mailer">deliver.action_mailer</a>
    <li><a href="#label-ActiveResource">ActiveResource</a>
    <li><a href="#label-request.active_resource">request.active_resource</a>
    <li><a href="#label-Active+Support">Active Support</a>
    <li><a href="#label-cache_read.active_support">cache_read.active_support</a>
    <li><a href="#label-cache_generate.active_support">cache_generate.active_support</a>
    <li><a href="#label-cache_fetch_hit.active_support">cache_fetch_hit.active_support</a>
    <li><a href="#label-cache_write.active_support">cache_write.active_support</a>
    <li><a href="#label-cache_delete.active_support">cache_delete.active_support</a>
    <li><a href="#label-cache_exist-3F.active_support">cache_exist?.active_support</a>
    <li><a href="#label-Railties">Railties</a>
    <li><a href="#label-load_config_initializer.railties">load_config_initializer.railties</a>
    <li><a href="#label-Rails">Rails</a>
    <li><a href="#label-deprecation.rails">deprecation.rails</a>
    <li><a href="#label-Subscribing+to+an+event">Subscribing to an event</a>
    <li><a href="#label-Creating+custom+events">Creating custom events</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/4_2_release_notes_md.html">4_2_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_job_basics_md.html">active_job_basics</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_migrations_md.html">active_record_migrations</a>
  
    <li><a href="../../guides/source/active_record_postgresql_md.html">active_record_postgresql</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/autoloading_and_reloading_constants_md.html">autoloading_and_reloading_constants</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/active_support_instrumentation.md">

<h1 id="label-Active+Support+Instrumentation">Active Support Instrumentation<span><a href="#label-Active+Support+Instrumentation">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>Active Support is a part of core Rails that provides Ruby language
extensions, utilities and other things. One of the things it includes is an
instrumentation API that can be used inside an application to measure
certain actions that occur within Ruby code, such as that inside a Rails
application or the framework itself. It is not limited to Rails, however.
It can be used independently in other Ruby scripts if it is so desired.</p>

<p>In this guide, you will learn how to use the instrumentation API inside of
Active Support to measure events inside of Rails and other Ruby code.</p>

<p>After reading this guide, you will know:</p>
<ul><li>
<p>What instrumentation can provide.</p>
</li><li>
<p>The hooks inside the Rails framework for instrumentation.</p>
</li><li>
<p>Adding a subscriber to a hook.</p>
</li><li>
<p>Building a custom instrumentation implementation.</p>
</li></ul>
<hr>

<h2 id="label-Introduction+to+instrumentation">Introduction to instrumentation<span><a href="#label-Introduction+to+instrumentation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>The instrumentation API provided by Active Support allows developers to
provide hooks which other developers may hook into. There are several of
these within the Rails framework, as described below in (TODO: link to
section detailing each hook point). With this API, developers can choose to
be notified when certain events occur inside their application or another
piece of Ruby code.</p>

<p>For example, there is a hook provided within Active Record that is called
every time Active Record uses an SQL query on a database. This hook could
be <strong>subscribed</strong> to, and used to track the number of queries
during a certain action. There&#39;s another hook around the processing of
an action of a controller. This could be used, for instance, to track how
long a specific action has taken.</p>

<p>You are even able to create your own events inside your application which
you can later subscribe to.</p>

<h2 id="label-Rails+framework+hooks">Rails framework hooks<span><a href="#label-Rails+framework+hooks">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Within the Ruby on Rails framework, there are a number of hooks provided
for common events. These are detailed below.</p>

<h2 id="label-Action+Controller">Action Controller<span><a href="#label-Action+Controller">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-write_fragment.action_controller">write_fragment.action_controller<span><a href="#label-write_fragment.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | —————- | | <code>:key</code> | The complete key |</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;posts/1-dashboard-view&#39;</span>
}
</pre>

<h3 id="label-read_fragment.action_controller">read_fragment.action_controller<span><a href="#label-read_fragment.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | —————- | | <code>:key</code> | The complete key |</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;posts/1-dashboard-view&#39;</span>
}
</pre>

<h3 id="label-expire_fragment.action_controller">expire_fragment.action_controller<span><a href="#label-expire_fragment.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | —————- | | <code>:key</code> | The complete key |</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;posts/1-dashboard-view&#39;</span>
}
</pre>

<h3 id="label-exist_fragment-3F.action_controller">exist_fragment?.action_controller<span><a href="#label-exist_fragment-3F.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | —————- | | <code>:key</code> | The complete key |</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;posts/1-dashboard-view&#39;</span>
}
</pre>

<h3 id="label-write_page.action_controller">write_page.action_controller<span><a href="#label-write_page.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ——- | —————– | | <code>:path</code> | The complete path |</p>

<pre class="ruby">{
  <span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;/users/1&#39;</span>
}
</pre>

<h3 id="label-expire_page.action_controller">expire_page.action_controller<span><a href="#label-expire_page.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ——- | —————– | | <code>:path</code> | The complete path |</p>

<pre class="ruby">{
  <span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;/users/1&#39;</span>
}
</pre>

<h3 id="label-start_processing.action_controller">start_processing.action_controller<span><a href="#label-start_processing.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————- | ——————————————————— | | <code>:controller</code>
| The controller name | | <code>:action</code> | The action | |
<code>:params</code> | Hash of request parameters without any filtered
parameter | | <code>:format</code> | html/js/json/xml etc | |
<code>:method</code> | HTTP request verb | | <code>:path</code> | Request
path |</p>

<pre class="ruby">{
  <span class="ruby-identifier">controller</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;PostsController&quot;</span>,
  <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;new&quot;</span>,
  <span class="ruby-identifier">params</span><span class="ruby-operator">:</span> { <span class="ruby-string">&quot;action&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;new&quot;</span>, <span class="ruby-string">&quot;controller&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;posts&quot;</span> },
  <span class="ruby-identifier">format</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">html</span>,
  <span class="ruby-identifier">method</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;GET&quot;</span>,
  <span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;/posts/new&quot;</span>
}
</pre>

<h3 id="label-process_action.action_controller">process_action.action_controller<span><a href="#label-process_action.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————— | ——————————————————— | | <code>:controller</code>
| The controller name | | <code>:action</code> | The action | |
<code>:params</code> | Hash of request parameters without any filtered
parameter | | <code>:format</code> | html/js/json/xml etc | |
<code>:method</code> | HTTP request verb | | <code>:path</code> | Request
path | | <code>:status</code> | HTTP status code | |
<code>:view_runtime</code> | Amount spent in view in ms | |
<code>:db_runtime</code> | Amount spent executing database queries in ms |</p>

<pre class="ruby">{
  <span class="ruby-identifier">controller</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;PostsController&quot;</span>,
  <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;index&quot;</span>,
  <span class="ruby-identifier">params</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;action&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;index&quot;</span>, <span class="ruby-string">&quot;controller&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;posts&quot;</span>},
  <span class="ruby-identifier">format</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">html</span>,
  <span class="ruby-identifier">method</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;GET&quot;</span>,
  <span class="ruby-identifier">path</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;/posts&quot;</span>,
  <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> <span class="ruby-value">200</span>,
  <span class="ruby-identifier">view_runtime</span><span class="ruby-operator">:</span> <span class="ruby-value">46.848</span>,
  <span class="ruby-identifier">db_runtime</span><span class="ruby-operator">:</span> <span class="ruby-value">0.157</span>
}
</pre>

<h3 id="label-send_file.action_controller">send_file.action_controller<span><a href="#label-send_file.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ——- | ————————- | | <code>:path</code> | Complete path to
the file |</p>

<p>INFO. Additional keys may be added by the caller.</p>

<h3 id="label-send_data.action_controller">send_data.action_controller<span><a href="#label-send_data.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>ActionController</code> does not had any specific information to the
payload. All options are passed through to the payload.</p>

<h3 id="label-redirect_to.action_controller">redirect_to.action_controller<span><a href="#label-redirect_to.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ———– | —————— | | <code>:status</code> | HTTP response
code | | <code>:location</code> | URL to redirect to |</p>

<pre class="ruby">{
  <span class="ruby-identifier">status</span><span class="ruby-operator">:</span> <span class="ruby-value">302</span>,
  <span class="ruby-identifier">location</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;http://localhost:3000/posts/new&quot;</span>
}
</pre>

<h3 id="label-halted_callback.action_controller">halted_callback.action_controller<span><a href="#label-halted_callback.action_controller">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ——— | —————————– | | <code>:filter</code> | Filter that
halted the action |</p>

<pre class="ruby">{
  <span class="ruby-identifier">filter</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;:halting_filter&quot;</span>
}
</pre>

<h2 id="label-Action+View">Action View<span><a href="#label-Action+View">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-render_template.action_view">render_template.action_view<span><a href="#label-render_template.action_view">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————- | ——————— | | <code>:identifier</code> | Full path
to template | | <code>:layout</code> | Applicable layout |</p>

<pre class="ruby">{
  <span class="ruby-identifier">identifier</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;/Users/adam/projects/notifications/app/views/posts/index.html.erb&quot;</span>,
  <span class="ruby-identifier">layout</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;layouts/application&quot;</span>
}
</pre>

<h3 id="label-render_partial.action_view">render_partial.action_view<span><a href="#label-render_partial.action_view">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————- | ——————— | | <code>:identifier</code> | Full path
to template |</p>

<pre class="ruby">{
  <span class="ruby-identifier">identifier</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;/Users/adam/projects/notifications/app/views/posts/_form.html.erb&quot;</span>,
}
</pre>

<h2 id="label-Active+Record">Active Record<span><a href="#label-Active+Record">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-sql.active_record">sql.active_record<span><a href="#label-sql.active_record">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —————- | ——————— | | <code>:sql</code> | SQL statement |
| <code>:name</code> | Name of the operation | |
<code>:connection_id</code> | <code>self.object_id</code> |</p>

<p>INFO. The adapters will add their own data as well.</p>

<pre class="ruby">{
  <span class="ruby-identifier">sql</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;SELECT \&quot;posts\&quot;.* FROM \&quot;posts\&quot; &quot;</span>,
  <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;Post Load&quot;</span>,
  <span class="ruby-identifier">connection_id</span><span class="ruby-operator">:</span> <span class="ruby-value">70307250813140</span>,
  <span class="ruby-identifier">binds</span><span class="ruby-operator">:</span> []
}
</pre>

<h3 id="label-identity.active_record">identity.active_record<span><a href="#label-identity.active_record">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —————- | —————————————– | | <code>:line</code> | Primary
Key of object in the identity map | | <code>:name</code> | Record&#39;s
class | | <code>:connection_id</code> | <code>self.object_id</code> |</p>

<h2 id="label-Action+Mailer">Action Mailer<span><a href="#label-Action+Mailer">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-receive.action_mailer">receive.action_mailer<span><a href="#label-receive.action_mailer">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————- | ——————————————– | | <code>:mailer</code> | Name
of the mailer class | | <code>:message_id</code> | ID of the message,
generated by the Mail gem | | <code>:subject</code> | Subject of the mail |
| <code>:to</code> | To address(es) of the mail | | <code>:from</code> |
From address of the mail | | <code>:bcc</code> | BCC addresses of the mail
| | <code>:cc</code> | CC addresses of the mail | | <code>:date</code> |
Date of the mail | | <code>:mail</code> | The encoded form of the mail |</p>

<pre>{
  mailer: &quot;Notification&quot;,
  message_id: &quot;4f5b5491f1774_181b23fc3d4434d38138e5@mba.local.mail&quot;,
  subject: &quot;Rails Guides&quot;,
  to: [&quot;users@rails.com&quot;, &quot;ddh@rails.com&quot;],
  from: [&quot;me@rails.com&quot;],
  date: Sat, 10 Mar 2012 14:18:09 +0100,
  mail: &quot;...&quot; # omitted for brevity
}
</pre>

<h3 id="label-deliver.action_mailer">deliver.action_mailer<span><a href="#label-deliver.action_mailer">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————- | ——————————————– | | <code>:mailer</code> | Name
of the mailer class | | <code>:message_id</code> | ID of the message,
generated by the Mail gem | | <code>:subject</code> | Subject of the mail |
| <code>:to</code> | To address(es) of the mail | | <code>:from</code> |
From address of the mail | | <code>:bcc</code> | BCC addresses of the mail
| | <code>:cc</code> | CC addresses of the mail | | <code>:date</code> |
Date of the mail | | <code>:mail</code> | The encoded form of the mail |</p>

<pre>{
  mailer: &quot;Notification&quot;,
  message_id: &quot;4f5b5491f1774_181b23fc3d4434d38138e5@mba.local.mail&quot;,
  subject: &quot;Rails Guides&quot;,
  to: [&quot;users@rails.com&quot;, &quot;ddh@rails.com&quot;],
  from: [&quot;me@rails.com&quot;],
  date: Sat, 10 Mar 2012 14:18:09 +0100,
  mail: &quot;...&quot; # omitted for brevity
}
</pre>

<h2 id="label-ActiveResource">ActiveResource<span><a href="#label-ActiveResource">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-request.active_resource">request.active_resource<span><a href="#label-request.active_resource">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————– | ——————– | | <code>:method</code> | HTTP method |
| <code>:request_uri</code> | Complete URI | | <code>:result</code> | HTTP
response object |</p>

<h2 id="label-Active+Support">Active Support<span><a href="#label-Active+Support">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-cache_read.active_support">cache_read.active_support<span><a href="#label-cache_read.active_support">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —————— | ————————————————- | | <code>:key</code> | Key
used in the store | | <code>:hit</code> | If this read is a hit | |
<code>:super_operation</code> | :fetch is added when a read is used with
<code>#fetch</code> |</p>

<h3 id="label-cache_generate.active_support">cache_generate.active_support<span><a href="#label-cache_generate.active_support">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This event is only used when <code>#fetch</code> is called with a block.</p>

<p>| Key | Value | | —— | ——————— | | <code>:key</code> | Key used in the
store |</p>

<p>INFO. Options passed to fetch will be merged with the payload when writing
to the store</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;name-of-complicated-computation&#39;</span>
}
</pre>

<h3 id="label-cache_fetch_hit.active_support">cache_fetch_hit.active_support<span><a href="#label-cache_fetch_hit.active_support">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>This event is only used when <code>#fetch</code> is called with a block.</p>

<p>| Key | Value | | —— | ——————— | | <code>:key</code> | Key used in the
store |</p>

<p>INFO. Options passed to fetch will be merged with the payload.</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;name-of-complicated-computation&#39;</span>
}
</pre>

<h3 id="label-cache_write.active_support">cache_write.active_support<span><a href="#label-cache_write.active_support">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | ——————— | | <code>:key</code> | Key used in the
store |</p>

<p>INFO. Cache stores may add their own keys</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;name-of-complicated-computation&#39;</span>
}
</pre>

<h3 id="label-cache_delete.active_support">cache_delete.active_support<span><a href="#label-cache_delete.active_support">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | ——————— | | <code>:key</code> | Key used in the
store |</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;name-of-complicated-computation&#39;</span>
}
</pre>

<h3 id="label-cache_exist-3F.active_support">cache_exist?.active_support<span><a href="#label-cache_exist-3F.active_support">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | —— | ——————— | | <code>:key</code> | Key used in the
store |</p>

<pre class="ruby">{
  <span class="ruby-identifier">key</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;name-of-complicated-computation&#39;</span>
}
</pre>

<h2 id="label-Railties">Railties<span><a href="#label-Railties">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-load_config_initializer.railties">load_config_initializer.railties<span><a href="#label-load_config_initializer.railties">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ————– | —————————————————– | | <code>:initializer</code>
| Path to loaded initializer from <code>config/initializers</code> |</p>

<h2 id="label-Rails">Rails<span><a href="#label-Rails">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h3 id="label-deprecation.rails">deprecation.rails<span><a href="#label-deprecation.rails">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>| Key | Value | | ———— | ——————————- | | <code>:message</code> | The
deprecation warning | | <code>:callstack</code> | Where the deprecation
came from |</p>

<h2 id="label-Subscribing+to+an+event">Subscribing to an event<span><a href="#label-Subscribing+to+an+event">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Subscribing to an event is easy. Use
<code>ActiveSupport::Notifications.subscribe</code> with a block to listen
to any notification.</p>

<p>The block receives the following arguments:</p>
<ul><li>
<p>The name of the event</p>
</li><li>
<p>Time when it started</p>
</li><li>
<p>Time when it finished</p>
</li><li>
<p>An unique ID for this event</p>
</li><li>
<p>The payload (described in previous sections)</p>
</li></ul>

<pre class="ruby"><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">subscribe</span> <span class="ruby-string">&quot;process_action.action_controller&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">started</span>, <span class="ruby-identifier">finished</span>, <span class="ruby-identifier">unique_id</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># your own custom stuff</span>
  <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;#{name} Received!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Defining all those block arguments each time can be tedious. You can easily
create an <code>ActiveSupport::Notifications::Event</code> from block
arguments like this:</p>

<pre class="ruby"><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">subscribe</span> <span class="ruby-string">&quot;process_action.action_controller&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">event</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span><span class="ruby-operator">::</span><span class="ruby-constant">Event</span>.<span class="ruby-identifier">new</span> <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>

  <span class="ruby-identifier">event</span>.<span class="ruby-identifier">name</span>      <span class="ruby-comment"># =&gt; &quot;process_action.action_controller&quot;</span>
  <span class="ruby-identifier">event</span>.<span class="ruby-identifier">duration</span>  <span class="ruby-comment"># =&gt; 10 (in milliseconds)</span>
  <span class="ruby-identifier">event</span>.<span class="ruby-identifier">payload</span>   <span class="ruby-comment"># =&gt; {:extra=&gt;information}</span>

  <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;#{event} Received!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Most times you only care about the data itself. Here is a shortcut to just
get the data.</p>

<pre class="ruby"><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">subscribe</span> <span class="ruby-string">&quot;process_action.action_controller&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">data</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">data</span> <span class="ruby-comment"># { extra: :information }</span>
<span class="ruby-keyword">end</span>
</pre>

<p>You may also subscribe to events matching a regular expression. This
enables you to subscribe to multiple events at once. Here&#39;s you could
subscribe to everything from <code>ActionController</code>.</p>

<pre class="ruby"><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">subscribe</span> <span class="ruby-regexp">/action_controller/</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">args</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># inspect all ActionController events</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Creating+custom+events">Creating custom events<span><a href="#label-Creating+custom+events">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Adding your own events is easy as well.
<code>ActiveSupport::Notifications</code> will take care of all the heavy
lifting for you. Simply call <code>instrument</code> with a
<code>name</code>, <code>payload</code> and a block. The notification will
be sent after the block returns. <code>ActiveSupport</code> will generate
the start and end times as well as the unique ID. All data passed into the
<code>instrument</code> call will make it into the payload.</p>

<p>Here&#39;s an example:</p>

<pre class="ruby"><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">instrument</span> <span class="ruby-string">&quot;my.custom.event&quot;</span>, <span class="ruby-identifier">this</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">data</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># do your custom stuff here</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Now you can listen to this event with:</p>

<pre class="ruby"><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">subscribe</span> <span class="ruby-string">&quot;my.custom.event&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">started</span>, <span class="ruby-identifier">finished</span>, <span class="ruby-identifier">unique_id</span>, <span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-comment"># {:this=&gt;:data}</span>
<span class="ruby-keyword">end</span>
</pre>

<p>You should follow Rails conventions when defining your own events. The
format is: <code>event.library</code>. If you application is sending
Tweets, you should create an event named <code>tweet.twitter</code>.</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

