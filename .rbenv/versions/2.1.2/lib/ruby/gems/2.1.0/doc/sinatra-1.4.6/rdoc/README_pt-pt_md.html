<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README.pt-pt - Sinatra</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Sinatra">Sinatra</a>
    <li><a href="#label-Rotas">Rotas</a>
    <li><a href="#label-Arquivos+est-C3-A1ticos">Arquivos estáticos</a>
    <li><a href="#label-Views+-2F+Templates">Views / Templates</a>
    <li><a href="#label-Haml+Templates">Haml Templates</a>
    <li><a href="#label-Erb+Templates">Erb Templates</a>
    <li><a href="#label-Erubis">Erubis</a>
    <li><a href="#label-Builder+Templates">Builder Templates</a>
    <li><a href="#label-Sass+Templates">Sass Templates</a>
    <li><a href="#label-Less+Templates">Less Templates</a>
    <li><a href="#label-Templates+Inline">Templates Inline</a>
    <li><a href="#label-Acedendo+a+Vari-C3-A1veis+nos+Templates">Acedendo a Variáveis nos Templates</a>
    <li><a href="#label-Templates+Inline">Templates Inline</a>
    <li><a href="#label-Templates+nomeados">Templates nomeados</a>
    <li><a href="#label-Helpers">Helpers</a>
    <li><a href="#label-Filtros">Filtros</a>
    <li><a href="#label-Halting">Halting</a>
    <li><a href="#label-Passing">Passing</a>
    <li><a href="#label-Configura-C3-A7-C3-A3o">Configuração</a>
    <li><a href="#label-Lidar+com+Erros">Lidar com Erros</a>
    <li><a href="#label-N-C3-A3o+Encontrado">Não Encontrado</a>
    <li><a href="#label-Erro">Erro</a>
    <li><a href="#label-Mime+Types">Mime Types</a>
    <li><a href="#label-Middleware+Rack">Middleware Rack</a>
    <li><a href="#label-Testando">Testando</a>
    <li><a href="#label-Sinatra-3A-3ABase+-+Middleware-2C+Bibliotecas+e+aplicativos+modulares">Sinatra::Base - Middleware, Bibliotecas e aplicativos modulares</a>
    <li><a href="#label-Linha+de+Comandos">Linha de Comandos</a>
    <li><a href="#label-A+-C3-BAltima+vers-C3-A3o">A última versão</a>
    <li><a href="#label-Mais">Mais</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./LICENSE.html">LICENSE</a>
  
    <li><a href="./README_de_md.html">README.de</a>
  
    <li><a href="./README_es_md.html">README.es</a>
  
    <li><a href="./README_fr_md.html">README.fr</a>
  
    <li><a href="./README_hu_md.html">README.hu</a>
  
    <li><a href="./README_ja_md.html">README.ja</a>
  
    <li><a href="./README_ko_md.html">README.ko</a>
  
    <li><a href="./README_md.html">README</a>
  
    <li><a href="./README_pt-br_md.html">README.pt-br</a>
  
    <li><a href="./README_pt-pt_md.html">README.pt-pt</a>
  
    <li><a href="./README_ru_md.html">README.ru</a>
  
    <li><a href="./README_zh_md.html">README.zh</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.pt-pt.md">

<h1 id="label-Sinatra"><a href="Sinatra.html">Sinatra</a><span><a href="#label-Sinatra">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><em>Atenção: Este documento é apenas uma tradução da versão em inglês e
pode estar desatualizado.</em></p>

<p><a href="Sinatra.html">Sinatra</a> é uma <a
href="http://pt.wikipedia.org/wiki/Linguagem_de_domínio_específico">DSL</a>
para criar rapidamente aplicações web em Ruby com o mínimo de esforço:</p>

<pre class="ruby"><span class="ruby-comment"># minhaapp.rb</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>
<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Olá Mundo!&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Instale a gem e execute com:</p>

<pre class="ruby"><span class="ruby-identifier">sudo</span> <span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">sinatra</span>
<span class="ruby-identifier">ruby</span> <span class="ruby-identifier">minhaapp</span>.<span class="ruby-identifier">rb</span>
</pre>

<p>Aceda em: <a href="http://localhost:4567">localhost:4567</a></p>

<h2 id="label-Rotas">Rotas<span><a href="#label-Rotas">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>No <a href="Sinatra.html">Sinatra</a>, uma rota é um metodo HTTP associado
a uma URL correspondente padrão. Cada rota é associada a um bloco:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">mostrar</span> <span class="ruby-identifier">algo</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">post</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">criar</span> <span class="ruby-identifier">algo</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">put</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">atualizar</span> <span class="ruby-identifier">algo</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">apagar</span> <span class="ruby-identifier">algo</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Rotas são encontradas na ordem em que são definidas. A primeira rota que é
encontrada invoca o pedido.</p>

<p>Padrões de rota podem incluir parâmetros nomeados, acessíveis através da
hash <code>params</code>:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/ola/:nome&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># corresponde a &quot;GET /ola/foo&quot; e &quot;GET /ola/bar&quot;</span>
  <span class="ruby-comment"># params[&#39;nome&#39;] é &#39;foo&#39; ou &#39;bar&#39;</span>
  <span class="ruby-node">&quot;Olá #{params[&#39;nome&#39;]}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Pode também aceder a parâmetros nomeados através do bloco de parâmetros:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/ola/:nome&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
  <span class="ruby-node">&quot;Olá #{n}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Padrões de rota podem também incluir parâmetros splat (asteriscos),
acessíveis através do array <code>params['splat']</code>.</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/diga/*/ao/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># corresponde a /diga/ola/ao/mundo</span>
  <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;splat&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;ola&quot;, &quot;mundo&quot;]</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/download/*.*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># corresponde a /download/pasta/do/arquivo.xml</span>
  <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;splat&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;pasta/do/arquivo&quot;, &quot;xml&quot;]</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Rotas correspondem-se com expressões regulares:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-regexp">/\A\/ola\/([\w]+)\z/</span> <span class="ruby-keyword">do</span>
  <span class="ruby-node">&quot;Olá, #{params[&#39;captures&#39;].first}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Ou com um bloco de parâmetro:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-regexp">%r{/ola/([\w]+)}</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
  <span class="ruby-node">&quot;Olá, #{c}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Rotas podem incluir uma variedade de condições correspondentes, por
exemplo, o agente usuário:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span>, :<span class="ruby-identifier">agent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/Songbird (\d\.\d)[\d\/]*?/</span> <span class="ruby-keyword">do</span>
  <span class="ruby-node">&quot;Você está a utilizar a versão #{params[&#39;agent&#39;][0]} do Songbird.&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># Corresponde a um navegador não Songbird</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Arquivos+est-C3-A1ticos">Arquivos estáticos<span><a href="#label-Arquivos+est-C3-A1ticos">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Arquivos estáticos são disponibilizados a partir do directório
<code>./public</code>. Você pode especificar um local diferente através da
opção <code>:public_folder</code></p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">public_folder</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/estatico&#39;</span>
</pre>

<p>Note que o nome do directório público não é incluido no URL. Um arquivo
<code>./public/css/style.css</code> é disponibilizado como
<code>http://example.com/css/style.css</code>.</p>

<h2 id="label-Views+-2F+Templates">Views / Templates<span><a href="#label-Views+-2F+Templates">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Templates presumem-se estar localizados sob o directório
<code>./views</code>. Para utilizar um directório de views diferente:</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">views</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/modelo&#39;</span>
</pre>

<p>Uma coisa importante a ser lembrada é que você sempre tem as referências
dos templates como símbolos, mesmo se eles estiverem num sub-directório
(nesse caso utilize <code>:&#39;subdir/template&#39;</code>). Métodos de
renderização irão processar qualquer string passada directamente para elas.</p>

<h3 id="label-Haml+Templates">Haml Templates<span><a href="#label-Haml+Templates">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>A gem/biblioteca haml é necessária para renderizar templates HAML:</p>

<pre class="ruby"><span class="ruby-comment"># É necessário requerir &#39;haml&#39; na aplicação.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;haml&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza <code>./views/index.haml</code>.</p>

<p><a
href="http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#options">Opções
Haml</a> podem ser definidas globalmente através das configurações do
sinatra, veja <a href="http://www.sinatrarb.com/configuration.html">Opções
e Configurações</a>, e substitua em uma requisição individual.</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">haml</span>, {:<span class="ruby-identifier">format</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">html5</span> } <span class="ruby-comment"># o formato padrão do Haml é :xhtml</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>, :<span class="ruby-identifier">haml_options</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">format</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">html4</span> } <span class="ruby-comment"># substituido</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Erb+Templates">Erb Templates<span><a href="#label-Erb+Templates">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-comment"># É necessário requerir &#39;erb&#39; na aplicação.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;erb&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza <code>./views/index.erb</code></p>

<h3 id="label-Erubis">Erubis<span><a href="#label-Erubis">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>A gem/biblioteca erubis é necessária para renderizar templates erubis:</p>

<pre class="ruby"><span class="ruby-comment"># É necessário requerir &#39;erubis&#39; na aplicação.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;erubis&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erubis</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza <code>./views/index.erubis</code></p>

<h3 id="label-Builder+Templates">Builder Templates<span><a href="#label-Builder+Templates">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>A gem/biblioteca builder é necessária para renderizar templates builder:</p>

<pre class="ruby"><span class="ruby-comment"># É necessário requerir &#39;builder&#39; na aplicação.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;builder&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">content_type</span> <span class="ruby-string">&#39;application/xml&#39;</span>, :<span class="ruby-identifier">charset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;utf-8&#39;</span>
  <span class="ruby-identifier">builder</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza <code>./views/index.builder</code>.</p>

<h3 id="label-Sass+Templates">Sass Templates<span><a href="#label-Sass+Templates">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>A gem/biblioteca sass é necessária para renderizar templates sass:</p>

<pre class="ruby"><span class="ruby-comment"># É necessário requerir &#39;haml&#39; ou &#39;sass&#39; na aplicação.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sass&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/stylesheet.css&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">content_type</span> <span class="ruby-string">&#39;text/css&#39;</span>, :<span class="ruby-identifier">charset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;utf-8&#39;</span>
  <span class="ruby-identifier">sass</span> :<span class="ruby-identifier">stylesheet</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza <code>./views/stylesheet.sass</code>.</p>

<p><a
href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#options">Opções
Sass</a> podem ser definidas globalmente através das configurações do
sinatra, veja <a href="http://www.sinatrarb.com/configuration.html">Opções
e Configurações</a>, e substitua em uma requisição individual.</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">sass</span>, {:<span class="ruby-identifier">style</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">compact</span> } <span class="ruby-comment"># o estilo padrão do Sass é :nested</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/stylesheet.css&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">content_type</span> <span class="ruby-string">&#39;text/css&#39;</span>, :<span class="ruby-identifier">charset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;utf-8&#39;</span>
  <span class="ruby-identifier">sass</span> :<span class="ruby-identifier">stylesheet</span>, :<span class="ruby-identifier">style</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">expanded</span> <span class="ruby-comment"># substituido</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Less+Templates">Less Templates<span><a href="#label-Less+Templates">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>A gem/biblioteca less é necessária para renderizar templates Less:</p>

<pre class="ruby"><span class="ruby-comment"># É necessário requerir &#39;less&#39; na aplicação.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;less&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/stylesheet.css&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">content_type</span> <span class="ruby-string">&#39;text/css&#39;</span>, :<span class="ruby-identifier">charset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;utf-8&#39;</span>
  <span class="ruby-identifier">less</span> :<span class="ruby-identifier">stylesheet</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza <code>./views/stylesheet.less</code>.</p>

<h3 id="label-Templates+Inline">Templates Inline<span><a href="#label-Templates+Inline">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> <span class="ruby-string">&#39;%div.title Olá Mundo&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Renderiza a string, em uma linha, no template.</p>

<h3 id="label-Acedendo+a+Vari-C3-A1veis+nos+Templates">Acedendo a Variáveis nos Templates<span><a href="#label-Acedendo+a+Vari-C3-A1veis+nos+Templates">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Templates são avaliados dentro do mesmo contexto que os manipuladores de
rota. Variáveis de instância definidas em rotas manipuladas são
directamente acedidas por templates:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:id&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@foo</span> = <span class="ruby-constant">Foo</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;id&#39;</span>])
  <span class="ruby-identifier">haml</span> <span class="ruby-string">&#39;%h1= @foo.nome&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Ou, especifique um hash explícito para variáveis locais:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:id&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">foo</span> = <span class="ruby-constant">Foo</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;id&#39;</span>])
  <span class="ruby-identifier">haml</span> <span class="ruby-string">&#39;%h1= foo.nome&#39;</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span> }
<span class="ruby-keyword">end</span>
</pre>

<p>Isso é tipicamente utilizado quando renderizamos templates parciais
(partials) dentro de outros templates.</p>

<h3 id="label-Templates+Inline">Templates Inline<span><a href="#label-Templates+Inline">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Templates podem ser definidos no final do arquivo fonte(.rb):</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>

__END__

<span class="ruby-identifier">@@</span> <span class="ruby-identifier">layout</span>
<span class="ruby-operator">%</span><span class="ruby-identifier">tml</span>
  = <span class="ruby-keyword">yield</span>

<span class="ruby-identifier">@@</span> <span class="ruby-identifier">index</span>
<span class="ruby-operator">%</span><span class="ruby-identifier">iv</span>.<span class="ruby-identifier">title</span> <span class="ruby-constant">Olá</span> <span class="ruby-constant">Mundo!</span><span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-operator">!</span>
</pre>

<p>NOTA: Templates inline definidos no arquivo fonte são automaticamente
carregados pelo sinatra. Digite `enable :inline_templates` se tem templates
inline no outro arquivo fonte.</p>

<h3 id="label-Templates+nomeados">Templates nomeados<span><a href="#label-Templates+nomeados">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Templates também podem ser definidos utilizando o método top-level
<code>template</code>:</p>

<pre class="ruby"><span class="ruby-identifier">template</span> :<span class="ruby-identifier">layout</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;%html\n  =yield\n&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">template</span> :<span class="ruby-identifier">index</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;%div.title Olá Mundo!&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Se existir um template com nome “layout”, ele será utilizado sempre que um
template for renderizado. Pode desactivar layouts usando <code>:layout
=&gt; false</code>.</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">xhr?</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Helpers">Helpers<span><a href="#label-Helpers">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Use o método de alto nível <code>helpers</code> para definir métodos
auxiliares para utilizar em manipuladores de rotas e modelos:</p>

<pre class="ruby"><span class="ruby-identifier">helpers</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">bar</span>(<span class="ruby-identifier">nome</span>)
    <span class="ruby-node">&quot;#{nome}bar&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:nome&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">bar</span>(<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;nome&#39;</span>])
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Filtros">Filtros<span><a href="#label-Filtros">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Filtros Before são avaliados antes de cada requisição dentro do contexto da
requisição e podem modificar a requisição e a reposta. Variáveis de
instância definidas nos filtros são acedidas através de rotas e templates:</p>

<pre class="ruby"><span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@nota</span> = <span class="ruby-string">&#39;Olá!&#39;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_info</span> = <span class="ruby-string">&#39;/foo/bar/baz&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@nota</span> <span class="ruby-comment">#=&gt; &#39;Olá!&#39;</span>
  <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;splat&#39;</span>] <span class="ruby-comment">#=&gt; &#39;bar/baz&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Filtros After são avaliados após cada requisição dentro do contexto da
requisição e também podem modificar o pedido e a resposta. Variáveis de
instância definidas nos filtros before e rotas são acedidas através dos
filtros after:</p>

<pre class="ruby"><span class="ruby-identifier">after</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">status</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Filtros opcionalmente têm um padrão, fazendo com que sejam avaliados
somente se o caminho do pedido coincidir com esse padrão:</p>

<pre class="ruby"><span class="ruby-identifier">before</span> <span class="ruby-string">&#39;/protected/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">autenticar!</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">after</span> <span class="ruby-string">&#39;/create/:slug&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">slug</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">session</span>[:<span class="ruby-identifier">last_slug</span>] = <span class="ruby-identifier">slug</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Halting">Halting<span><a href="#label-Halting">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Para parar imediatamente uma requisição dentro de um filtro ou rota
utilize:</p>

<pre class="ruby"><span class="ruby-identifier">halt</span>
</pre>

<p>Pode também especificar o status ao parar…</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-value">410</span>
</pre>

<p>Ou com um corpo de texto…</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-string">&#39;isto será o corpo de texto&#39;</span>
</pre>

<p>Ou também…</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-value">401</span>, <span class="ruby-string">&#39;vamos embora!&#39;</span>
</pre>

<p>Com cabeçalhos…</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-value">402</span>, {<span class="ruby-string">&#39;Content-Type&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;text/plain&#39;</span>}, <span class="ruby-string">&#39;revanche&#39;</span>
</pre>

<h2 id="label-Passing">Passing<span><a href="#label-Passing">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Dentro de uma rota, pode passar para a próxima rota correspondente usando
<code>pass</code>:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/adivinhar/:quem&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">pass</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;quem&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;Frank&#39;</span>
  <span class="ruby-string">&#39;Apanhaste-me!&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/adivinhar/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Falhaste!&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>O bloqueio da rota é imediatamente encerrado e o controle continua com a
próxima rota de parâmetro. Se o parâmetro da rota não for encontrado, um
404 é retornado.</p>

<h2 id="label-Configura-C3-A7-C3-A3o">Configuração<span><a href="#label-Configura-C3-A7-C3-A3o">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Correndo uma vez, na inicialização, em qualquer ambiente:</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Correndo somente quando o ambiente (<code>RACK_ENV</code> environment
variável) é definido para <code>:production</code>:</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> :<span class="ruby-identifier">production</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Correndo quando o ambiente é definido para <code>:production</code> ou
<code>:test</code>:</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> :<span class="ruby-identifier">production</span>, :<span class="ruby-identifier">test</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Lidar+com+Erros">Lidar com Erros<span><a href="#label-Lidar+com+Erros">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Lida-se com erros no mesmo contexto das rotas e filtros before, o que
signifca que <code>haml</code>, <code>erb</code>, etc, estão disponíveis.</p>

<h3 id="label-N-C3-A3o+Encontrado">Não Encontrado<span><a href="#label-N-C3-A3o+Encontrado">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Quando um <code>Sinatra::NotFound</code> exception é levantado, ou o código
de status da reposta é 404, o manipulador <code>not_found</code> é
invocado:</p>

<pre class="ruby"><span class="ruby-identifier">not_found</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Isto está longe de ser encontrado&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-Erro">Erro<span><a href="#label-Erro">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>O manipulador <code>error</code> é invocado sempre que uma exceção é
lançada a partir de um bloco de rota ou um filtro. O objecto da exceção
pode ser obtido a partir da variável <a href="Rack.html">Rack</a>
<code>sinatra.error</code>:</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Peço desculpa, houve um erro desagradável - &#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;sinatra.error&#39;</span>].<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Erros personalizados:</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-constant">MeuErroPersonalizado</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;O que aconteceu foi...&#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;sinatra.error&#39;</span>].<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Então, se isso acontecer:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">MeuErroPersonalizado</span>, <span class="ruby-string">&#39;alguma coisa desagradável&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>O resultado será:</p>

<pre>O que aconteceu foi...alguma coisa desagradável</pre>

<p>Alternativamente, pode definir um manipulador de erro para um código de
status:</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-value">403</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Accesso negado&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/secreto&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-value">403</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Ou um range (alcance):</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-value">400</span><span class="ruby-operator">..</span><span class="ruby-value">510</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Boom&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>O <a href="Sinatra.html">Sinatra</a> define os manipuladores especiais
<code>not_found</code> e <code>error</code> quando corre no ambiente de
desenvolvimento.</p>

<h2 id="label-Mime+Types">Mime Types<span><a href="#label-Mime+Types">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Quando utilizamos <code>send_file</code> ou arquivos estáticos pode ter
mime types <a href="Sinatra.html">Sinatra</a> não entendidos. Use
<code>mime_type</code> para os registar por extensão de arquivos:</p>

<pre class="ruby"><span class="ruby-identifier">mime_type</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-string">&#39;text/foo&#39;</span>
</pre>

<p>Pode também utilizar isto com o helper <code>content_type</code>:</p>

<pre class="ruby"><span class="ruby-identifier">content_type</span> :<span class="ruby-identifier">foo</span>
</pre>

<h2 id="label-Middleware+Rack">Middleware <a href="Rack.html">Rack</a><span><a href="#label-Middleware+Rack">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>O <a href="Sinatra.html">Sinatra</a> corre no <a
href="http://rack.github.io/">Rack</a>, uma interface padrão mínima para
frameworks web em Ruby. Uma das capacidades mais interessantes do <a
href="Rack.html">Rack</a>, para desenvolver aplicações, é o suporte de
“middleware” – componentes que residem entre o servidor e a aplicação,
monitorizando e/ou manipulando o pedido/resposta (request/response) HTTP
para providenciar varios tipos de funcionalidades comuns.</p>

<p>O <a href="Sinatra.html">Sinatra</a> torna a construção de pipelines do
middleware <a href="Rack.html">Rack</a> fácil a um nível superior
utilizando o método <code>use</code>:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;meu_middleware_personalizado&#39;</span>

<span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Lint</span>
<span class="ruby-identifier">use</span> <span class="ruby-constant">MeuMiddlewarePersonalizado</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/ola&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Olá mundo&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>A semântica de <code>use</code> é idêntica aquela definida para a DSL <a
href="http://rubydoc.info/github/rack/rack/master/Rack/Builder">Rack::Builder</a>
(mais frequentemente utilizada para arquivos rackup). Por exemplo, o método
<code>use</code> aceita múltiplos argumentos/variáveis, bem como blocos:</p>

<pre class="ruby"><span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Auth</span><span class="ruby-operator">::</span><span class="ruby-constant">Basic</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">utilizador</span>, <span class="ruby-identifier">senha</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">utilizador</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;admin&#39;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">senha</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;secreto&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>O <a href="Rack.html">Rack</a> é distribuido com uma variedade de
middleware padrões para logs, debugs, rotas de URL, autenticação, e
manipuladores de sessão.Sinatra utiliza muitos desses componentes
automaticamente dependendo da configuração, por isso, tipicamente nao é
necessário utilizar <code>use</code> explicitamente.</p>

<h2 id="label-Testando">Testando<span><a href="#label-Testando">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Testes no <a href="Sinatra.html">Sinatra</a> podem ser escritos utilizando
qualquer biblioteca ou framework de teste baseados no <a
href="Rack.html">Rack</a>. <a
href="http://gitrdoc.com/brynary/rack-test">Rack::Test</a> é recomendado:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;minha_aplicacao_sinatra&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rack/test&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MinhaAplicacaoTeste</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Minitest</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Methods</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">app</span>
    <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">meu_test_default</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Ola Mundo!&#39;</span>, <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">teste_com_parametros</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/atender&#39;</span>, :<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Frank&#39;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Olá Frank!&#39;</span>, <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">bodymeet</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_com_ambiente_rack</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, {}, <span class="ruby-string">&#39;HTTP_USER_AGENT&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Songbird&#39;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;Você está utilizando o Songbird!&quot;</span>, <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>NOTA: Os módulos de classe embutidos <code>Sinatra::Test</code> e
<code>Sinatra::TestHarness</code> são depreciados na versão 0.9.2.</p>

<h2 id="label-Sinatra-3A-3ABase+-+Middleware-2C+Bibliotecas+e+aplicativos+modulares">Sinatra::Base - Middleware, Bibliotecas e aplicativos modulares<span><a href="#label-Sinatra-3A-3ABase+-+Middleware-2C+Bibliotecas+e+aplicativos+modulares">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Definir sua aplicação a um nível superior de trabalho funciona bem para
micro aplicativos, mas tem consideráveis incovenientes na construção de
componentes reutilizáveis como um middleware <a href="Rack.html">Rack</a>,
metal Rails, bibliotecas simples como um componente de servidor, ou mesmo
extensões <a href="Sinatra.html">Sinatra</a>. A DSL de nível superior polui
o espaço do objeto e assume um estilo de configuração de micro aplicativos
(exemplo: um simples arquivo de aplicação, directórios
<code>./public</code> e <code>./views</code>, logs, página de detalhes de
excepção, etc.). É onde o Sinatra::Base entra em jogo:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MinhaApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">sessions</span>, <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-string">&#39;bar&#39;</span>

  <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-string">&#39;Olá mundo!&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>A classe MinhaApp é um componente <a href="Rack.html">Rack</a> independente
que pode utilizar como um middleware <a href="Rack.html">Rack</a>, uma
aplicação <a href="Rack.html">Rack</a>, ou metal Rails. Pode utilizar ou
executar esta classe com um arquivo rackup <code>config.ru</code>; ou,
controlar um componente de servidor fornecendo como biblioteca:</p>

<pre class="ruby"><span class="ruby-constant">MinhaApp</span>.<span class="ruby-identifier">run!</span> :<span class="ruby-identifier">host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;localhost&#39;</span>, :<span class="ruby-identifier">port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9090</span>
</pre>

<p>Os métodos disponíveis para subclasses <code>Sinatra::Base</code> são
exatamente como aqueles disponíveis via a DSL de nível superior. Aplicações
de nível mais alto podem ser convertidas para componentes
<code>Sinatra::Base</code> com duas modificações:</p>
<ul><li>
<p>Seu arquivo deve requerer <code>sinatra/base</code> ao invés de
<code>sinatra</code>; outra coisa, todos os métodos DSL do <a
href="Sinatra.html">Sinatra</a> são importados para o espaço principal.</p>
</li><li>
<p>Coloque as rotas da sua aplicação, manipuladores de erro, filtros e opções
na subclasse de um <code>Sinatra::Base</code>.</p>
</li></ul>

<p><code>Sinatra::Base</code> é um quadro branco. Muitas opções são
desactivadas por padrão, incluindo o servidor embutido. Veja <a
href="http://sinatra.github.com/configuration.html">Opções e
Configurações</a> para detalhes de opções disponíveis e seus
comportamentos.</p>

<p>SIDEBAR: A DSL de alto nível do <a href="Sinatra.html">Sinatra</a> é
implementada utilizando um simples sistema de delegação. A classe
<code>Sinatra::Application</code> – uma subclasse especial da
<code>Sinatra::Base</code> – recebe todos os <code>:get</code>,
<code>:put</code>, <code>:post</code>, <code>:delete</code>,
<code>:before</code>, <code>:error</code>, <code>:not_found</code>,
<code>:configure</code>, e <code>:set</code> messages enviados para o alto
nível. Dê você mesmo uma vista de olhos ao código: aqui está o <a
href="http://github.com/sinatra/sinatra/blob/ceac46f0bc129a6e994a06100aa854f606fe5992/lib/sinatra/base.rb#L1128">Sinatra::Delegator
mixin</a> sendo <a
href="http://github.com/sinatra/sinatra/blob/ceac46f0bc129a6e994a06100aa854f606fe5992/lib/sinatra/main.rb#L28">incluido
dentro de um espaço principal</a></p>

<h2 id="label-Linha+de+Comandos">Linha de Comandos<span><a href="#label-Linha+de+Comandos">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>As aplicações <a href="Sinatra.html">Sinatra</a> podem ser executadas
directamente:</p>

<pre>ruby minhaapp.rb [-h] [-x] [-e AMBIENTE] [-p PORTA] [-o HOST] [-s SERVIDOR]</pre>

<p>As opções são:</p>

<pre class="ruby"><span class="ruby-operator">-</span><span class="ruby-identifier">h</span> <span class="ruby-comment"># ajuda</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">p</span> <span class="ruby-comment"># define a porta (padrão é 4567)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">o</span> <span class="ruby-comment"># define o host (padrão é 0.0.0.0)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">e</span> <span class="ruby-comment"># define o ambiente (padrão é development)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">s</span> <span class="ruby-comment"># especifica o servidor/manipulador rack (padrão é thin)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">x</span> <span class="ruby-comment"># activa o bloqueio (padrão é desligado)</span>
</pre>

<h2 id="label-A+-C3-BAltima+vers-C3-A3o">A última versão<span><a href="#label-A+-C3-BAltima+vers-C3-A3o">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Se gostaria de utilizar o código da última versão do <a
href="Sinatra.html">Sinatra</a>, crie um clone local e execute sua
aplicação com o directório <code>sinatra/lib</code> no
<code>LOAD_PATH</code>:</p>

<pre>cd minhaapp
git clone git://github.com/sinatra/sinatra.git
ruby -I sinatra/lib minhaapp.rb</pre>

<p>Alternativamente, pode adicionar o directório do <code>sinatra/lib</code>
no <code>LOAD_PATH</code> do seu aplicativo:</p>

<pre class="ruby"><span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/sinatra/lib&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rubygems&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/sobre&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;Estou correndo a versão&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Para actualizar o código do <a href="Sinatra.html">Sinatra</a> no futuro:</p>

<pre class="ruby"><span class="ruby-identifier">cd</span> <span class="ruby-identifier">meuprojeto</span><span class="ruby-operator">/</span><span class="ruby-identifier">sinatra</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">pull</span>
</pre>

<h2 id="label-Mais">Mais<span><a href="#label-Mais">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="http://www.sinatrarb.com/">Website do Projeto</a> - Documentação
adicional, novidades e links para outros recursos.</p>
</li><li>
<p><a href="http://www.sinatrarb.com/contributing">Contribuir</a> - Encontrou
um bug? Precisa de ajuda? Tem um patch?</p>
</li><li>
<p><a href="http://github.com/sinatra/sinatra/issues">Acompanhar Questões</a></p>
</li><li>
<p><a href="http://twitter.com/sinatra">Twitter</a></p>
</li><li>
<p><a href="http://groups.google.com/group/sinatrarb/topics">Lista de
Email</a></p>
</li><li>
<p><a href="irc://chat.freenode.net/#sinatra"> #sinatra</a> em <a
href="http://freenode.net">freenode.net</a></p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

