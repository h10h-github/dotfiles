<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Sprockets::Context - sprockets-3.0.0.rc.1 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-asset_data_uri">#asset_data_uri</a>
    
    <li ><a href="#method-i-asset_path">#asset_path</a>
    
    <li ><a href="#method-i-audio_path">#audio_path</a>
    
    <li ><a href="#method-i-depend_on">#depend_on</a>
    
    <li ><a href="#method-i-depend_on_asset">#depend_on_asset</a>
    
    <li ><a href="#method-i-font_path">#font_path</a>
    
    <li ><a href="#method-i-image_path">#image_path</a>
    
    <li ><a href="#method-i-javascript_path">#javascript_path</a>
    
    <li ><a href="#method-i-link_asset">#link_asset</a>
    
    <li ><a href="#method-i-load">#load</a>
    
    <li ><a href="#method-i-metadata">#metadata</a>
    
    <li ><a href="#method-i-require_asset">#require_asset</a>
    
    <li ><a href="#method-i-resolve">#resolve</a>
    
    <li ><a href="#method-i-resolve_with_compat">#resolve_with_compat</a>
    
    <li ><a href="#method-i-resolve_without_compat">#resolve_without_compat</a>
    
    <li ><a href="#method-i-stub_asset">#stub_asset</a>
    
    <li ><a href="#method-i-stylesheet_path">#stylesheet_path</a>
    
    <li ><a href="#method-i-video_path">#video_path</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Sprockets::Context">
  <h1 id="class-Sprockets::Context" class="class">
    class Sprockets::Context
  </h1>

  <section class="description">
    
<p>Deprecated: `Context` provides helper methods to all processors. They are
typically accessed by ERB templates. You can mix in custom helpers by
injecting them into `Environment#context_class`. Do not mix them into
`Context` directly.</p>

<pre>environment.context_class.class_eval do
  include MyHelper
  def asset_url; end
end

&lt;%= asset_url &quot;foo.png&quot; %&gt;</pre>

<p>The `Context` also collects dependencies declared by assets. See
`DirectiveProcessor` for an example of this.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-__LINE__" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">__LINE__</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        <p>Deprecated</p>
        
        </div>
      </div>
      
      <div id="attribute-i-content_type" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">content_type</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns content type of file</p>

<pre class="ruby"><span class="ruby-string">&#39;application/javascript&#39;</span>
<span class="ruby-string">&#39;text/css&#39;</span>
</pre>
        
        </div>
      </div>
      
      <div id="attribute-i-environment" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">environment</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-filename" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">filename</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-load_path" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">load_path</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns the environment path that contains the file.</p>

<p>If `app/javascripts` and `app/stylesheets` are in your path, and current
file is `app/javascripts/foo/bar.js`, `load_path` would return
`app/javascripts`.</p>
        
        </div>
      </div>
      
      <div id="attribute-i-logical_path" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">logical_path</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns logical path without any file extensions.</p>

<pre class="ruby"><span class="ruby-string">&#39;app/javascripts/application.js&#39;</span>
<span class="ruby-comment"># =&gt; &#39;application&#39;</span>
</pre>
        
        </div>
      </div>
      
      <div id="attribute-i-pathname" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">pathname</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-root_path" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">root_path</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns the environment path that contains the file.</p>

<p>If `app/javascripts` and `app/stylesheets` are in your path, and current
file is `app/javascripts/foo/bar.js`, `load_path` would return
`app/javascripts`.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(input)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-ivar">@environment</span>  = <span class="ruby-identifier">input</span>[<span class="ruby-value">:environment</span>]
  <span class="ruby-ivar">@metadata</span>     = <span class="ruby-identifier">input</span>[<span class="ruby-value">:metadata</span>]
  <span class="ruby-ivar">@load_path</span>    = <span class="ruby-identifier">input</span>[<span class="ruby-value">:load_path</span>]
  <span class="ruby-ivar">@logical_path</span> = <span class="ruby-identifier">input</span>[<span class="ruby-value">:name</span>]
  <span class="ruby-ivar">@filename</span>     = <span class="ruby-identifier">input</span>[<span class="ruby-value">:filename</span>]
  <span class="ruby-ivar">@dirname</span>      = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-ivar">@filename</span>)
  <span class="ruby-ivar">@pathname</span>     = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@filename</span>)
  <span class="ruby-ivar">@content_type</span> = <span class="ruby-identifier">input</span>[<span class="ruby-value">:content_type</span>]

  <span class="ruby-ivar">@required</span>     = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@metadata</span>[<span class="ruby-value">:required</span>])
  <span class="ruby-ivar">@stubbed</span>      = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@metadata</span>[<span class="ruby-value">:stubbed</span>])
  <span class="ruby-ivar">@links</span>        = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@metadata</span>[<span class="ruby-value">:links</span>])
  <span class="ruby-ivar">@dependencies</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">input</span>[<span class="ruby-value">:metadata</span>][<span class="ruby-value">:dependencies</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-asset_data_uri" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">asset_data_uri</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a Base64-encoded `data:` URI with the contents of the asset at the
specified path, and marks that path as a dependency of the current file.</p>

<p>Use `asset_data_uri` from ERB with CSS or JavaScript assets:</p>

<pre>#logo { background: url(&lt;%= asset_data_uri &#39;logo.png&#39; %&gt;) }

$(&#39;&lt;img&gt;&#39;).attr(&#39;src&#39;, &#39;&lt;%= asset_data_uri &#39;avatar.jpg&#39; %&gt;&#39;)</pre>
          
          

          
          <div class="method-source-code" id="asset_data_uri-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">asset_data_uri</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset</span> = <span class="ruby-identifier">depend_on_asset</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">data</span> = <span class="ruby-constant">EncodingUtils</span>.<span class="ruby-identifier">base64</span>(<span class="ruby-identifier">asset</span>.<span class="ruby-identifier">source</span>)
  <span class="ruby-node">&quot;data:#{asset.content_type};base64,#{Rack::Utils.escape(data)}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-asset_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">asset_path</span><span
            class="method-args">(path, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expands logical path to full url to asset.</p>

<p>NOTE: This helper is currently not implemented and should be customized by
the application. Though, in the future, some basics implemention may be
provided with different methods that are required to be overridden.</p>
          
          

          
          <div class="method-source-code" id="asset_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 185</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})
      <span class="ruby-identifier">message</span> = <span class="ruby-value">&lt;&lt;-EOS
Custom asset_path helper is not implemented

Extend your environment context with a custom method.

    environment.context_class.class_eval do
      def asset_path(path, options = {})
      end
    end
      EOS</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-identifier">message</span>
    <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-audio_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">audio_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand logical audio asset path.</p>
          
          

          
          <div class="method-source-code" id="audio_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">audio_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-value">:audio</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-depend_on" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">depend_on</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>`depend_on` allows you to state a dependency on a file without including
it.</p>

<p>This is used for caching purposes. Any changes made to the dependency file
with invalidate the cache of the source file.</p>
          
          

          
          <div class="method-source-code" id="depend_on-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">depend_on</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">absolute_path?</span>(<span class="ruby-identifier">path</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-ivar">@dependencies</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">build_file_digest_uri</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">compat</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-depend_on_asset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">depend_on_asset</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>`depend_on_asset` allows you to state an asset dependency without including
it.</p>

<p>This is used for caching purposes. Any changes that would invalidate the
dependency asset will invalidate the source file. Unlike `depend_on`, this
will include recursively include the target asset&#39;s dependencies.</p>
          
          

          
          <div class="method-source-code" id="depend_on_asset-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">depend_on_asset</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">load</span>(<span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">compat</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-font_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">font_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand logical font asset path.</p>
          
          

          
          <div class="method-source-code" id="font_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">font_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-value">:font</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-image_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">image_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand logical image asset path.</p>
          
          

          
          <div class="method-source-code" id="image_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-value">:image</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-javascript_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">javascript_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand logical javascript asset path.</p>
          
          

          
          <div class="method-source-code" id="javascript_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">javascript_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-value">:javascript</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-link_asset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">link_asset</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>`link_asset` declares an external dependency on an asset without directly
including it. The target asset is returned from this function making it
easy to construct a link to it.</p>

<p>Returns an <a href="Asset.html">Asset</a> or nil.</p>
          
          

          
          <div class="method-source-code" id="link_asset-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">link_asset</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset</span> = <span class="ruby-identifier">depend_on_asset</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@links</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">asset</span>.<span class="ruby-identifier">uri</span>
  <span class="ruby-identifier">asset</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load</span><span
            class="method-args">(uri)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Public: Load <a href="Asset.html">Asset</a> by AssetURI and track it as a
dependency.</p>

<p>uri - AssetURI</p>

<p>Returns <a href="Asset.html">Asset</a>.</p>
          
          

          
          <div class="method-source-code" id="load-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-identifier">asset</span> = <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-ivar">@dependencies</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">asset</span>.<span class="ruby-identifier">metadata</span>[<span class="ruby-value">:dependencies</span>])
  <span class="ruby-identifier">asset</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-metadata" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">metadata</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="metadata-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">metadata</span>
  { <span class="ruby-identifier">required</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@required</span>,
    <span class="ruby-identifier">stubbed</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@stubbed</span>,
    <span class="ruby-identifier">links</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@links</span>,
    <span class="ruby-identifier">dependencies</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@dependencies</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-require_asset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">require_asset</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>`require_asset` declares `path` as a dependency of the file. The dependency
will be inserted before the file and will only be included once.</p>

<p>If ERB processing is enabled, you can use it to dynamically require assets.</p>

<pre>&lt;%= require_asset &quot;#{framework}.js&quot; %&gt;</pre>
          
          

          
          <div class="method-source-code" id="require_asset-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 139</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">require_asset</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@required</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">accept</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@content_type</span>, <span class="ruby-identifier">pipeline</span><span class="ruby-operator">:</span> <span class="ruby-value">:self</span>, <span class="ruby-identifier">compat</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resolve" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resolve</span><span
            class="method-args">(path, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Public: Given a logical path, `resolve` will find and return an <a
href="Asset.html">Asset</a> URI. Relative paths will also be resolved. An
accept type maybe given to restrict the search.</p>

<pre class="ruby"><span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;foo.js&quot;</span>)
<span class="ruby-comment"># =&gt; &quot;file:///path/to/app/javascripts/foo.js?type=application/javascript&quot;</span>

<span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;./bar.js&quot;</span>)
<span class="ruby-comment"># =&gt; &quot;file:///path/to/app/javascripts/bar.js?type=application/javascript&quot;</span>
</pre>

<p>path - String logical or absolute path options</p>

<pre>accept - String content accept type</pre>

<p>Returns an <a href="Asset.html">Asset</a> URI String.</p>
          
          

          
          <div class="method-source-code" id="resolve-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">uri</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">resolve!</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">base_path</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@dirname</span>))
  <span class="ruby-ivar">@dependencies</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">deps</span>)
  <span class="ruby-identifier">uri</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Context.html#method-i-resolve_without_compat">resolve_without_compat</a>
        </div>
        

        
      </div>

    
      <div id="method-i-resolve_with_compat" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resolve_with_compat</span><span
            class="method-args">(path, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Deprecated: Change default return type of resolve() to return 2.x
compatible plain filename String. 4.x will always return an <a
href="Asset.html">Asset</a> URI.</p>

<pre class="ruby"><span class="ruby-value">2</span>.<span class="ruby-identifier">x</span>

  <span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;foo.js&quot;</span>)
  <span class="ruby-comment"># =&gt; &quot;/path/to/app/javascripts/foo.js&quot;</span>

<span class="ruby-value">3</span>.<span class="ruby-identifier">x</span>

  <span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;foo.js&quot;</span>)
  <span class="ruby-comment"># =&gt; &quot;/path/to/app/javascripts/foo.js&quot;</span>

  <span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;foo.js&quot;</span>, <span class="ruby-identifier">compat</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-comment"># =&gt; &quot;/path/to/app/javascripts/foo.js&quot;</span>

  <span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;foo.js&quot;</span>, <span class="ruby-identifier">compat</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-comment"># =&gt; &quot;file:///path/to/app/javascripts/foo.js?type=application/javascript&quot;</span>

<span class="ruby-value">4</span>.<span class="ruby-identifier">x</span>

  <span class="ruby-identifier">resolve</span>(<span class="ruby-string">&quot;foo.js&quot;</span>)
  <span class="ruby-comment"># =&gt; &quot;file:///path/to/app/javascripts/foo.js?type=application/javascript&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="resolve_with_compat-source">
            <pre><span class="ruby-comment"># File lib/sprockets/legacy.rb, line 239</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve_with_compat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>

  <span class="ruby-comment"># Support old :content_type option, prefer :accept going forward</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:content_type</span>)
    <span class="ruby-identifier">type</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:self</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-value">:accept</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">type</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:compat</span>) { <span class="ruby-keyword">true</span> }
    <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">resolve_without_compat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">path</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">environment</span>.<span class="ruby-identifier">parse_asset_uri</span>(<span class="ruby-identifier">uri</span>)
    <span class="ruby-identifier">path</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">resolve_without_compat</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: resolve
        </div>
        

        
      </div>

    
      <div id="method-i-resolve_without_compat" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">resolve_without_compat</span><span
            class="method-args">(path, options = {})</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Context.html#method-i-resolve">resolve</a>
        </div>
        
      </div>

    
      <div id="method-i-stub_asset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stub_asset</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>`stub_asset` blacklists `path` from being included in the bundle. `path`
must be an asset which may or may not already be included in the bundle.</p>
          
          

          
          <div class="method-source-code" id="stub_asset-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 147</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stub_asset</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-ivar">@stubbed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">accept</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@content_type</span>, <span class="ruby-identifier">pipeline</span><span class="ruby-operator">:</span> <span class="ruby-value">:self</span>, <span class="ruby-identifier">compat</span><span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stylesheet_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stylesheet_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand logical stylesheet asset path.</p>
          
          

          
          <div class="method-source-code" id="stylesheet_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-value">:stylesheet</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-video_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">video_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand logical video asset path.</p>
          
          

          
          <div class="method-source-code" id="video_path-source">
            <pre><span class="ruby-comment"># File lib/sprockets/context.rb, line 205</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">video_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">asset_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-value">:video</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

